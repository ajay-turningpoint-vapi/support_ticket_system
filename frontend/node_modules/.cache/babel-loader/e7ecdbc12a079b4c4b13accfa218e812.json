{"ast":null,"code":"/**\r\n * DevExtreme (ui/shared/accessibility.js)\r\n * Version: 20.1.7\r\n * Build date: Tue Aug 25 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _utils = require(\"../../events/utils\");\n\nvar eventUtils = _interopRequireWildcard(_utils);\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _dom_adapter = require(\"../../core/dom_adapter\");\n\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\n\nfunction _getRequireWildcardCache() {\n  if (\"function\" !== typeof WeakMap) {\n    return null;\n  }\n\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function () {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (null === obj || \"object\" !== _typeof(obj) && \"function\" !== typeof obj) {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar FOCUS_STATE_CLASS = \"dx-state-focused\";\nvar FOCUS_DISABLED_CLASS = \"dx-cell-focus-disabled\";\nvar FOCUSED_ROW_SELECTOR = \".dx-row-focused\";\nvar GRID_ROW_SELECTOR = \".dx-datagrid-rowsview .dx-row\";\nvar GRID_CELL_SELECTOR = \"\".concat(GRID_ROW_SELECTOR, \" > td\");\nvar TREELIST_ROW_SELECTOR = \".dx-treelist-rowsview .dx-row\";\nvar TREELIST_CELL_SELECTOR = \"\".concat(TREELIST_ROW_SELECTOR, \" > td\");\nvar viewItemSelectorMap = {\n  groupPanel: [\".dx-datagrid-group-panel .dx-group-panel-item[tabindex]\"],\n  columnHeaders: [\".dx-datagrid-headers .dx-header-row > td.dx-datagrid-action\", \".dx-treelist-headers .dx-header-row > td.dx-treelist-action\"],\n  filterRow: [\".dx-datagrid-headers .dx-datagrid-filter-row .dx-editor-cell .dx-texteditor-input\", \".dx-treelist-headers .dx-treelist-filter-row .dx-editor-cell .dx-texteditor-input\"],\n  rowsView: [\"\".concat(FOCUSED_ROW_SELECTOR), \"\".concat(GRID_ROW_SELECTOR, \"[tabindex]\"), \"\".concat(GRID_CELL_SELECTOR, \"[tabindex]\"), \"\".concat(GRID_CELL_SELECTOR), \"\".concat(TREELIST_ROW_SELECTOR, \"[tabindex]\"), \"\".concat(TREELIST_CELL_SELECTOR, \"[tabindex]\"), \"\".concat(TREELIST_CELL_SELECTOR)],\n  footer: [\".dx-datagrid-total-footer .dx-datagrid-summary-item\", \".dx-treelist-total-footer .dx-treelist-summary-item\"],\n  filterPanel: [\".dx-datagrid-filter-panel .dx-icon-filter\", \".dx-treelist-filter-panel .dx-icon-filter\"],\n  pager: [\".dx-datagrid-pager [tabindex]\", \".dx-treelist-pager [tabindex]\"]\n};\nvar isMouseDown = false;\nvar isHiddenFocusing = false;\nvar focusedElementInfo = null;\n\nfunction processKeyDown(viewName, instance, event, action, $mainElement, executeKeyDown) {\n  var isHandled = fireKeyDownEvent(instance, event.originalEvent, executeKeyDown);\n\n  if (isHandled) {\n    return;\n  }\n\n  var keyName = eventUtils.normalizeKeyName(event);\n\n  if (\"enter\" === keyName || \"space\" === keyName) {\n    saveFocusedElementInfo(event.target, instance);\n    action && action({\n      event: event\n    });\n  } else {\n    if (\"tab\" === keyName) {\n      $mainElement.addClass(FOCUS_STATE_CLASS);\n    } else {\n      module.exports.selectView(viewName, instance, event);\n    }\n  }\n}\n\nfunction saveFocusedElementInfo(target, instance) {\n  var $target = (0, _renderer2.default)(target);\n  var ariaLabel = $target.attr(\"aria-label\");\n  var $activeElements = getActiveAccessibleElements(ariaLabel, instance.element());\n  var targetIndex = $activeElements.index($target);\n  focusedElementInfo = (0, _extend.extend)({}, {\n    ariaLabel: ariaLabel,\n    index: targetIndex\n  }, {\n    viewInstance: instance\n  });\n}\n\nfunction getActiveAccessibleElements(ariaLabel, viewElement) {\n  var $viewElement = (0, _renderer2.default)(viewElement);\n  var $activeElements;\n\n  if (ariaLabel) {\n    $activeElements = $viewElement.find('[aria-label=\"'.concat(ariaLabel, '\"][tabindex]'));\n  } else {\n    $activeElements = $viewElement.find(\"[tabindex]\");\n  }\n\n  return $activeElements;\n}\n\nfunction findFocusedViewElement(viewSelectors) {\n  for (var index in viewSelectors) {\n    var selector = viewSelectors[index];\n    var $focusViewElement = (0, _renderer2.default)(selector).first();\n\n    if ($focusViewElement.length) {\n      return $focusViewElement;\n    }\n  }\n}\n\nfunction fireKeyDownEvent(instance, event, executeAction) {\n  var args = {\n    event: event,\n    handled: false\n  };\n\n  if (executeAction) {\n    executeAction(args);\n  } else {\n    instance._createActionByOption(\"onKeyDown\")(args);\n  }\n\n  return args.handled;\n}\n\nfunction onDocumentVisibilityChange() {\n  isHiddenFocusing = \"visible\" === _dom_adapter2.default.getDocument().visibilityState;\n}\n\nmodule.exports = {\n  subscribeVisibilityChange: function () {\n    _events_engine2.default.on(_dom_adapter2.default.getDocument(), \"visibilitychange\", onDocumentVisibilityChange);\n  },\n  unsubscribeVisibilityChange: function () {\n    _events_engine2.default.off(_dom_adapter2.default.getDocument(), \"visibilitychange\", onDocumentVisibilityChange);\n  },\n  hiddenFocus: function (element) {\n    isHiddenFocusing = true;\n    element.focus();\n    isHiddenFocusing = false;\n  },\n  registerKeyboardAction: function (viewName, instance, $element, selector, action, executeKeyDown) {\n    if (instance.option(\"useLegacyKeyboardNavigation\")) {\n      return;\n    }\n\n    var $mainElement = (0, _renderer2.default)(instance.element());\n\n    _events_engine2.default.on($element, \"keydown\", selector, function (e) {\n      return processKeyDown(viewName, instance, e, action, $mainElement, executeKeyDown);\n    });\n\n    _events_engine2.default.on($element, \"mousedown\", selector, function () {\n      isMouseDown = true;\n      $mainElement.removeClass(FOCUS_STATE_CLASS);\n    });\n\n    _events_engine2.default.on($element, \"focusin\", selector, function () {\n      var needShowOverlay = !isMouseDown && !isHiddenFocusing;\n\n      if (needShowOverlay) {\n        $mainElement.addClass(FOCUS_STATE_CLASS);\n      }\n\n      isMouseDown = false;\n    });\n  },\n  restoreFocus: function (instance) {\n    if (!instance.option(\"useLegacyKeyboardNavigation\") && focusedElementInfo) {\n      var viewInstance = focusedElementInfo.viewInstance;\n\n      if (viewInstance) {\n        var $activeElements = getActiveAccessibleElements(focusedElementInfo.ariaLabel, viewInstance.element());\n        var $targetElement = $activeElements.eq(focusedElementInfo.index);\n        focusedElementInfo = null;\n\n        _events_engine2.default.trigger($targetElement, \"focus\");\n      }\n    }\n  },\n  selectView: function (viewName, instance, event) {\n    var keyName = eventUtils.normalizeKeyName(event);\n\n    if (event.ctrlKey && (\"upArrow\" === keyName || \"downArrow\" === keyName)) {\n      var viewNames = Object.keys(viewItemSelectorMap);\n      var viewItemIndex = viewNames.indexOf(viewName);\n\n      while (viewItemIndex >= 0 && viewItemIndex < viewNames.length) {\n        viewItemIndex = \"upArrow\" === keyName ? --viewItemIndex : ++viewItemIndex;\n        var _viewName = viewNames[viewItemIndex];\n        var viewSelectors = viewItemSelectorMap[_viewName];\n        var $focusViewElement = findFocusedViewElement(viewSelectors);\n\n        if ($focusViewElement && $focusViewElement.length) {\n          $focusViewElement.attr(\"tabindex\", instance.option(\"tabindex\") || 0);\n\n          _events_engine2.default.trigger($focusViewElement, \"focus\");\n\n          $focusViewElement.removeClass(FOCUS_DISABLED_CLASS);\n          break;\n        }\n      }\n    }\n  },\n  setTabIndex: function (instance, $element) {\n    if (!instance.option(\"useLegacyKeyboardnavigation\")) {\n      $element.attr(\"tabindex\", instance.option(\"tabindex\") || 0);\n    }\n  }\n};","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/ticketSystem/frontend/node_modules/devextreme/ui/shared/accessibility.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_renderer","require","_renderer2","_interopRequireDefault","_events_engine","_events_engine2","_utils","eventUtils","_interopRequireWildcard","_extend","_dom_adapter","_dom_adapter2","_getRequireWildcardCache","WeakMap","cache","__esModule","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","hasOwnProperty","call","desc","set","default","FOCUS_STATE_CLASS","FOCUS_DISABLED_CLASS","FOCUSED_ROW_SELECTOR","GRID_ROW_SELECTOR","GRID_CELL_SELECTOR","concat","TREELIST_ROW_SELECTOR","TREELIST_CELL_SELECTOR","viewItemSelectorMap","groupPanel","columnHeaders","filterRow","rowsView","footer","filterPanel","pager","isMouseDown","isHiddenFocusing","focusedElementInfo","processKeyDown","viewName","instance","event","action","$mainElement","executeKeyDown","isHandled","fireKeyDownEvent","originalEvent","keyName","normalizeKeyName","saveFocusedElementInfo","target","addClass","module","exports","selectView","$target","ariaLabel","attr","$activeElements","getActiveAccessibleElements","element","targetIndex","index","extend","viewInstance","viewElement","$viewElement","find","findFocusedViewElement","viewSelectors","selector","$focusViewElement","first","length","executeAction","args","handled","_createActionByOption","onDocumentVisibilityChange","getDocument","visibilityState","subscribeVisibilityChange","on","unsubscribeVisibilityChange","off","hiddenFocus","focus","registerKeyboardAction","$element","option","e","removeClass","needShowOverlay","restoreFocus","$targetElement","eq","trigger","ctrlKey","viewNames","keys","viewItemIndex","indexOf","_viewName","setTabIndex"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/shared/accessibility.js)\r\n * Version: 20.1.7\r\n * Build date: Tue Aug 25 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\n\r\nfunction _typeof(obj) {\r\n    \"@babel/helpers - typeof\";\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _utils = require(\"../../events/utils\");\r\nvar eventUtils = _interopRequireWildcard(_utils);\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _dom_adapter = require(\"../../core/dom_adapter\");\r\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\r\n\r\nfunction _getRequireWildcardCache() {\r\n    if (\"function\" !== typeof WeakMap) {\r\n        return null\r\n    }\r\n    var cache = new WeakMap;\r\n    _getRequireWildcardCache = function() {\r\n        return cache\r\n    };\r\n    return cache\r\n}\r\n\r\nfunction _interopRequireWildcard(obj) {\r\n    if (obj && obj.__esModule) {\r\n        return obj\r\n    }\r\n    if (null === obj || \"object\" !== _typeof(obj) && \"function\" !== typeof obj) {\r\n        return {\r\n            \"default\": obj\r\n        }\r\n    }\r\n    var cache = _getRequireWildcardCache();\r\n    if (cache && cache.has(obj)) {\r\n        return cache.get(obj)\r\n    }\r\n    var newObj = {};\r\n    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\r\n    for (var key in obj) {\r\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\r\n            if (desc && (desc.get || desc.set)) {\r\n                Object.defineProperty(newObj, key, desc)\r\n            } else {\r\n                newObj[key] = obj[key]\r\n            }\r\n        }\r\n    }\r\n    newObj.default = obj;\r\n    if (cache) {\r\n        cache.set(obj, newObj)\r\n    }\r\n    return newObj\r\n}\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar FOCUS_STATE_CLASS = \"dx-state-focused\";\r\nvar FOCUS_DISABLED_CLASS = \"dx-cell-focus-disabled\";\r\nvar FOCUSED_ROW_SELECTOR = \".dx-row-focused\";\r\nvar GRID_ROW_SELECTOR = \".dx-datagrid-rowsview .dx-row\";\r\nvar GRID_CELL_SELECTOR = \"\".concat(GRID_ROW_SELECTOR, \" > td\");\r\nvar TREELIST_ROW_SELECTOR = \".dx-treelist-rowsview .dx-row\";\r\nvar TREELIST_CELL_SELECTOR = \"\".concat(TREELIST_ROW_SELECTOR, \" > td\");\r\nvar viewItemSelectorMap = {\r\n    groupPanel: [\".dx-datagrid-group-panel .dx-group-panel-item[tabindex]\"],\r\n    columnHeaders: [\".dx-datagrid-headers .dx-header-row > td.dx-datagrid-action\", \".dx-treelist-headers .dx-header-row > td.dx-treelist-action\"],\r\n    filterRow: [\".dx-datagrid-headers .dx-datagrid-filter-row .dx-editor-cell .dx-texteditor-input\", \".dx-treelist-headers .dx-treelist-filter-row .dx-editor-cell .dx-texteditor-input\"],\r\n    rowsView: [\"\".concat(FOCUSED_ROW_SELECTOR), \"\".concat(GRID_ROW_SELECTOR, \"[tabindex]\"), \"\".concat(GRID_CELL_SELECTOR, \"[tabindex]\"), \"\".concat(GRID_CELL_SELECTOR), \"\".concat(TREELIST_ROW_SELECTOR, \"[tabindex]\"), \"\".concat(TREELIST_CELL_SELECTOR, \"[tabindex]\"), \"\".concat(TREELIST_CELL_SELECTOR)],\r\n    footer: [\".dx-datagrid-total-footer .dx-datagrid-summary-item\", \".dx-treelist-total-footer .dx-treelist-summary-item\"],\r\n    filterPanel: [\".dx-datagrid-filter-panel .dx-icon-filter\", \".dx-treelist-filter-panel .dx-icon-filter\"],\r\n    pager: [\".dx-datagrid-pager [tabindex]\", \".dx-treelist-pager [tabindex]\"]\r\n};\r\nvar isMouseDown = false;\r\nvar isHiddenFocusing = false;\r\nvar focusedElementInfo = null;\r\n\r\nfunction processKeyDown(viewName, instance, event, action, $mainElement, executeKeyDown) {\r\n    var isHandled = fireKeyDownEvent(instance, event.originalEvent, executeKeyDown);\r\n    if (isHandled) {\r\n        return\r\n    }\r\n    var keyName = eventUtils.normalizeKeyName(event);\r\n    if (\"enter\" === keyName || \"space\" === keyName) {\r\n        saveFocusedElementInfo(event.target, instance);\r\n        action && action({\r\n            event: event\r\n        })\r\n    } else {\r\n        if (\"tab\" === keyName) {\r\n            $mainElement.addClass(FOCUS_STATE_CLASS)\r\n        } else {\r\n            module.exports.selectView(viewName, instance, event)\r\n        }\r\n    }\r\n}\r\n\r\nfunction saveFocusedElementInfo(target, instance) {\r\n    var $target = (0, _renderer2.default)(target);\r\n    var ariaLabel = $target.attr(\"aria-label\");\r\n    var $activeElements = getActiveAccessibleElements(ariaLabel, instance.element());\r\n    var targetIndex = $activeElements.index($target);\r\n    focusedElementInfo = (0, _extend.extend)({}, {\r\n        ariaLabel: ariaLabel,\r\n        index: targetIndex\r\n    }, {\r\n        viewInstance: instance\r\n    })\r\n}\r\n\r\nfunction getActiveAccessibleElements(ariaLabel, viewElement) {\r\n    var $viewElement = (0, _renderer2.default)(viewElement);\r\n    var $activeElements;\r\n    if (ariaLabel) {\r\n        $activeElements = $viewElement.find('[aria-label=\"'.concat(ariaLabel, '\"][tabindex]'))\r\n    } else {\r\n        $activeElements = $viewElement.find(\"[tabindex]\")\r\n    }\r\n    return $activeElements\r\n}\r\n\r\nfunction findFocusedViewElement(viewSelectors) {\r\n    for (var index in viewSelectors) {\r\n        var selector = viewSelectors[index];\r\n        var $focusViewElement = (0, _renderer2.default)(selector).first();\r\n        if ($focusViewElement.length) {\r\n            return $focusViewElement\r\n        }\r\n    }\r\n}\r\n\r\nfunction fireKeyDownEvent(instance, event, executeAction) {\r\n    var args = {\r\n        event: event,\r\n        handled: false\r\n    };\r\n    if (executeAction) {\r\n        executeAction(args)\r\n    } else {\r\n        instance._createActionByOption(\"onKeyDown\")(args)\r\n    }\r\n    return args.handled\r\n}\r\n\r\nfunction onDocumentVisibilityChange() {\r\n    isHiddenFocusing = \"visible\" === _dom_adapter2.default.getDocument().visibilityState\r\n}\r\nmodule.exports = {\r\n    subscribeVisibilityChange: function() {\r\n        _events_engine2.default.on(_dom_adapter2.default.getDocument(), \"visibilitychange\", onDocumentVisibilityChange)\r\n    },\r\n    unsubscribeVisibilityChange: function() {\r\n        _events_engine2.default.off(_dom_adapter2.default.getDocument(), \"visibilitychange\", onDocumentVisibilityChange)\r\n    },\r\n    hiddenFocus: function(element) {\r\n        isHiddenFocusing = true;\r\n        element.focus();\r\n        isHiddenFocusing = false\r\n    },\r\n    registerKeyboardAction: function(viewName, instance, $element, selector, action, executeKeyDown) {\r\n        if (instance.option(\"useLegacyKeyboardNavigation\")) {\r\n            return\r\n        }\r\n        var $mainElement = (0, _renderer2.default)(instance.element());\r\n        _events_engine2.default.on($element, \"keydown\", selector, function(e) {\r\n            return processKeyDown(viewName, instance, e, action, $mainElement, executeKeyDown)\r\n        });\r\n        _events_engine2.default.on($element, \"mousedown\", selector, function() {\r\n            isMouseDown = true;\r\n            $mainElement.removeClass(FOCUS_STATE_CLASS)\r\n        });\r\n        _events_engine2.default.on($element, \"focusin\", selector, function() {\r\n            var needShowOverlay = !isMouseDown && !isHiddenFocusing;\r\n            if (needShowOverlay) {\r\n                $mainElement.addClass(FOCUS_STATE_CLASS)\r\n            }\r\n            isMouseDown = false\r\n        })\r\n    },\r\n    restoreFocus: function(instance) {\r\n        if (!instance.option(\"useLegacyKeyboardNavigation\") && focusedElementInfo) {\r\n            var viewInstance = focusedElementInfo.viewInstance;\r\n            if (viewInstance) {\r\n                var $activeElements = getActiveAccessibleElements(focusedElementInfo.ariaLabel, viewInstance.element());\r\n                var $targetElement = $activeElements.eq(focusedElementInfo.index);\r\n                focusedElementInfo = null;\r\n                _events_engine2.default.trigger($targetElement, \"focus\")\r\n            }\r\n        }\r\n    },\r\n    selectView: function(viewName, instance, event) {\r\n        var keyName = eventUtils.normalizeKeyName(event);\r\n        if (event.ctrlKey && (\"upArrow\" === keyName || \"downArrow\" === keyName)) {\r\n            var viewNames = Object.keys(viewItemSelectorMap);\r\n            var viewItemIndex = viewNames.indexOf(viewName);\r\n            while (viewItemIndex >= 0 && viewItemIndex < viewNames.length) {\r\n                viewItemIndex = \"upArrow\" === keyName ? --viewItemIndex : ++viewItemIndex;\r\n                var _viewName = viewNames[viewItemIndex];\r\n                var viewSelectors = viewItemSelectorMap[_viewName];\r\n                var $focusViewElement = findFocusedViewElement(viewSelectors);\r\n                if ($focusViewElement && $focusViewElement.length) {\r\n                    $focusViewElement.attr(\"tabindex\", instance.option(\"tabindex\") || 0);\r\n                    _events_engine2.default.trigger($focusViewElement, \"focus\");\r\n                    $focusViewElement.removeClass(FOCUS_DISABLED_CLASS);\r\n                    break\r\n                }\r\n            }\r\n        }\r\n    },\r\n    setTabIndex: function(instance, $element) {\r\n        if (!instance.option(\"useLegacyKeyboardnavigation\")) {\r\n            $element.attr(\"tabindex\", instance.option(\"tabindex\") || 0)\r\n        }\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"script"}