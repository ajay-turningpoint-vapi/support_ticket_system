{"ast":null,"code":"/**\r\n * DevExtreme (exporter/file_saver.js)\r\n * Version: 20.1.7\r\n * Build date: Tue Aug 25 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _dom_adapter = require(\"../core/dom_adapter\");\n\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\n\nvar _window = require(\"../core/utils/window\");\n\nvar _window2 = _interopRequireDefault(_window);\n\nvar _events_engine = require(\"../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _ui = require(\"../ui/widget/ui.errors\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _type = require(\"../core/utils/type\");\n\nvar _type2 = _interopRequireDefault(_type);\n\nvar _console = require(\"../core/utils/console\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar window = _window2.default.getWindow();\n\nvar navigator = _window2.default.getNavigator();\n\nvar FILE_EXTESIONS = {\n  EXCEL: \"xlsx\",\n  CSS: \"css\",\n  PNG: \"png\",\n  JPEG: \"jpeg\",\n  GIF: \"gif\",\n  SVG: \"svg\",\n  PDF: \"pdf\"\n};\nvar MIME_TYPES = exports.MIME_TYPES = {\n  CSS: \"text/css\",\n  EXCEL: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\n  PNG: \"image/png\",\n  JPEG: \"image/jpeg\",\n  GIF: \"image/gif\",\n  SVG: \"image/svg+xml\",\n  PDF: \"application/pdf\"\n};\nexports.fileSaver = {\n  _revokeObjectURLTimeout: 3e4,\n  _getDataUri: function (format, data) {\n    var mimeType = this._getMimeType(format);\n\n    return \"data:\".concat(mimeType, \";base64,\").concat(data);\n  },\n  _getMimeType: function (format) {\n    return MIME_TYPES[format] || \"application/octet-stream\";\n  },\n  _linkDownloader: function (fileName, href) {\n    var exportLinkElement = _dom_adapter2.default.createElement(\"a\");\n\n    exportLinkElement.download = fileName;\n    exportLinkElement.href = href;\n    exportLinkElement.target = \"_blank\";\n    return exportLinkElement;\n  },\n  _formDownloader: function (proxyUrl, fileName, contentType, data) {\n    var formAttributes = {\n      method: \"post\",\n      action: proxyUrl,\n      enctype: \"multipart/form-data\"\n    };\n    var exportForm = (0, _renderer2.default)(\"<form>\").css({\n      display: \"none\"\n    }).attr(formAttributes);\n\n    function setAttributes(element, attributes) {\n      for (var key in attributes) {\n        element.setAttribute(key, attributes[key]);\n      }\n\n      return element;\n    }\n\n    exportForm.append(setAttributes(_dom_adapter2.default.createElement(\"input\"), {\n      type: \"hidden\",\n      name: \"fileName\",\n      value: fileName\n    }));\n    exportForm.append(setAttributes(_dom_adapter2.default.createElement(\"input\"), {\n      type: \"hidden\",\n      name: \"contentType\",\n      value: contentType\n    }));\n    exportForm.append(setAttributes(_dom_adapter2.default.createElement(\"input\"), {\n      type: \"hidden\",\n      name: \"data\",\n      value: data\n    }));\n    exportForm.appendTo(\"body\");\n\n    _events_engine2.default.trigger(exportForm, \"submit\");\n\n    if (_events_engine2.default.trigger(exportForm, \"submit\")) {\n      exportForm.remove();\n    }\n  },\n  _saveByProxy: function (proxyUrl, fileName, format, data) {\n    var contentType = this._getMimeType(format);\n\n    return this._formDownloader(proxyUrl, fileName, contentType, data);\n  },\n  _winJSBlobSave: function (blob, fileName, format) {\n    var savePicker = new Windows.Storage.Pickers.FileSavePicker();\n    savePicker.suggestedStartLocation = Windows.Storage.Pickers.PickerLocationId.documentsLibrary;\n    var fileExtension = FILE_EXTESIONS[format];\n\n    if (fileExtension) {\n      var mimeType = this._getMimeType(format);\n\n      savePicker.fileTypeChoices.insert(mimeType, [\".\" + fileExtension]);\n    }\n\n    savePicker.suggestedFileName = fileName;\n    savePicker.pickSaveFileAsync().then(function (file) {\n      if (file) {\n        file.openAsync(Windows.Storage.FileAccessMode.readWrite).then(function (outputStream) {\n          var inputStream = blob.msDetachStream();\n          Windows.Storage.Streams.RandomAccessStream.copyAsync(inputStream, outputStream).then(function () {\n            outputStream.flushAsync().done(function () {\n              inputStream.close();\n              outputStream.close();\n            });\n          });\n        });\n      }\n    });\n  },\n  _click: function (link) {\n    try {\n      link.dispatchEvent(new MouseEvent(\"click\", {\n        cancelable: true\n      }));\n    } catch (e) {\n      var event = _dom_adapter2.default.getDocument().createEvent(\"MouseEvents\");\n\n      event.initMouseEvent(\"click\", true, true, window, 0, 0, 0, 80, 20, false, false, false, false, 0, null);\n      link.dispatchEvent(event);\n    }\n  },\n  _saveBlobAs: function (fileName, format, data) {\n    var _this = this;\n\n    this._blobSaved = false;\n\n    if (_type2.default.isDefined(navigator.msSaveOrOpenBlob)) {\n      navigator.msSaveOrOpenBlob(data, fileName);\n      this._blobSaved = true;\n    } else {\n      if (_type2.default.isDefined(window.WinJS)) {\n        this._winJSBlobSave(data, fileName, format);\n\n        this._blobSaved = true;\n      } else {\n        var URL = window.URL || window.webkitURL || window.mozURL || window.msURL || window.oURL;\n\n        if (_type2.default.isDefined(URL)) {\n          var objectURL = URL.createObjectURL(data);\n\n          var downloadLink = this._linkDownloader(fileName, objectURL);\n\n          setTimeout(function () {\n            URL.revokeObjectURL(objectURL);\n            _this._objectUrlRevoked = true;\n          }, this._revokeObjectURLTimeout);\n\n          this._click(downloadLink);\n        } else {\n          _console.logger.warn(\"window.URL || window.webkitURL || window.mozURL || window.msURL || window.oURL is not defined\");\n        }\n      }\n    }\n  },\n  saveAs: function (fileName, format, data, proxyURL, forceProxy) {\n    var fileExtension = FILE_EXTESIONS[format];\n\n    if (fileExtension) {\n      fileName += \".\" + fileExtension;\n    }\n\n    if (_type2.default.isDefined(proxyURL)) {\n      _ui2.default.log(\"W0001\", \"Export\", \"proxyURL\", \"19.2\", \"This option is no longer required\");\n    }\n\n    if (forceProxy) {\n      this._saveByProxy(proxyURL, fileName, format, data);\n    } else {\n      if (_type2.default.isFunction(window.Blob)) {\n        this._saveBlobAs(fileName, format, data);\n      } else {\n        if (_type2.default.isDefined(proxyURL) && !_type2.default.isDefined(navigator.userAgent.match(/iPad/i))) {\n          this._saveByProxy(proxyURL, fileName, format, data);\n        } else {\n          if (!_type2.default.isDefined(navigator.userAgent.match(/iPad/i))) {\n            _ui2.default.log(\"E1034\");\n          }\n\n          var downloadLink = this._linkDownloader(fileName, this._getDataUri(format, data));\n\n          this._click(downloadLink);\n        }\n      }\n    }\n  }\n};","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/ticketSystem/frontend/node_modules/devextreme/exporter/file_saver.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_dom_adapter","_dom_adapter2","_window","_window2","_events_engine","_events_engine2","_ui","_ui2","_type","_type2","_console","obj","__esModule","window","default","getWindow","navigator","getNavigator","FILE_EXTESIONS","EXCEL","CSS","PNG","JPEG","GIF","SVG","PDF","MIME_TYPES","exports","fileSaver","_revokeObjectURLTimeout","_getDataUri","format","data","mimeType","_getMimeType","concat","_linkDownloader","fileName","href","exportLinkElement","createElement","download","target","_formDownloader","proxyUrl","contentType","formAttributes","method","action","enctype","exportForm","css","display","attr","setAttributes","element","attributes","key","setAttribute","append","type","name","value","appendTo","trigger","remove","_saveByProxy","_winJSBlobSave","blob","savePicker","Windows","Storage","Pickers","FileSavePicker","suggestedStartLocation","PickerLocationId","documentsLibrary","fileExtension","fileTypeChoices","insert","suggestedFileName","pickSaveFileAsync","then","file","openAsync","FileAccessMode","readWrite","outputStream","inputStream","msDetachStream","Streams","RandomAccessStream","copyAsync","flushAsync","done","close","_click","link","dispatchEvent","MouseEvent","cancelable","e","event","getDocument","createEvent","initMouseEvent","_saveBlobAs","_this","_blobSaved","isDefined","msSaveOrOpenBlob","WinJS","URL","webkitURL","mozURL","msURL","oURL","objectURL","createObjectURL","downloadLink","setTimeout","revokeObjectURL","_objectUrlRevoked","logger","warn","saveAs","proxyURL","forceProxy","log","isFunction","Blob","userAgent","match"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (exporter/file_saver.js)\r\n * Version: 20.1.7\r\n * Build date: Tue Aug 25 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _dom_adapter = require(\"../core/dom_adapter\");\r\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\r\nvar _window = require(\"../core/utils/window\");\r\nvar _window2 = _interopRequireDefault(_window);\r\nvar _events_engine = require(\"../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _ui = require(\"../ui/widget/ui.errors\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _type = require(\"../core/utils/type\");\r\nvar _type2 = _interopRequireDefault(_type);\r\nvar _console = require(\"../core/utils/console\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar window = _window2.default.getWindow();\r\nvar navigator = _window2.default.getNavigator();\r\nvar FILE_EXTESIONS = {\r\n    EXCEL: \"xlsx\",\r\n    CSS: \"css\",\r\n    PNG: \"png\",\r\n    JPEG: \"jpeg\",\r\n    GIF: \"gif\",\r\n    SVG: \"svg\",\r\n    PDF: \"pdf\"\r\n};\r\nvar MIME_TYPES = exports.MIME_TYPES = {\r\n    CSS: \"text/css\",\r\n    EXCEL: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\r\n    PNG: \"image/png\",\r\n    JPEG: \"image/jpeg\",\r\n    GIF: \"image/gif\",\r\n    SVG: \"image/svg+xml\",\r\n    PDF: \"application/pdf\"\r\n};\r\nexports.fileSaver = {\r\n    _revokeObjectURLTimeout: 3e4,\r\n    _getDataUri: function(format, data) {\r\n        var mimeType = this._getMimeType(format);\r\n        return \"data:\".concat(mimeType, \";base64,\").concat(data)\r\n    },\r\n    _getMimeType: function(format) {\r\n        return MIME_TYPES[format] || \"application/octet-stream\"\r\n    },\r\n    _linkDownloader: function(fileName, href) {\r\n        var exportLinkElement = _dom_adapter2.default.createElement(\"a\");\r\n        exportLinkElement.download = fileName;\r\n        exportLinkElement.href = href;\r\n        exportLinkElement.target = \"_blank\";\r\n        return exportLinkElement\r\n    },\r\n    _formDownloader: function(proxyUrl, fileName, contentType, data) {\r\n        var formAttributes = {\r\n            method: \"post\",\r\n            action: proxyUrl,\r\n            enctype: \"multipart/form-data\"\r\n        };\r\n        var exportForm = (0, _renderer2.default)(\"<form>\").css({\r\n            display: \"none\"\r\n        }).attr(formAttributes);\r\n\r\n        function setAttributes(element, attributes) {\r\n            for (var key in attributes) {\r\n                element.setAttribute(key, attributes[key])\r\n            }\r\n            return element\r\n        }\r\n        exportForm.append(setAttributes(_dom_adapter2.default.createElement(\"input\"), {\r\n            type: \"hidden\",\r\n            name: \"fileName\",\r\n            value: fileName\r\n        }));\r\n        exportForm.append(setAttributes(_dom_adapter2.default.createElement(\"input\"), {\r\n            type: \"hidden\",\r\n            name: \"contentType\",\r\n            value: contentType\r\n        }));\r\n        exportForm.append(setAttributes(_dom_adapter2.default.createElement(\"input\"), {\r\n            type: \"hidden\",\r\n            name: \"data\",\r\n            value: data\r\n        }));\r\n        exportForm.appendTo(\"body\");\r\n        _events_engine2.default.trigger(exportForm, \"submit\");\r\n        if (_events_engine2.default.trigger(exportForm, \"submit\")) {\r\n            exportForm.remove()\r\n        }\r\n    },\r\n    _saveByProxy: function(proxyUrl, fileName, format, data) {\r\n        var contentType = this._getMimeType(format);\r\n        return this._formDownloader(proxyUrl, fileName, contentType, data)\r\n    },\r\n    _winJSBlobSave: function(blob, fileName, format) {\r\n        var savePicker = new Windows.Storage.Pickers.FileSavePicker;\r\n        savePicker.suggestedStartLocation = Windows.Storage.Pickers.PickerLocationId.documentsLibrary;\r\n        var fileExtension = FILE_EXTESIONS[format];\r\n        if (fileExtension) {\r\n            var mimeType = this._getMimeType(format);\r\n            savePicker.fileTypeChoices.insert(mimeType, [\".\" + fileExtension])\r\n        }\r\n        savePicker.suggestedFileName = fileName;\r\n        savePicker.pickSaveFileAsync().then(function(file) {\r\n            if (file) {\r\n                file.openAsync(Windows.Storage.FileAccessMode.readWrite).then(function(outputStream) {\r\n                    var inputStream = blob.msDetachStream();\r\n                    Windows.Storage.Streams.RandomAccessStream.copyAsync(inputStream, outputStream).then(function() {\r\n                        outputStream.flushAsync().done(function() {\r\n                            inputStream.close();\r\n                            outputStream.close()\r\n                        })\r\n                    })\r\n                })\r\n            }\r\n        })\r\n    },\r\n    _click: function(link) {\r\n        try {\r\n            link.dispatchEvent(new MouseEvent(\"click\", {\r\n                cancelable: true\r\n            }))\r\n        } catch (e) {\r\n            var event = _dom_adapter2.default.getDocument().createEvent(\"MouseEvents\");\r\n            event.initMouseEvent(\"click\", true, true, window, 0, 0, 0, 80, 20, false, false, false, false, 0, null);\r\n            link.dispatchEvent(event)\r\n        }\r\n    },\r\n    _saveBlobAs: function(fileName, format, data) {\r\n        var _this = this;\r\n        this._blobSaved = false;\r\n        if (_type2.default.isDefined(navigator.msSaveOrOpenBlob)) {\r\n            navigator.msSaveOrOpenBlob(data, fileName);\r\n            this._blobSaved = true\r\n        } else {\r\n            if (_type2.default.isDefined(window.WinJS)) {\r\n                this._winJSBlobSave(data, fileName, format);\r\n                this._blobSaved = true\r\n            } else {\r\n                var URL = window.URL || window.webkitURL || window.mozURL || window.msURL || window.oURL;\r\n                if (_type2.default.isDefined(URL)) {\r\n                    var objectURL = URL.createObjectURL(data);\r\n                    var downloadLink = this._linkDownloader(fileName, objectURL);\r\n                    setTimeout(function() {\r\n                        URL.revokeObjectURL(objectURL);\r\n                        _this._objectUrlRevoked = true\r\n                    }, this._revokeObjectURLTimeout);\r\n                    this._click(downloadLink)\r\n                } else {\r\n                    _console.logger.warn(\"window.URL || window.webkitURL || window.mozURL || window.msURL || window.oURL is not defined\")\r\n                }\r\n            }\r\n        }\r\n    },\r\n    saveAs: function(fileName, format, data, proxyURL, forceProxy) {\r\n        var fileExtension = FILE_EXTESIONS[format];\r\n        if (fileExtension) {\r\n            fileName += \".\" + fileExtension\r\n        }\r\n        if (_type2.default.isDefined(proxyURL)) {\r\n            _ui2.default.log(\"W0001\", \"Export\", \"proxyURL\", \"19.2\", \"This option is no longer required\")\r\n        }\r\n        if (forceProxy) {\r\n            this._saveByProxy(proxyURL, fileName, format, data)\r\n        } else {\r\n            if (_type2.default.isFunction(window.Blob)) {\r\n                this._saveBlobAs(fileName, format, data)\r\n            } else {\r\n                if (_type2.default.isDefined(proxyURL) && !_type2.default.isDefined(navigator.userAgent.match(/iPad/i))) {\r\n                    this._saveByProxy(proxyURL, fileName, format, data)\r\n                } else {\r\n                    if (!_type2.default.isDefined(navigator.userAgent.match(/iPad/i))) {\r\n                        _ui2.default.log(\"E1034\")\r\n                    }\r\n                    var downloadLink = this._linkDownloader(fileName, this._getDataUri(format, data));\r\n                    this._click(downloadLink)\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"script"}