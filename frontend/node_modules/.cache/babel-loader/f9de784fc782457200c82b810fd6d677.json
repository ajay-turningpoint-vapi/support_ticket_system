{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\ticketSystem\\\\frontend\\\\src\\\\components\\\\TicketShow.js\";\nimport React, { Component, useState } from 'react';\nimport jwt_decode from 'jwt-decode';\nimport axios from 'axios';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport { Dropdown, Badge, Modal } from 'react-bootstrap';\nimport Paper from '@material-ui/core/Paper';\nimport { Button } from 'react-bootstrap';\n\nclass ShowTickets extends Component {\n  constructor() {\n    super();\n\n    this.getTicket = test => {\n      return axios.get('tickets/deneme', {}).then(response => {\n        console.log(\"axios girdi\");\n        this.setState({\n          data: response.data\n        });\n        console.log(\"data geldi\");\n        console.log(response.data);\n        return response.data;\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.handleShow = () => this.setState({\n      show: true\n    });\n\n    this.state = {\n      data: [],\n      show: false,\n      singleMessage: ''\n    };\n  }\n\n  handleClose() {\n    this.setState({\n      show: false,\n      singleMessage: this.state.singleMessage\n    });\n  }\n\n  componentDidMount() {\n    console.log(\"componentde\");\n    const token = localStorage.usertoken;\n    const decoded = jwt_decode(token);\n    this.getTicket();\n    console.log(decoded.role);\n    this.setState({\n      role: decoded.role\n    });\n    console.log(this.state.role);\n  }\n\n  changeStatus(id, status) {\n    return axios.put('tickets/changeStatus', {\n      id,\n      status\n    }).then(response => {\n      console.log(\"axios puta girdi\");\n      this.getTicket();\n      console.log(response.data);\n      return response.data;\n    }).catch(err => {\n      console.log(\"axios puta girmedi\");\n      console.log(err);\n    });\n  }\n\n  statusFilter(status) {\n    return axios.post('tickets/filterStatus', {\n      status\n    }).then(response => {\n      console.log(\"axios girdi\");\n      this.setState({\n        data: response.data\n      });\n      console.log(\"data geldi\");\n      console.log(response.data);\n      return response.data;\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  statusName(status) {\n    switch (status) {\n      case 0:\n        return /*#__PURE__*/React.createElement(\"h5\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 16\n          }\n        }, /*#__PURE__*/React.createElement(Badge, {\n          pill: true,\n          variant: \"primary\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 20\n          }\n        }, \"Opening\"));\n\n      case 1:\n        return /*#__PURE__*/React.createElement(\"h5\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 18\n          }\n        }, /*#__PURE__*/React.createElement(Badge, {\n          pill: true,\n          variant: \"danger\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 22\n          }\n        }, \"Waiting\"));\n\n      case 2:\n        return /*#__PURE__*/React.createElement(\"h5\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 20\n          }\n        }, /*#__PURE__*/React.createElement(Badge, {\n          pill: true,\n          variant: \"success\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 24\n          }\n        }, \"Closed\"));\n\n      default:\n        return /*#__PURE__*/React.createElement(\"h5\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 16\n          }\n        }, /*#__PURE__*/React.createElement(Badge, {\n          pill: true,\n          variant: \"primary\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 20\n          }\n        }, \"Opening\"));\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 7\n      }\n    }, this.state.role === 1 ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"jumbotron mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-sm-8 mx-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 13\n      }\n    }, \"ADMIN PAGE\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 51\n      }\n    }), \"TICKETS\")), /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      onClick: () => this.statusFilter(0),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 11\n      }\n    }, \"Opening\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"danger\",\n      onClick: () => this.statusFilter(1),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 11\n      }\n    }, \"Waiting\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"success\",\n      onClick: () => this.statusFilter(2),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }\n    }, \"Closed\"), /*#__PURE__*/React.createElement(TableContainer, {\n      component: Paper,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Table, {\n      size: \"small\",\n      \"aria-label\": \"a dense table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(TableHead, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(TableRow, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 13\n      }\n    }, \"TicketName\"), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 13\n      }\n    }, \"Content\"), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 13\n      }\n    }, \"\\u0130mage\"), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 13\n      }\n    }, \"Message\"), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 13\n      }\n    }, \"Status\"), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 13\n      }\n    }, \"Change Status\"), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }\n    }, \"Add Message\"))), /*#__PURE__*/React.createElement(TableBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }\n    }, this.state.data.length > 0 && this.state.data.map((row, index) => /*#__PURE__*/React.createElement(TableRow, {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      component: \"th\",\n      scope: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 15\n      }\n    }, row.name), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 15\n      }\n    }, row.content), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      target: \"_parent\",\n      href: `http://localhost:5000/public/${row.img}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 40\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      width: \"100px\",\n      src: `http://localhost:5000/public/${row.img}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 109\n      }\n    }))), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 15\n      }\n    }, row.messages.length > 0 ? row.messages[0].text : null), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 15\n      }\n    }, this.statusName(row.status)), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Dropdown, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 40\n      }\n    }, /*#__PURE__*/React.createElement(Dropdown.Toggle, {\n      size: \"sm\",\n      variant: \"success\",\n      id: \"dropdown-basic\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 1\n      }\n    }, \"Change Status\"), /*#__PURE__*/React.createElement(Dropdown.Menu, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(Dropdown.Item, {\n      onClick: () => this.changeStatus(row._id, 0),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 5\n      }\n    }, \"Opening\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n      onClick: () => this.changeStatus(row._id, 1),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 5\n      }\n    }, \"Waiting\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n      onClick: () => this.changeStatus(row._id, 2),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 5\n      }\n    }, \"Closed\")))), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 1\n      }\n    }, \"   \", /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n      size: \"sm\",\n      variant: \"primary\",\n      onClick: () => this.handleShow(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 7\n      }\n    }, \"Add Message\"), /*#__PURE__*/React.createElement(Modal, {\n      show: this.state.show,\n      onHide: () => this.handleClose(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Header, {\n      closeButton: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }\n    }, \"Add Message  \")), /*#__PURE__*/React.createElement(Modal.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 3\n      }\n    }, \"Message :\", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"singleMessage\",\n      value: this.state.singleMessage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 5\n      }\n    })))), /*#__PURE__*/React.createElement(Modal.Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: () => this.handleClose(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 11\n      }\n    }, \"Close\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      onClick: () => this.handleClose(row._id, singleMessage),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }\n    }, \"Add Message\"))))))), \" \")))) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 14\n      }\n    }, \"User Page\")));\n  }\n\n}\n\nexport default ShowTickets;","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/ticketSystem/frontend/src/components/TicketShow.js"],"names":["React","Component","useState","jwt_decode","axios","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Dropdown","Badge","Modal","Paper","Button","ShowTickets","constructor","getTicket","test","get","then","response","console","log","setState","data","catch","err","handleShow","show","state","singleMessage","handleClose","componentDidMount","token","localStorage","usertoken","decoded","role","changeStatus","id","status","put","statusFilter","post","statusName","render","length","map","row","index","name","content","img","messages","text","_id"],"mappings":"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","sourcesContent":["import React, { Component , useState } from 'react'\r\nimport jwt_decode from 'jwt-decode'\r\nimport axios from 'axios'\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Dropdown,Badge,Modal} from 'react-bootstrap';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { Button } from 'react-bootstrap';\r\n\r\n\r\nclass ShowTickets extends Component {\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n     data:[],\r\n     show:false,\r\n     singleMessage:'',\r\n    }\r\n  }\r\n\r\n  getTicket = test => {\r\n    return axios\r\n      .get('tickets/deneme', {\r\n        \r\n      })\r\n      .then(response => {\r\n        console.log(\"axios girdi\")\r\n        this.setState({\r\n            data:response.data,\r\n            \r\n        })\r\n        console.log(\"data geldi\")\r\n        console.log(response.data)\r\n        return response.data\r\n        \r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n\r\n \r\n \r\n\r\n\r\n  handleClose (){\r\n\r\n\r\n    this.setState({show:false,\r\n      singleMessage:this.state.singleMessage\r\n    \r\n    });\r\n\r\n  } \r\n  handleShow = () => this.setState({show:true});\r\n\r\n\r\n  componentDidMount() {\r\n\r\n    console.log(\"componentde\")\r\n    const token = localStorage.usertoken\r\n    const decoded = jwt_decode(token)\r\n\r\n    this.getTicket()\r\n    console.log(decoded.role)\r\n    this.setState({\r\n        role: decoded.role,\r\n      })\r\n\r\n    console.log(this.state.role)\r\n\r\n    \r\n  \r\n \r\n    \r\n  }\r\n\r\n  changeStatus (id,status) {\r\n    return axios\r\n      .put('tickets/changeStatus', {\r\n        id,\r\n        status\r\n        \r\n      })\r\n      .then(response => {\r\n        console.log(\"axios puta girdi\")\r\n        this.getTicket()\r\n        console.log(response.data)\r\n        return response.data\r\n        \r\n      })\r\n      .catch(err => {\r\n        console.log(\"axios puta girmedi\")\r\n        console.log(err)\r\n      })\r\n  } \r\n  statusFilter (status) {\r\n    return axios\r\n      .post('tickets/filterStatus', {\r\n        status\r\n      })\r\n      .then(response => {\r\n        console.log(\"axios girdi\")\r\n        this.setState({\r\n            data:response.data,\r\n            \r\n        })\r\n        console.log(\"data geldi\")\r\n        console.log(response.data)\r\n        return response.data\r\n        \r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n  \r\n  \r\n\r\n\r\n  statusName(status) {\r\n    switch(status) {\r\n      case 0:\r\n        return <h5><Badge pill variant=\"primary\">Opening</Badge></h5>\r\n        case 1:\r\n          return <h5><Badge pill variant=\"danger\">Waiting</Badge></h5>\r\n          case 2:\r\n            return <h5><Badge pill variant=\"success\">Closed</Badge></h5>\r\n      default:\r\n        return <h5><Badge pill variant=\"primary\">Opening</Badge></h5>\r\n    }\r\n  }\r\n \r\n\r\n  render() {\r\n\r\n    return (\r\n      <div className=\"container\">\r\n          {this.state.role === 1 ?\r\n        <div className=\"jumbotron mt-5\">\r\n          <div className=\"col-sm-8 mx-auto\">\r\n            <h1 className=\"text-center\">ADMIN PAGE<br></br>TICKETS</h1>\r\n          </div>\r\n          <Button variant=\"primary\" onClick={()=>this.statusFilter(0)}>Opening</Button>\r\n          <Button variant=\"danger\" onClick={()=>this.statusFilter(1)}>Waiting</Button>\r\n          <Button variant=\"success\" onClick={()=>this.statusFilter(2)}>Closed</Button>\r\n         \r\n          <TableContainer component={Paper}>\r\n      <Table size=\"small\" aria-label=\"a dense table\">\r\n\r\n        <TableHead>\r\n          <TableRow>\r\n            \r\n            <TableCell>TicketName</TableCell>\r\n            <TableCell align=\"right\">Content</TableCell>\r\n            <TableCell align=\"right\">İmage</TableCell>\r\n            <TableCell align=\"right\">Message</TableCell>\r\n            <TableCell align=\"right\">Status</TableCell>\r\n            <TableCell align=\"right\">Change Status</TableCell>\r\n            <TableCell align=\"right\" >Add Message</TableCell>\r\n            \r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody> \r\n              \r\n      {this.state.data.length>0 && this.state.data.map((row,index)=>\r\n         <TableRow key={index}>\r\n              <TableCell component=\"th\" scope=\"row\">\r\n                {row.name}\r\n              </TableCell>\r\n              <TableCell align=\"right\">{row.content}</TableCell>\r\n              <TableCell align=\"right\"><a target=\"_parent\" href={`http://localhost:5000/public/${row.img}`}><img width=\"100px\" src={`http://localhost:5000/public/${row.img}`}></img></a></TableCell>\r\n              <TableCell  align=\"right\">{row.messages.length>0?row.messages[0].text:null}</TableCell>\r\n              <TableCell align=\"right\">{this.statusName(row.status)}</TableCell>\r\n              \r\n              <TableCell align=\"right\"><Dropdown>\r\n<Dropdown.Toggle    size=\"sm\" variant=\"success\" id=\"dropdown-basic\">\r\n    Change Status\r\n  </Dropdown.Toggle>\r\n\r\n  <Dropdown.Menu>\r\n    <Dropdown.Item  onClick={()=>this.changeStatus(row._id,0)}>Opening</Dropdown.Item>\r\n    <Dropdown.Item onClick={()=>this.changeStatus(row._id,1)}>Waiting</Dropdown.Item>\r\n    <Dropdown.Item onClick={()=>this.changeStatus(row._id,2)}>Closed</Dropdown.Item>\r\n  </Dropdown.Menu>\r\n</Dropdown></TableCell>\r\n<TableCell align=\"right\">   <>\r\n      <Button    size=\"sm\" variant=\"primary\" onClick={()=>this.handleShow()}>\r\n        Add Message\r\n      </Button>\r\n\r\n      <Modal show={this.state.show} onHide={()=>this.handleClose()}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Add Message  </Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body><form>\r\n  <label>\r\n    Message : \r\n    <input type=\"text\" name=\"singleMessage\" value={this.state.singleMessage} />\r\n  </label>\r\n</form>\r\n</Modal.Body> \r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={()=>this.handleClose()}>\r\n            Close\r\n          </Button>\r\n          <Button variant=\"primary\"  onClick={()=>this.handleClose(row._id,singleMessage)}>\r\n            Add Message\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\r\n</TableCell>\r\n\r\n            </TableRow>\r\n      )} </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n        </div>:\r\n        <div><h1>User Page</h1></div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ShowTickets"]},"metadata":{},"sourceType":"module"}