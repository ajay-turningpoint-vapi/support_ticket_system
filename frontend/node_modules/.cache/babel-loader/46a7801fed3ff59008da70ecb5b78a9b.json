{"ast":null,"code":"/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.utils.js)\r\n * Version: 20.1.7\r\n * Build date: Tue Aug 25 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _filtering = require(\"../shared/filtering\");\n\nvar _string = require(\"../../core/utils/string\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _position = require(\"../../core/utils/position\");\n\nvar _data = require(\"../../core/utils/data\");\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _load_panel = require(\"../load_panel\");\n\nvar _load_panel2 = _interopRequireDefault(_load_panel);\n\nvar _utils = require(\"../../data/utils\");\n\nvar _format_helper = require(\"../../format_helper\");\n\nvar _format_helper2 = _interopRequireDefault(_format_helper);\n\nvar _object = require(\"../../core/utils/object\");\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar DATAGRID_SELECTION_DISABLED_CLASS = \"dx-selection-disabled\";\nvar DATAGRID_GROUP_OPENED_CLASS = \"dx-datagrid-group-opened\";\nvar DATAGRID_GROUP_CLOSED_CLASS = \"dx-datagrid-group-closed\";\nvar DATAGRID_EXPAND_CLASS = \"dx-datagrid-expand\";\nvar NO_DATA_CLASS = \"nodata\";\nvar DATE_INTERVAL_SELECTORS = {\n  year: function (value) {\n    return value && value.getFullYear();\n  },\n  month: function (value) {\n    return value && value.getMonth() + 1;\n  },\n  day: function (value) {\n    return value && value.getDate();\n  },\n  quarter: function (value) {\n    return value && Math.floor(value.getMonth() / 3) + 1;\n  },\n  hour: function (value) {\n    return value && value.getHours();\n  },\n  minute: function (value) {\n    return value && value.getMinutes();\n  },\n  second: function (value) {\n    return value && value.getSeconds();\n  }\n};\n\nmodule.exports = function () {\n  var getIntervalSelector = function () {\n    var data = arguments[1];\n    var value = this.calculateCellValue(data);\n\n    if (!(0, _type.isDefined)(value)) {\n      return null;\n    } else {\n      if (isDateType(this.dataType)) {\n        var nameIntervalSelector = arguments[0];\n        return DATE_INTERVAL_SELECTORS[nameIntervalSelector](value);\n      } else {\n        if (\"number\" === this.dataType) {\n          var groupInterval = arguments[0];\n          return Math.floor(Number(value) / groupInterval) * groupInterval;\n        }\n      }\n    }\n  };\n\n  var equalSelectors = function (selector1, selector2) {\n    if ((0, _type.isFunction)(selector1) && (0, _type.isFunction)(selector2)) {\n      if (selector1.originalCallback && selector2.originalCallback) {\n        return selector1.originalCallback === selector2.originalCallback && selector1.columnIndex === selector2.columnIndex;\n      }\n    }\n\n    return selector1 === selector2;\n  };\n\n  function isDateType(dataType) {\n    return \"date\" === dataType || \"datetime\" === dataType;\n  }\n\n  var setEmptyText = function ($container) {\n    $container.get(0).textContent = \"\\xa0\";\n  };\n\n  var getWidgetInstance = function ($element) {\n    var editorData = $element.data && $element.data();\n    var dxComponents = editorData && editorData.dxComponents;\n    var widgetName = dxComponents && dxComponents[0];\n    return widgetName && editorData[widgetName];\n  };\n\n  return {\n    renderNoDataText: function ($element) {\n      var that = this;\n      $element = $element || this.element();\n\n      if (!$element) {\n        return;\n      }\n\n      var noDataClass = that.addWidgetPrefix(NO_DATA_CLASS);\n      var noDataElement = $element.find(\".\" + noDataClass).last();\n\n      var isVisible = this._dataController.isEmpty();\n\n      var isLoading = this._dataController.isLoading();\n\n      if (!noDataElement.length) {\n        noDataElement = (0, _renderer2.default)(\"<span>\").addClass(noDataClass).appendTo($element);\n      }\n\n      if (isVisible && !isLoading) {\n        noDataElement.removeClass(\"dx-hidden\").text(that._getNoDataText());\n      } else {\n        noDataElement.addClass(\"dx-hidden\");\n      }\n    },\n    renderLoadPanel: function ($element, $container, isLocalStore) {\n      var that = this;\n      var loadPanelOptions;\n      that._loadPanel && that._loadPanel.$element().remove();\n      loadPanelOptions = that.option(\"loadPanel\");\n\n      if (loadPanelOptions && (\"auto\" === loadPanelOptions.enabled ? !isLocalStore : loadPanelOptions.enabled)) {\n        loadPanelOptions = (0, _extend.extend)({\n          shading: false,\n          message: loadPanelOptions.text,\n          position: function () {\n            var $window = (0, _renderer2.default)((0, _window.getWindow)());\n\n            if ($element.height() > $window.height()) {\n              return {\n                of: $window,\n                boundary: $element,\n                collision: \"fit\"\n              };\n            }\n\n            return {\n              of: $element\n            };\n          },\n          container: $container\n        }, loadPanelOptions);\n        that._loadPanel = that._createComponent((0, _renderer2.default)(\"<div>\").appendTo($container), _load_panel2.default, loadPanelOptions);\n      } else {\n        that._loadPanel = null;\n      }\n    },\n    getIndexByKey: function (key, items, keyName) {\n      var index = -1;\n\n      if (void 0 !== key && Array.isArray(items)) {\n        keyName = arguments.length <= 2 ? \"key\" : keyName;\n\n        for (var i = 0; i < items.length; i++) {\n          var item = (0, _type.isDefined)(keyName) ? items[i][keyName] : items[i];\n\n          if ((0, _common.equalByValue)(key, item)) {\n            index = i;\n            break;\n          }\n        }\n      }\n\n      return index;\n    },\n    combineFilters: function (filters, operation) {\n      var resultFilter = [];\n      operation = operation || \"and\";\n\n      for (var i = 0; i < filters.length; i++) {\n        if (!filters[i]) {\n          continue;\n        }\n\n        if (resultFilter.length) {\n          resultFilter.push(operation);\n        }\n\n        resultFilter.push(filters[i]);\n      }\n\n      if (1 === resultFilter.length) {\n        resultFilter = resultFilter[0];\n      }\n\n      if (resultFilter.length) {\n        return resultFilter;\n      }\n    },\n    checkChanges: function (changes, changeNames) {\n      var changesWithChangeNamesCount = 0;\n\n      for (var i = 0; i < changeNames.length; i++) {\n        if (changes[changeNames[i]]) {\n          changesWithChangeNamesCount++;\n        }\n      }\n\n      return changes.length && changes.length === changesWithChangeNamesCount;\n    },\n    equalFilterParameters: function (filter1, filter2) {\n      if (Array.isArray(filter1) && Array.isArray(filter2)) {\n        if (filter1.length !== filter2.length) {\n          return false;\n        } else {\n          for (var i = 0; i < filter1.length; i++) {\n            if (!module.exports.equalFilterParameters(filter1[i], filter2[i])) {\n              return false;\n            }\n          }\n        }\n\n        return true;\n      } else {\n        if ((0, _type.isFunction)(filter1) && filter1.columnIndex >= 0 && (0, _type.isFunction)(filter2) && filter2.columnIndex >= 0) {\n          return filter1.columnIndex === filter2.columnIndex && (0, _data.toComparable)(filter1.filterValue) === (0, _data.toComparable)(filter2.filterValue);\n        } else {\n          return (0, _data.toComparable)(filter1) == (0, _data.toComparable)(filter2);\n        }\n      }\n    },\n    proxyMethod: function (instance, methodName, defaultResult) {\n      if (!instance[methodName]) {\n        instance[methodName] = function () {\n          var dataSource = this._dataSource;\n          return dataSource ? dataSource[methodName].apply(dataSource, arguments) : defaultResult;\n        };\n      }\n    },\n    formatValue: function (value, options) {\n      var valueText = _format_helper2.default.format(value, options.format) || value && value.toString() || \"\";\n      var formatObject = {\n        value: value,\n        valueText: options.getDisplayFormat ? options.getDisplayFormat(valueText) : valueText,\n        target: options.target || \"row\",\n        groupInterval: options.groupInterval\n      };\n      return options.customizeText ? options.customizeText.call(options, formatObject) : formatObject.valueText;\n    },\n    getFormatOptionsByColumn: function (column, target) {\n      return {\n        format: column.format,\n        getDisplayFormat: column.getDisplayFormat,\n        customizeText: column.customizeText,\n        target: target,\n        trueText: column.trueText,\n        falseText: column.falseText\n      };\n    },\n    getDisplayValue: function (column, value, data, rowType) {\n      if (column.displayValueMap && void 0 !== column.displayValueMap[value]) {\n        return column.displayValueMap[value];\n      } else {\n        if (column.calculateDisplayValue && data && \"group\" !== rowType) {\n          return column.calculateDisplayValue(data);\n        } else {\n          if (column.lookup && !(\"group\" === rowType && (column.calculateGroupValue || column.calculateDisplayValue))) {\n            return column.lookup.calculateCellValue(value);\n          }\n        }\n      }\n\n      return value;\n    },\n    getGroupRowSummaryText: function (summaryItems, summaryTexts) {\n      var result = \"(\";\n\n      for (var i = 0; i < summaryItems.length; i++) {\n        var summaryItem = summaryItems[i];\n        result += (i > 0 ? \", \" : \"\") + module.exports.getSummaryText(summaryItem, summaryTexts);\n      }\n\n      return result += \")\";\n    },\n    getSummaryText: function (summaryItem, summaryTexts) {\n      var displayFormat = summaryItem.displayFormat || summaryItem.columnCaption && summaryTexts[summaryItem.summaryType + \"OtherColumn\"] || summaryTexts[summaryItem.summaryType];\n      return this.formatValue(summaryItem.value, {\n        format: summaryItem.valueFormat,\n        getDisplayFormat: function (valueText) {\n          return displayFormat ? (0, _string.format)(displayFormat, valueText, summaryItem.columnCaption) : valueText;\n        },\n        customizeText: summaryItem.customizeText\n      });\n    },\n    normalizeSortingInfo: function (sort) {\n      sort = sort || [];\n      var result = (0, _utils.normalizeSortingInfo)(sort);\n\n      for (var i = 0; i < sort.length; i++) {\n        if (sort && sort[i] && void 0 !== sort[i].isExpanded) {\n          result[i].isExpanded = sort[i].isExpanded;\n        }\n\n        if (sort && sort[i] && void 0 !== sort[i].groupInterval) {\n          result[i].groupInterval = sort[i].groupInterval;\n        }\n      }\n\n      return result;\n    },\n    getFormatByDataType: function (dataType) {\n      switch (dataType) {\n        case \"date\":\n          return \"shortDate\";\n\n        case \"datetime\":\n          return \"shortDateShortTime\";\n      }\n    },\n    getHeaderFilterGroupParameters: function (column, remoteGrouping) {\n      var result = [];\n      var dataField = column.dataField || column.name;\n      var groupInterval = (0, _filtering.getGroupInterval)(column);\n\n      if (groupInterval) {\n        (0, _iterator.each)(groupInterval, function (index, interval) {\n          result.push(remoteGrouping ? {\n            selector: dataField,\n            groupInterval: interval,\n            isExpanded: index < groupInterval.length - 1\n          } : getIntervalSelector.bind(column, interval));\n        });\n        return result;\n      }\n\n      if (remoteGrouping) {\n        result = [{\n          selector: dataField,\n          isExpanded: false\n        }];\n      } else {\n        result = function result(data) {\n          var result = column.calculateCellValue(data);\n\n          if (void 0 === result || \"\" === result) {\n            result = null;\n          }\n\n          return result;\n        };\n\n        if (column.sortingMethod) {\n          result = [{\n            selector: result,\n            compare: column.sortingMethod.bind(column)\n          }];\n        }\n      }\n\n      return result;\n    },\n    equalSortParameters: function (sortParameters1, sortParameters2, ignoreIsExpanded) {\n      sortParameters1 = module.exports.normalizeSortingInfo(sortParameters1);\n      sortParameters2 = module.exports.normalizeSortingInfo(sortParameters2);\n\n      if (Array.isArray(sortParameters1) && Array.isArray(sortParameters2)) {\n        if (sortParameters1.length !== sortParameters2.length) {\n          return false;\n        } else {\n          for (var i = 0; i < sortParameters1.length; i++) {\n            if (!equalSelectors(sortParameters1[i].selector, sortParameters2[i].selector) || sortParameters1[i].desc !== sortParameters2[i].desc || sortParameters1[i].groupInterval !== sortParameters2[i].groupInterval || !ignoreIsExpanded && Boolean(sortParameters1[i].isExpanded) !== Boolean(sortParameters2[i].isExpanded)) {\n              return false;\n            }\n          }\n        }\n\n        return true;\n      } else {\n        return (!sortParameters1 || !sortParameters1.length) === (!sortParameters2 || !sortParameters2.length);\n      }\n    },\n    getPointsByColumns: function (items, pointCreated, isVertical, startColumnIndex) {\n      var cellsLength = items.length;\n      var notCreatePoint = false;\n      var item;\n      var offset;\n      var columnIndex = startColumnIndex || 0;\n      var result = [];\n      var rtlEnabled;\n\n      for (var i = 0; i <= cellsLength; i++) {\n        if (i < cellsLength) {\n          item = items.eq(i);\n          offset = item.offset();\n          rtlEnabled = \"rtl\" === item.css(\"direction\");\n        }\n\n        var point = {\n          index: columnIndex,\n          x: offset ? offset.left + (!isVertical && rtlEnabled ^ i === cellsLength ? (0, _position.getBoundingRect)(item[0]).width : 0) : 0,\n          y: offset ? offset.top + (isVertical && i === cellsLength ? (0, _position.getBoundingRect)(item[0]).height : 0) : 0,\n          columnIndex: columnIndex\n        };\n\n        if (!isVertical && i > 0) {\n          var prevItemOffset = items.eq(i - 1).offset();\n\n          if (prevItemOffset.top < point.y) {\n            point.y = prevItemOffset.top;\n          }\n        }\n\n        if (pointCreated) {\n          notCreatePoint = pointCreated(point);\n        }\n\n        if (!notCreatePoint) {\n          result.push(point);\n        }\n\n        columnIndex++;\n      }\n\n      return result;\n    },\n    createObjectWithChanges: function (target, changes) {\n      var result = target ? Object.create(Object.getPrototypeOf(target)) : {};\n      var targetWithoutPrototype = (0, _extend.extendFromObject)({}, target);\n      (0, _object.deepExtendArraySafe)(result, targetWithoutPrototype, true, true);\n      return (0, _object.deepExtendArraySafe)(result, changes, true, true);\n    },\n    getExpandCellTemplate: function () {\n      return {\n        allowRenderToDetachedContainer: true,\n        render: function (container, options) {\n          var $container = (0, _renderer2.default)(container);\n\n          if ((0, _type.isDefined)(options.value) && !(options.data && options.data.isContinuation) && !options.row.isNewRow) {\n            var rowsView = options.component.getView(\"rowsView\");\n            $container.addClass(DATAGRID_EXPAND_CLASS).addClass(DATAGRID_SELECTION_DISABLED_CLASS);\n            (0, _renderer2.default)(\"<div>\").addClass(options.value ? DATAGRID_GROUP_OPENED_CLASS : DATAGRID_GROUP_CLOSED_CLASS).appendTo($container);\n            rowsView.setAria(\"label\", options.value ? rowsView.localize(\"dxDataGrid-ariaCollapse\") : rowsView.localize(\"dxDataGrid-ariaExpand\"), $container);\n          } else {\n            setEmptyText($container);\n          }\n        }\n      };\n    },\n    setEmptyText: setEmptyText,\n    isDateType: isDateType,\n    getSelectionRange: function (focusedElement) {\n      try {\n        if (focusedElement) {\n          return {\n            selectionStart: focusedElement.selectionStart,\n            selectionEnd: focusedElement.selectionEnd\n          };\n        }\n      } catch (e) {}\n\n      return {};\n    },\n    setSelectionRange: function (focusedElement, selectionRange) {\n      try {\n        if (focusedElement && focusedElement.setSelectionRange) {\n          focusedElement.setSelectionRange(selectionRange.selectionStart, selectionRange.selectionEnd);\n        }\n      } catch (e) {}\n    },\n    focusAndSelectElement: function (component, $element) {\n      _events_engine2.default.trigger($element, \"focus\");\n\n      var isSelectTextOnEditingStart = component.option(\"editing.selectTextOnEditStart\");\n      var keyboardController = component.getController(\"keyboardNavigation\");\n\n      var isEditingNavigationMode = keyboardController && keyboardController._isFastEditingStarted();\n\n      var element = $element.get(0);\n\n      if (isSelectTextOnEditingStart && !isEditingNavigationMode && $element.is(\".dx-texteditor-input\") && !$element.is(\"[readonly]\")) {\n        var editor = getWidgetInstance($element.closest(\".dx-texteditor\"));\n        (0, _deferred.when)(editor && editor._loadItemDeferred).done(function () {\n          element.select();\n        });\n      }\n    },\n    getWidgetInstance: getWidgetInstance,\n    getLastResizableColumnIndex: function (columns, resultWidths) {\n      var hasResizableColumns = columns.some(function (column) {\n        return column && !column.command && !column.fixed && false !== column.allowResizing;\n      });\n      var lastColumnIndex;\n\n      for (lastColumnIndex = columns.length - 1; columns[lastColumnIndex]; lastColumnIndex--) {\n        var column = columns[lastColumnIndex];\n        var width = resultWidths && resultWidths[lastColumnIndex];\n        var allowResizing = !hasResizableColumns || false !== column.allowResizing;\n\n        if (!column.command && !column.fixed && \"adaptiveHidden\" !== width && allowResizing) {\n          break;\n        }\n      }\n\n      return lastColumnIndex;\n    },\n    isElementInCurrentGrid: function (controller, $element) {\n      if ($element && $element.length) {\n        var $grid = $element.closest(\".\" + controller.getWidgetContainerClass()).parent();\n        return $grid.is(controller.component.$element());\n      }\n\n      return false;\n    }\n  };\n}();","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/ticketSystem/frontend/node_modules/devextreme/ui/grid_core/ui.grid_core.utils.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_type","_deferred","_filtering","_string","_iterator","_extend","_position","_data","_common","_load_panel","_load_panel2","_utils","_format_helper","_format_helper2","_object","_window","_events_engine","_events_engine2","obj","__esModule","DATAGRID_SELECTION_DISABLED_CLASS","DATAGRID_GROUP_OPENED_CLASS","DATAGRID_GROUP_CLOSED_CLASS","DATAGRID_EXPAND_CLASS","NO_DATA_CLASS","DATE_INTERVAL_SELECTORS","year","value","getFullYear","month","getMonth","day","getDate","quarter","Math","floor","hour","getHours","minute","getMinutes","second","getSeconds","module","exports","getIntervalSelector","data","arguments","calculateCellValue","isDefined","isDateType","dataType","nameIntervalSelector","groupInterval","Number","equalSelectors","selector1","selector2","isFunction","originalCallback","columnIndex","setEmptyText","$container","get","textContent","getWidgetInstance","$element","editorData","dxComponents","widgetName","renderNoDataText","that","element","noDataClass","addWidgetPrefix","noDataElement","find","last","isVisible","_dataController","isEmpty","isLoading","length","default","addClass","appendTo","removeClass","text","_getNoDataText","renderLoadPanel","isLocalStore","loadPanelOptions","_loadPanel","remove","option","enabled","extend","shading","message","position","$window","getWindow","height","of","boundary","collision","container","_createComponent","getIndexByKey","key","items","keyName","index","Array","isArray","i","item","equalByValue","combineFilters","filters","operation","resultFilter","push","checkChanges","changes","changeNames","changesWithChangeNamesCount","equalFilterParameters","filter1","filter2","toComparable","filterValue","proxyMethod","instance","methodName","defaultResult","dataSource","_dataSource","apply","formatValue","options","valueText","format","toString","formatObject","getDisplayFormat","target","customizeText","call","getFormatOptionsByColumn","column","trueText","falseText","getDisplayValue","rowType","displayValueMap","calculateDisplayValue","lookup","calculateGroupValue","getGroupRowSummaryText","summaryItems","summaryTexts","result","summaryItem","getSummaryText","displayFormat","columnCaption","summaryType","valueFormat","normalizeSortingInfo","sort","isExpanded","getFormatByDataType","getHeaderFilterGroupParameters","remoteGrouping","dataField","name","getGroupInterval","each","interval","selector","bind","sortingMethod","compare","equalSortParameters","sortParameters1","sortParameters2","ignoreIsExpanded","desc","Boolean","getPointsByColumns","pointCreated","isVertical","startColumnIndex","cellsLength","notCreatePoint","offset","rtlEnabled","eq","css","point","x","left","getBoundingRect","width","y","top","prevItemOffset","createObjectWithChanges","Object","create","getPrototypeOf","targetWithoutPrototype","extendFromObject","deepExtendArraySafe","getExpandCellTemplate","allowRenderToDetachedContainer","render","isContinuation","row","isNewRow","rowsView","component","getView","setAria","localize","getSelectionRange","focusedElement","selectionStart","selectionEnd","e","setSelectionRange","selectionRange","focusAndSelectElement","trigger","isSelectTextOnEditingStart","keyboardController","getController","isEditingNavigationMode","_isFastEditingStarted","is","editor","closest","when","_loadItemDeferred","done","select","getLastResizableColumnIndex","columns","resultWidths","hasResizableColumns","some","command","fixed","allowResizing","lastColumnIndex","isElementInCurrentGrid","controller","$grid","getWidgetContainerClass","parent"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.utils.js)\r\n * Version: 20.1.7\r\n * Build date: Tue Aug 25 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _filtering = require(\"../shared/filtering\");\r\nvar _string = require(\"../../core/utils/string\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _position = require(\"../../core/utils/position\");\r\nvar _data = require(\"../../core/utils/data\");\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _load_panel = require(\"../load_panel\");\r\nvar _load_panel2 = _interopRequireDefault(_load_panel);\r\nvar _utils = require(\"../../data/utils\");\r\nvar _format_helper = require(\"../../format_helper\");\r\nvar _format_helper2 = _interopRequireDefault(_format_helper);\r\nvar _object = require(\"../../core/utils/object\");\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar DATAGRID_SELECTION_DISABLED_CLASS = \"dx-selection-disabled\";\r\nvar DATAGRID_GROUP_OPENED_CLASS = \"dx-datagrid-group-opened\";\r\nvar DATAGRID_GROUP_CLOSED_CLASS = \"dx-datagrid-group-closed\";\r\nvar DATAGRID_EXPAND_CLASS = \"dx-datagrid-expand\";\r\nvar NO_DATA_CLASS = \"nodata\";\r\nvar DATE_INTERVAL_SELECTORS = {\r\n    year: function(value) {\r\n        return value && value.getFullYear()\r\n    },\r\n    month: function(value) {\r\n        return value && value.getMonth() + 1\r\n    },\r\n    day: function(value) {\r\n        return value && value.getDate()\r\n    },\r\n    quarter: function(value) {\r\n        return value && Math.floor(value.getMonth() / 3) + 1\r\n    },\r\n    hour: function(value) {\r\n        return value && value.getHours()\r\n    },\r\n    minute: function(value) {\r\n        return value && value.getMinutes()\r\n    },\r\n    second: function(value) {\r\n        return value && value.getSeconds()\r\n    }\r\n};\r\nmodule.exports = function() {\r\n    var getIntervalSelector = function() {\r\n        var data = arguments[1];\r\n        var value = this.calculateCellValue(data);\r\n        if (!(0, _type.isDefined)(value)) {\r\n            return null\r\n        } else {\r\n            if (isDateType(this.dataType)) {\r\n                var nameIntervalSelector = arguments[0];\r\n                return DATE_INTERVAL_SELECTORS[nameIntervalSelector](value)\r\n            } else {\r\n                if (\"number\" === this.dataType) {\r\n                    var groupInterval = arguments[0];\r\n                    return Math.floor(Number(value) / groupInterval) * groupInterval\r\n                }\r\n            }\r\n        }\r\n    };\r\n    var equalSelectors = function(selector1, selector2) {\r\n        if ((0, _type.isFunction)(selector1) && (0, _type.isFunction)(selector2)) {\r\n            if (selector1.originalCallback && selector2.originalCallback) {\r\n                return selector1.originalCallback === selector2.originalCallback && selector1.columnIndex === selector2.columnIndex\r\n            }\r\n        }\r\n        return selector1 === selector2\r\n    };\r\n\r\n    function isDateType(dataType) {\r\n        return \"date\" === dataType || \"datetime\" === dataType\r\n    }\r\n    var setEmptyText = function($container) {\r\n        $container.get(0).textContent = \"\\xa0\"\r\n    };\r\n    var getWidgetInstance = function($element) {\r\n        var editorData = $element.data && $element.data();\r\n        var dxComponents = editorData && editorData.dxComponents;\r\n        var widgetName = dxComponents && dxComponents[0];\r\n        return widgetName && editorData[widgetName]\r\n    };\r\n    return {\r\n        renderNoDataText: function($element) {\r\n            var that = this;\r\n            $element = $element || this.element();\r\n            if (!$element) {\r\n                return\r\n            }\r\n            var noDataClass = that.addWidgetPrefix(NO_DATA_CLASS);\r\n            var noDataElement = $element.find(\".\" + noDataClass).last();\r\n            var isVisible = this._dataController.isEmpty();\r\n            var isLoading = this._dataController.isLoading();\r\n            if (!noDataElement.length) {\r\n                noDataElement = (0, _renderer2.default)(\"<span>\").addClass(noDataClass).appendTo($element)\r\n            }\r\n            if (isVisible && !isLoading) {\r\n                noDataElement.removeClass(\"dx-hidden\").text(that._getNoDataText())\r\n            } else {\r\n                noDataElement.addClass(\"dx-hidden\")\r\n            }\r\n        },\r\n        renderLoadPanel: function($element, $container, isLocalStore) {\r\n            var that = this;\r\n            var loadPanelOptions;\r\n            that._loadPanel && that._loadPanel.$element().remove();\r\n            loadPanelOptions = that.option(\"loadPanel\");\r\n            if (loadPanelOptions && (\"auto\" === loadPanelOptions.enabled ? !isLocalStore : loadPanelOptions.enabled)) {\r\n                loadPanelOptions = (0, _extend.extend)({\r\n                    shading: false,\r\n                    message: loadPanelOptions.text,\r\n                    position: function() {\r\n                        var $window = (0, _renderer2.default)((0, _window.getWindow)());\r\n                        if ($element.height() > $window.height()) {\r\n                            return {\r\n                                of: $window,\r\n                                boundary: $element,\r\n                                collision: \"fit\"\r\n                            }\r\n                        }\r\n                        return {\r\n                            of: $element\r\n                        }\r\n                    },\r\n                    container: $container\r\n                }, loadPanelOptions);\r\n                that._loadPanel = that._createComponent((0, _renderer2.default)(\"<div>\").appendTo($container), _load_panel2.default, loadPanelOptions)\r\n            } else {\r\n                that._loadPanel = null\r\n            }\r\n        },\r\n        getIndexByKey: function(key, items, keyName) {\r\n            var index = -1;\r\n            if (void 0 !== key && Array.isArray(items)) {\r\n                keyName = arguments.length <= 2 ? \"key\" : keyName;\r\n                for (var i = 0; i < items.length; i++) {\r\n                    var item = (0, _type.isDefined)(keyName) ? items[i][keyName] : items[i];\r\n                    if ((0, _common.equalByValue)(key, item)) {\r\n                        index = i;\r\n                        break\r\n                    }\r\n                }\r\n            }\r\n            return index\r\n        },\r\n        combineFilters: function(filters, operation) {\r\n            var resultFilter = [];\r\n            operation = operation || \"and\";\r\n            for (var i = 0; i < filters.length; i++) {\r\n                if (!filters[i]) {\r\n                    continue\r\n                }\r\n                if (resultFilter.length) {\r\n                    resultFilter.push(operation)\r\n                }\r\n                resultFilter.push(filters[i])\r\n            }\r\n            if (1 === resultFilter.length) {\r\n                resultFilter = resultFilter[0]\r\n            }\r\n            if (resultFilter.length) {\r\n                return resultFilter\r\n            }\r\n        },\r\n        checkChanges: function(changes, changeNames) {\r\n            var changesWithChangeNamesCount = 0;\r\n            for (var i = 0; i < changeNames.length; i++) {\r\n                if (changes[changeNames[i]]) {\r\n                    changesWithChangeNamesCount++\r\n                }\r\n            }\r\n            return changes.length && changes.length === changesWithChangeNamesCount\r\n        },\r\n        equalFilterParameters: function(filter1, filter2) {\r\n            if (Array.isArray(filter1) && Array.isArray(filter2)) {\r\n                if (filter1.length !== filter2.length) {\r\n                    return false\r\n                } else {\r\n                    for (var i = 0; i < filter1.length; i++) {\r\n                        if (!module.exports.equalFilterParameters(filter1[i], filter2[i])) {\r\n                            return false\r\n                        }\r\n                    }\r\n                }\r\n                return true\r\n            } else {\r\n                if ((0, _type.isFunction)(filter1) && filter1.columnIndex >= 0 && (0, _type.isFunction)(filter2) && filter2.columnIndex >= 0) {\r\n                    return filter1.columnIndex === filter2.columnIndex && (0, _data.toComparable)(filter1.filterValue) === (0, _data.toComparable)(filter2.filterValue)\r\n                } else {\r\n                    return (0, _data.toComparable)(filter1) == (0, _data.toComparable)(filter2)\r\n                }\r\n            }\r\n        },\r\n        proxyMethod: function(instance, methodName, defaultResult) {\r\n            if (!instance[methodName]) {\r\n                instance[methodName] = function() {\r\n                    var dataSource = this._dataSource;\r\n                    return dataSource ? dataSource[methodName].apply(dataSource, arguments) : defaultResult\r\n                }\r\n            }\r\n        },\r\n        formatValue: function(value, options) {\r\n            var valueText = _format_helper2.default.format(value, options.format) || value && value.toString() || \"\";\r\n            var formatObject = {\r\n                value: value,\r\n                valueText: options.getDisplayFormat ? options.getDisplayFormat(valueText) : valueText,\r\n                target: options.target || \"row\",\r\n                groupInterval: options.groupInterval\r\n            };\r\n            return options.customizeText ? options.customizeText.call(options, formatObject) : formatObject.valueText\r\n        },\r\n        getFormatOptionsByColumn: function(column, target) {\r\n            return {\r\n                format: column.format,\r\n                getDisplayFormat: column.getDisplayFormat,\r\n                customizeText: column.customizeText,\r\n                target: target,\r\n                trueText: column.trueText,\r\n                falseText: column.falseText\r\n            }\r\n        },\r\n        getDisplayValue: function(column, value, data, rowType) {\r\n            if (column.displayValueMap && void 0 !== column.displayValueMap[value]) {\r\n                return column.displayValueMap[value]\r\n            } else {\r\n                if (column.calculateDisplayValue && data && \"group\" !== rowType) {\r\n                    return column.calculateDisplayValue(data)\r\n                } else {\r\n                    if (column.lookup && !(\"group\" === rowType && (column.calculateGroupValue || column.calculateDisplayValue))) {\r\n                        return column.lookup.calculateCellValue(value)\r\n                    }\r\n                }\r\n            }\r\n            return value\r\n        },\r\n        getGroupRowSummaryText: function(summaryItems, summaryTexts) {\r\n            var result = \"(\";\r\n            for (var i = 0; i < summaryItems.length; i++) {\r\n                var summaryItem = summaryItems[i];\r\n                result += (i > 0 ? \", \" : \"\") + module.exports.getSummaryText(summaryItem, summaryTexts)\r\n            }\r\n            return result += \")\"\r\n        },\r\n        getSummaryText: function(summaryItem, summaryTexts) {\r\n            var displayFormat = summaryItem.displayFormat || summaryItem.columnCaption && summaryTexts[summaryItem.summaryType + \"OtherColumn\"] || summaryTexts[summaryItem.summaryType];\r\n            return this.formatValue(summaryItem.value, {\r\n                format: summaryItem.valueFormat,\r\n                getDisplayFormat: function(valueText) {\r\n                    return displayFormat ? (0, _string.format)(displayFormat, valueText, summaryItem.columnCaption) : valueText\r\n                },\r\n                customizeText: summaryItem.customizeText\r\n            })\r\n        },\r\n        normalizeSortingInfo: function(sort) {\r\n            sort = sort || [];\r\n            var result = (0, _utils.normalizeSortingInfo)(sort);\r\n            for (var i = 0; i < sort.length; i++) {\r\n                if (sort && sort[i] && void 0 !== sort[i].isExpanded) {\r\n                    result[i].isExpanded = sort[i].isExpanded\r\n                }\r\n                if (sort && sort[i] && void 0 !== sort[i].groupInterval) {\r\n                    result[i].groupInterval = sort[i].groupInterval\r\n                }\r\n            }\r\n            return result\r\n        },\r\n        getFormatByDataType: function(dataType) {\r\n            switch (dataType) {\r\n                case \"date\":\r\n                    return \"shortDate\";\r\n                case \"datetime\":\r\n                    return \"shortDateShortTime\"\r\n            }\r\n        },\r\n        getHeaderFilterGroupParameters: function(column, remoteGrouping) {\r\n            var result = [];\r\n            var dataField = column.dataField || column.name;\r\n            var groupInterval = (0, _filtering.getGroupInterval)(column);\r\n            if (groupInterval) {\r\n                (0, _iterator.each)(groupInterval, function(index, interval) {\r\n                    result.push(remoteGrouping ? {\r\n                        selector: dataField,\r\n                        groupInterval: interval,\r\n                        isExpanded: index < groupInterval.length - 1\r\n                    } : getIntervalSelector.bind(column, interval))\r\n                });\r\n                return result\r\n            }\r\n            if (remoteGrouping) {\r\n                result = [{\r\n                    selector: dataField,\r\n                    isExpanded: false\r\n                }]\r\n            } else {\r\n                result = function result(data) {\r\n                    var result = column.calculateCellValue(data);\r\n                    if (void 0 === result || \"\" === result) {\r\n                        result = null\r\n                    }\r\n                    return result\r\n                };\r\n                if (column.sortingMethod) {\r\n                    result = [{\r\n                        selector: result,\r\n                        compare: column.sortingMethod.bind(column)\r\n                    }]\r\n                }\r\n            }\r\n            return result\r\n        },\r\n        equalSortParameters: function(sortParameters1, sortParameters2, ignoreIsExpanded) {\r\n            sortParameters1 = module.exports.normalizeSortingInfo(sortParameters1);\r\n            sortParameters2 = module.exports.normalizeSortingInfo(sortParameters2);\r\n            if (Array.isArray(sortParameters1) && Array.isArray(sortParameters2)) {\r\n                if (sortParameters1.length !== sortParameters2.length) {\r\n                    return false\r\n                } else {\r\n                    for (var i = 0; i < sortParameters1.length; i++) {\r\n                        if (!equalSelectors(sortParameters1[i].selector, sortParameters2[i].selector) || sortParameters1[i].desc !== sortParameters2[i].desc || sortParameters1[i].groupInterval !== sortParameters2[i].groupInterval || !ignoreIsExpanded && Boolean(sortParameters1[i].isExpanded) !== Boolean(sortParameters2[i].isExpanded)) {\r\n                            return false\r\n                        }\r\n                    }\r\n                }\r\n                return true\r\n            } else {\r\n                return (!sortParameters1 || !sortParameters1.length) === (!sortParameters2 || !sortParameters2.length)\r\n            }\r\n        },\r\n        getPointsByColumns: function(items, pointCreated, isVertical, startColumnIndex) {\r\n            var cellsLength = items.length;\r\n            var notCreatePoint = false;\r\n            var item;\r\n            var offset;\r\n            var columnIndex = startColumnIndex || 0;\r\n            var result = [];\r\n            var rtlEnabled;\r\n            for (var i = 0; i <= cellsLength; i++) {\r\n                if (i < cellsLength) {\r\n                    item = items.eq(i);\r\n                    offset = item.offset();\r\n                    rtlEnabled = \"rtl\" === item.css(\"direction\")\r\n                }\r\n                var point = {\r\n                    index: columnIndex,\r\n                    x: offset ? offset.left + (!isVertical && rtlEnabled ^ i === cellsLength ? (0, _position.getBoundingRect)(item[0]).width : 0) : 0,\r\n                    y: offset ? offset.top + (isVertical && i === cellsLength ? (0, _position.getBoundingRect)(item[0]).height : 0) : 0,\r\n                    columnIndex: columnIndex\r\n                };\r\n                if (!isVertical && i > 0) {\r\n                    var prevItemOffset = items.eq(i - 1).offset();\r\n                    if (prevItemOffset.top < point.y) {\r\n                        point.y = prevItemOffset.top\r\n                    }\r\n                }\r\n                if (pointCreated) {\r\n                    notCreatePoint = pointCreated(point)\r\n                }\r\n                if (!notCreatePoint) {\r\n                    result.push(point)\r\n                }\r\n                columnIndex++\r\n            }\r\n            return result\r\n        },\r\n        createObjectWithChanges: function(target, changes) {\r\n            var result = target ? Object.create(Object.getPrototypeOf(target)) : {};\r\n            var targetWithoutPrototype = (0, _extend.extendFromObject)({}, target);\r\n            (0, _object.deepExtendArraySafe)(result, targetWithoutPrototype, true, true);\r\n            return (0, _object.deepExtendArraySafe)(result, changes, true, true)\r\n        },\r\n        getExpandCellTemplate: function() {\r\n            return {\r\n                allowRenderToDetachedContainer: true,\r\n                render: function(container, options) {\r\n                    var $container = (0, _renderer2.default)(container);\r\n                    if ((0, _type.isDefined)(options.value) && !(options.data && options.data.isContinuation) && !options.row.isNewRow) {\r\n                        var rowsView = options.component.getView(\"rowsView\");\r\n                        $container.addClass(DATAGRID_EXPAND_CLASS).addClass(DATAGRID_SELECTION_DISABLED_CLASS);\r\n                        (0, _renderer2.default)(\"<div>\").addClass(options.value ? DATAGRID_GROUP_OPENED_CLASS : DATAGRID_GROUP_CLOSED_CLASS).appendTo($container);\r\n                        rowsView.setAria(\"label\", options.value ? rowsView.localize(\"dxDataGrid-ariaCollapse\") : rowsView.localize(\"dxDataGrid-ariaExpand\"), $container)\r\n                    } else {\r\n                        setEmptyText($container)\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        setEmptyText: setEmptyText,\r\n        isDateType: isDateType,\r\n        getSelectionRange: function(focusedElement) {\r\n            try {\r\n                if (focusedElement) {\r\n                    return {\r\n                        selectionStart: focusedElement.selectionStart,\r\n                        selectionEnd: focusedElement.selectionEnd\r\n                    }\r\n                }\r\n            } catch (e) {}\r\n            return {}\r\n        },\r\n        setSelectionRange: function(focusedElement, selectionRange) {\r\n            try {\r\n                if (focusedElement && focusedElement.setSelectionRange) {\r\n                    focusedElement.setSelectionRange(selectionRange.selectionStart, selectionRange.selectionEnd)\r\n                }\r\n            } catch (e) {}\r\n        },\r\n        focusAndSelectElement: function(component, $element) {\r\n            _events_engine2.default.trigger($element, \"focus\");\r\n            var isSelectTextOnEditingStart = component.option(\"editing.selectTextOnEditStart\");\r\n            var keyboardController = component.getController(\"keyboardNavigation\");\r\n            var isEditingNavigationMode = keyboardController && keyboardController._isFastEditingStarted();\r\n            var element = $element.get(0);\r\n            if (isSelectTextOnEditingStart && !isEditingNavigationMode && $element.is(\".dx-texteditor-input\") && !$element.is(\"[readonly]\")) {\r\n                var editor = getWidgetInstance($element.closest(\".dx-texteditor\"));\r\n                (0, _deferred.when)(editor && editor._loadItemDeferred).done(function() {\r\n                    element.select()\r\n                })\r\n            }\r\n        },\r\n        getWidgetInstance: getWidgetInstance,\r\n        getLastResizableColumnIndex: function(columns, resultWidths) {\r\n            var hasResizableColumns = columns.some(function(column) {\r\n                return column && !column.command && !column.fixed && false !== column.allowResizing\r\n            });\r\n            var lastColumnIndex;\r\n            for (lastColumnIndex = columns.length - 1; columns[lastColumnIndex]; lastColumnIndex--) {\r\n                var column = columns[lastColumnIndex];\r\n                var width = resultWidths && resultWidths[lastColumnIndex];\r\n                var allowResizing = !hasResizableColumns || false !== column.allowResizing;\r\n                if (!column.command && !column.fixed && \"adaptiveHidden\" !== width && allowResizing) {\r\n                    break\r\n                }\r\n            }\r\n            return lastColumnIndex\r\n        },\r\n        isElementInCurrentGrid: function(controller, $element) {\r\n            if ($element && $element.length) {\r\n                var $grid = $element.closest(\".\" + controller.getWidgetContainerClass()).parent();\r\n                return $grid.is(controller.component.$element())\r\n            }\r\n            return false\r\n        }\r\n    }\r\n}();\r\n"]},"metadata":{},"sourceType":"script"}