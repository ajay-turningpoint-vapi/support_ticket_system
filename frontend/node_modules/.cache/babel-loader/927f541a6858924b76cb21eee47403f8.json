{"ast":null,"code":"/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.master_detail.js)\r\n * Version: 20.1.7\r\n * Build date: Tue Aug 25 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _uiGrid_core = require(\"./ui.grid_core.utils\");\n\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar MASTER_DETAIL_CELL_CLASS = \"dx-master-detail-cell\";\nvar MASTER_DETAIL_ROW_CLASS = \"dx-master-detail-row\";\nvar CELL_FOCUS_DISABLED_CLASS = \"dx-cell-focus-disabled\";\nvar ROW_LINES_CLASS = \"dx-row-lines\";\nmodule.exports = {\n  defaultOptions: function () {\n    return {\n      masterDetail: {\n        enabled: false,\n        autoExpandAll: false,\n        template: null\n      }\n    };\n  },\n  extenders: {\n    controllers: {\n      columns: {\n        _getExpandColumnsCore: function () {\n          var expandColumns = this.callBase();\n\n          if (this.option(\"masterDetail.enabled\")) {\n            expandColumns.push({\n              type: \"detailExpand\",\n              cellTemplate: _uiGrid_core2.default.getExpandCellTemplate()\n            });\n          }\n\n          return expandColumns;\n        }\n      },\n      data: function () {\n        var initMasterDetail = function (that) {\n          that._expandedItems = [];\n          that._isExpandAll = that.option(\"masterDetail.autoExpandAll\");\n        };\n\n        return {\n          init: function () {\n            var that = this;\n            initMasterDetail(that);\n            that.callBase();\n          },\n          expandAll: function (groupIndex) {\n            var that = this;\n\n            if (groupIndex < 0) {\n              that._isExpandAll = true;\n              that._expandedItems = [];\n              that.updateItems();\n            } else {\n              that.callBase.apply(that, arguments);\n            }\n          },\n          collapseAll: function (groupIndex) {\n            var that = this;\n\n            if (groupIndex < 0) {\n              that._isExpandAll = false;\n              that._expandedItems = [];\n              that.updateItems();\n            } else {\n              that.callBase.apply(that, arguments);\n            }\n          },\n          isRowExpanded: function (key) {\n            var that = this;\n\n            var expandIndex = _uiGrid_core2.default.getIndexByKey(key, that._expandedItems);\n\n            if (Array.isArray(key)) {\n              return that.callBase.apply(that, arguments);\n            } else {\n              return !!(that._isExpandAll ^ (expandIndex >= 0 && that._expandedItems[expandIndex].visible));\n            }\n          },\n          _getRowIndicesForExpand: function (key) {\n            var rowIndex = this.getRowIndexByKey(key);\n            return [rowIndex, rowIndex + 1];\n          },\n          _changeRowExpandCore: function (key) {\n            var that = this;\n            var result;\n\n            if (Array.isArray(key)) {\n              result = that.callBase.apply(that, arguments);\n            } else {\n              var expandIndex = _uiGrid_core2.default.getIndexByKey(key, that._expandedItems);\n\n              if (expandIndex >= 0) {\n                var visible = that._expandedItems[expandIndex].visible;\n                that._expandedItems[expandIndex].visible = !visible;\n              } else {\n                that._expandedItems.push({\n                  key: key,\n                  visible: true\n                });\n\n                var editingController = that.getController(\"editing\");\n\n                if (editingController) {\n                  editingController.correctEditRowIndexAfterExpand(key);\n                }\n              }\n\n              that.updateItems({\n                changeType: \"update\",\n                rowIndices: that._getRowIndicesForExpand(key)\n              });\n              result = new _deferred.Deferred().resolve();\n            }\n\n            return result;\n          },\n          _processDataItem: function (data, options) {\n            var that = this;\n            var dataItem = that.callBase.apply(that, arguments);\n            dataItem.isExpanded = that.isRowExpanded(dataItem.key);\n\n            if (void 0 === options.detailColumnIndex) {\n              options.detailColumnIndex = -1;\n              (0, _iterator.each)(options.visibleColumns, function (index, column) {\n                if (\"expand\" === column.command && !(0, _type.isDefined)(column.groupIndex)) {\n                  options.detailColumnIndex = index;\n                  return false;\n                }\n              });\n            }\n\n            if (options.detailColumnIndex >= 0) {\n              dataItem.values[options.detailColumnIndex] = dataItem.isExpanded;\n            }\n\n            return dataItem;\n          },\n          _processItems: function (items, change) {\n            var that = this;\n            var changeType = change.changeType;\n            var result = [];\n            items = that.callBase.apply(that, arguments);\n\n            if (\"loadingAll\" === changeType) {\n              return items;\n            }\n\n            if (\"refresh\" === changeType) {\n              that._expandedItems = (0, _common.grep)(that._expandedItems, function (item) {\n                return item.visible;\n              });\n            }\n\n            (0, _iterator.each)(items, function (index, item) {\n              result.push(item);\n\n              var expandIndex = _uiGrid_core2.default.getIndexByKey(item.key, that._expandedItems);\n\n              if (\"data\" === item.rowType && (item.isExpanded || expandIndex >= 0) && !item.isNewRow) {\n                result.push({\n                  visible: item.isExpanded,\n                  rowType: \"detail\",\n                  key: item.key,\n                  data: item.data,\n                  values: []\n                });\n              }\n            });\n            return result;\n          },\n          optionChanged: function (args) {\n            var that = this;\n            var isEnabledChanged;\n            var isAutoExpandAllChanged;\n\n            if (\"masterDetail\" === args.name) {\n              args.name = \"dataSource\";\n\n              switch (args.fullName) {\n                case \"masterDetail\":\n                  var value = args.value || {};\n                  var previousValue = args.previousValue || {};\n                  isEnabledChanged = value.enabled !== previousValue.enabled;\n                  isAutoExpandAllChanged = value.autoExpandAll !== previousValue.autoExpandAll;\n                  break;\n\n                case \"masterDetail.enabled\":\n                  isEnabledChanged = true;\n                  break;\n\n                case \"masterDetail.autoExpandAll\":\n                  isAutoExpandAllChanged = true;\n              }\n\n              if (isEnabledChanged || isAutoExpandAllChanged) {\n                initMasterDetail(that);\n              }\n            }\n\n            that.callBase(args);\n          }\n        };\n      }(),\n      resizing: {\n        fireContentReadyAction: function () {\n          this.callBase.apply(this, arguments);\n\n          this._updateParentDataGrids(this.component.$element());\n        },\n        _updateParentDataGrids: function ($element) {\n          var _this = this;\n\n          var $masterDetailRow = $element.closest(\".\" + MASTER_DETAIL_ROW_CLASS);\n\n          if ($masterDetailRow.length) {\n            (0, _deferred.when)(this._updateMasterDataGrid($masterDetailRow, $element)).done(function () {\n              _this._updateParentDataGrids($masterDetailRow.parent());\n            });\n          }\n        },\n        _updateMasterDataGrid: function ($masterDetailRow, $detailElement) {\n          var masterRowOptions = (0, _renderer2.default)($masterDetailRow).data(\"options\");\n          var masterDataGrid = (0, _renderer2.default)($masterDetailRow).closest(\".\" + this.getWidgetContainerClass()).parent().data(\"dxDataGrid\");\n\n          if (masterRowOptions && masterDataGrid) {\n            if (masterDataGrid.getView(\"rowsView\").isFixedColumns()) {\n              this._updateFixedMasterDetailGrids(masterDataGrid, masterRowOptions.rowIndex, $detailElement);\n            } else {\n              var scrollable = masterDataGrid.getScrollable();\n              return scrollable && scrollable.update();\n            }\n          }\n        },\n        _updateFixedMasterDetailGrids: function (masterDataGrid, masterRowIndex, $detailElement) {\n          var _this2 = this;\n\n          var $rows = (0, _renderer2.default)(masterDataGrid.getRowElement(masterRowIndex));\n\n          if ($rows && 2 === $rows.length && $rows.eq(0).height() !== $rows.eq(1).height()) {\n            var detailElementWidth = $detailElement.width();\n            return masterDataGrid.updateDimensions().done(function () {\n              var isDetailHorizontalScrollCanBeShown = _this2.option(\"columnAutoWidth\") && true === masterDataGrid.option(\"scrolling.useNative\");\n              var isDetailGridWidthChanged = isDetailHorizontalScrollCanBeShown && detailElementWidth !== $detailElement.width();\n\n              if (isDetailHorizontalScrollCanBeShown && isDetailGridWidthChanged) {\n                _this2.updateDimensions();\n              }\n            });\n          }\n        },\n        _toggleBestFitMode: function (isBestFit) {\n          this.callBase.apply(this, arguments);\n\n          if (this.option(\"masterDetail.template\")) {\n            var $rowsTable = this._rowsView._getTableElement();\n\n            if ($rowsTable) {\n              $rowsTable.find(\".dx-master-detail-cell\").toggleClass(\"dx-hidden\", isBestFit);\n            }\n          }\n        }\n      }\n    },\n    views: {\n      rowsView: function () {\n        return {\n          _getCellTemplate: function (options) {\n            var that = this;\n            var column = options.column;\n            var editingController = that.getController(\"editing\");\n            var isEditRow = editingController && editingController.isEditRow(options.rowIndex);\n            var template;\n\n            if (\"detail\" === column.command && !isEditRow) {\n              template = that.option(\"masterDetail.template\") || {\n                allowRenderToDetachedContainer: false,\n                render: that._getDefaultTemplate(column)\n              };\n            } else {\n              template = that.callBase.apply(that, arguments);\n            }\n\n            return template;\n          },\n          _isDetailRow: function (row) {\n            return row && row.rowType && 0 === row.rowType.indexOf(\"detail\");\n          },\n          _createRow: function (row) {\n            var $row = this.callBase(row);\n\n            if (row && this._isDetailRow(row)) {\n              this.option(\"showRowLines\") && $row.addClass(ROW_LINES_CLASS);\n              $row.addClass(MASTER_DETAIL_ROW_CLASS);\n\n              if ((0, _type.isDefined)(row.visible)) {\n                $row.toggle(row.visible);\n              }\n            }\n\n            return $row;\n          },\n          _renderCells: function ($row, options) {\n            var row = options.row;\n            var $detailCell;\n\n            var visibleColumns = this._columnsController.getVisibleColumns();\n\n            if (row.rowType && this._isDetailRow(row)) {\n              if (this._needRenderCell(0, options.columnIndices)) {\n                $detailCell = this._renderCell($row, {\n                  value: null,\n                  row: row,\n                  rowIndex: row.rowIndex,\n                  column: {\n                    command: \"detail\"\n                  },\n                  columnIndex: 0\n                });\n                $detailCell.addClass(CELL_FOCUS_DISABLED_CLASS).addClass(MASTER_DETAIL_CELL_CLASS).attr(\"colSpan\", visibleColumns.length);\n              }\n            } else {\n              this.callBase.apply(this, arguments);\n            }\n          }\n        };\n      }()\n    }\n  }\n};","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/ticketSystem/frontend/node_modules/devextreme/ui/grid_core/ui.grid_core.master_detail.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_uiGrid_core","_uiGrid_core2","_common","_iterator","_type","_deferred","obj","__esModule","MASTER_DETAIL_CELL_CLASS","MASTER_DETAIL_ROW_CLASS","CELL_FOCUS_DISABLED_CLASS","ROW_LINES_CLASS","module","exports","defaultOptions","masterDetail","enabled","autoExpandAll","template","extenders","controllers","columns","_getExpandColumnsCore","expandColumns","callBase","option","push","type","cellTemplate","default","getExpandCellTemplate","data","initMasterDetail","that","_expandedItems","_isExpandAll","init","expandAll","groupIndex","updateItems","apply","arguments","collapseAll","isRowExpanded","key","expandIndex","getIndexByKey","Array","isArray","visible","_getRowIndicesForExpand","rowIndex","getRowIndexByKey","_changeRowExpandCore","result","editingController","getController","correctEditRowIndexAfterExpand","changeType","rowIndices","Deferred","resolve","_processDataItem","options","dataItem","isExpanded","detailColumnIndex","each","visibleColumns","index","column","command","isDefined","values","_processItems","items","change","grep","item","rowType","isNewRow","optionChanged","args","isEnabledChanged","isAutoExpandAllChanged","name","fullName","value","previousValue","resizing","fireContentReadyAction","_updateParentDataGrids","component","$element","_this","$masterDetailRow","closest","length","when","_updateMasterDataGrid","done","parent","$detailElement","masterRowOptions","masterDataGrid","getWidgetContainerClass","getView","isFixedColumns","_updateFixedMasterDetailGrids","scrollable","getScrollable","update","masterRowIndex","_this2","$rows","getRowElement","eq","height","detailElementWidth","width","updateDimensions","isDetailHorizontalScrollCanBeShown","isDetailGridWidthChanged","_toggleBestFitMode","isBestFit","$rowsTable","_rowsView","_getTableElement","find","toggleClass","views","rowsView","_getCellTemplate","isEditRow","allowRenderToDetachedContainer","render","_getDefaultTemplate","_isDetailRow","row","indexOf","_createRow","$row","addClass","toggle","_renderCells","$detailCell","_columnsController","getVisibleColumns","_needRenderCell","columnIndices","_renderCell","columnIndex","attr"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.master_detail.js)\r\n * Version: 20.1.7\r\n * Build date: Tue Aug 25 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _uiGrid_core = require(\"./ui.grid_core.utils\");\r\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar MASTER_DETAIL_CELL_CLASS = \"dx-master-detail-cell\";\r\nvar MASTER_DETAIL_ROW_CLASS = \"dx-master-detail-row\";\r\nvar CELL_FOCUS_DISABLED_CLASS = \"dx-cell-focus-disabled\";\r\nvar ROW_LINES_CLASS = \"dx-row-lines\";\r\nmodule.exports = {\r\n    defaultOptions: function() {\r\n        return {\r\n            masterDetail: {\r\n                enabled: false,\r\n                autoExpandAll: false,\r\n                template: null\r\n            }\r\n        }\r\n    },\r\n    extenders: {\r\n        controllers: {\r\n            columns: {\r\n                _getExpandColumnsCore: function() {\r\n                    var expandColumns = this.callBase();\r\n                    if (this.option(\"masterDetail.enabled\")) {\r\n                        expandColumns.push({\r\n                            type: \"detailExpand\",\r\n                            cellTemplate: _uiGrid_core2.default.getExpandCellTemplate()\r\n                        })\r\n                    }\r\n                    return expandColumns\r\n                }\r\n            },\r\n            data: function() {\r\n                var initMasterDetail = function(that) {\r\n                    that._expandedItems = [];\r\n                    that._isExpandAll = that.option(\"masterDetail.autoExpandAll\")\r\n                };\r\n                return {\r\n                    init: function() {\r\n                        var that = this;\r\n                        initMasterDetail(that);\r\n                        that.callBase()\r\n                    },\r\n                    expandAll: function(groupIndex) {\r\n                        var that = this;\r\n                        if (groupIndex < 0) {\r\n                            that._isExpandAll = true;\r\n                            that._expandedItems = [];\r\n                            that.updateItems()\r\n                        } else {\r\n                            that.callBase.apply(that, arguments)\r\n                        }\r\n                    },\r\n                    collapseAll: function(groupIndex) {\r\n                        var that = this;\r\n                        if (groupIndex < 0) {\r\n                            that._isExpandAll = false;\r\n                            that._expandedItems = [];\r\n                            that.updateItems()\r\n                        } else {\r\n                            that.callBase.apply(that, arguments)\r\n                        }\r\n                    },\r\n                    isRowExpanded: function(key) {\r\n                        var that = this;\r\n                        var expandIndex = _uiGrid_core2.default.getIndexByKey(key, that._expandedItems);\r\n                        if (Array.isArray(key)) {\r\n                            return that.callBase.apply(that, arguments)\r\n                        } else {\r\n                            return !!(that._isExpandAll ^ (expandIndex >= 0 && that._expandedItems[expandIndex].visible))\r\n                        }\r\n                    },\r\n                    _getRowIndicesForExpand: function(key) {\r\n                        var rowIndex = this.getRowIndexByKey(key);\r\n                        return [rowIndex, rowIndex + 1]\r\n                    },\r\n                    _changeRowExpandCore: function(key) {\r\n                        var that = this;\r\n                        var result;\r\n                        if (Array.isArray(key)) {\r\n                            result = that.callBase.apply(that, arguments)\r\n                        } else {\r\n                            var expandIndex = _uiGrid_core2.default.getIndexByKey(key, that._expandedItems);\r\n                            if (expandIndex >= 0) {\r\n                                var visible = that._expandedItems[expandIndex].visible;\r\n                                that._expandedItems[expandIndex].visible = !visible\r\n                            } else {\r\n                                that._expandedItems.push({\r\n                                    key: key,\r\n                                    visible: true\r\n                                });\r\n                                var editingController = that.getController(\"editing\");\r\n                                if (editingController) {\r\n                                    editingController.correctEditRowIndexAfterExpand(key)\r\n                                }\r\n                            }\r\n                            that.updateItems({\r\n                                changeType: \"update\",\r\n                                rowIndices: that._getRowIndicesForExpand(key)\r\n                            });\r\n                            result = (new _deferred.Deferred).resolve()\r\n                        }\r\n                        return result\r\n                    },\r\n                    _processDataItem: function(data, options) {\r\n                        var that = this;\r\n                        var dataItem = that.callBase.apply(that, arguments);\r\n                        dataItem.isExpanded = that.isRowExpanded(dataItem.key);\r\n                        if (void 0 === options.detailColumnIndex) {\r\n                            options.detailColumnIndex = -1;\r\n                            (0, _iterator.each)(options.visibleColumns, function(index, column) {\r\n                                if (\"expand\" === column.command && !(0, _type.isDefined)(column.groupIndex)) {\r\n                                    options.detailColumnIndex = index;\r\n                                    return false\r\n                                }\r\n                            })\r\n                        }\r\n                        if (options.detailColumnIndex >= 0) {\r\n                            dataItem.values[options.detailColumnIndex] = dataItem.isExpanded\r\n                        }\r\n                        return dataItem\r\n                    },\r\n                    _processItems: function(items, change) {\r\n                        var that = this;\r\n                        var changeType = change.changeType;\r\n                        var result = [];\r\n                        items = that.callBase.apply(that, arguments);\r\n                        if (\"loadingAll\" === changeType) {\r\n                            return items\r\n                        }\r\n                        if (\"refresh\" === changeType) {\r\n                            that._expandedItems = (0, _common.grep)(that._expandedItems, function(item) {\r\n                                return item.visible\r\n                            })\r\n                        }(0, _iterator.each)(items, function(index, item) {\r\n                            result.push(item);\r\n                            var expandIndex = _uiGrid_core2.default.getIndexByKey(item.key, that._expandedItems);\r\n                            if (\"data\" === item.rowType && (item.isExpanded || expandIndex >= 0) && !item.isNewRow) {\r\n                                result.push({\r\n                                    visible: item.isExpanded,\r\n                                    rowType: \"detail\",\r\n                                    key: item.key,\r\n                                    data: item.data,\r\n                                    values: []\r\n                                })\r\n                            }\r\n                        });\r\n                        return result\r\n                    },\r\n                    optionChanged: function(args) {\r\n                        var that = this;\r\n                        var isEnabledChanged;\r\n                        var isAutoExpandAllChanged;\r\n                        if (\"masterDetail\" === args.name) {\r\n                            args.name = \"dataSource\";\r\n                            switch (args.fullName) {\r\n                                case \"masterDetail\":\r\n                                    var value = args.value || {};\r\n                                    var previousValue = args.previousValue || {};\r\n                                    isEnabledChanged = value.enabled !== previousValue.enabled;\r\n                                    isAutoExpandAllChanged = value.autoExpandAll !== previousValue.autoExpandAll;\r\n                                    break;\r\n                                case \"masterDetail.enabled\":\r\n                                    isEnabledChanged = true;\r\n                                    break;\r\n                                case \"masterDetail.autoExpandAll\":\r\n                                    isAutoExpandAllChanged = true\r\n                            }\r\n                            if (isEnabledChanged || isAutoExpandAllChanged) {\r\n                                initMasterDetail(that)\r\n                            }\r\n                        }\r\n                        that.callBase(args)\r\n                    }\r\n                }\r\n            }(),\r\n            resizing: {\r\n                fireContentReadyAction: function() {\r\n                    this.callBase.apply(this, arguments);\r\n                    this._updateParentDataGrids(this.component.$element())\r\n                },\r\n                _updateParentDataGrids: function($element) {\r\n                    var _this = this;\r\n                    var $masterDetailRow = $element.closest(\".\" + MASTER_DETAIL_ROW_CLASS);\r\n                    if ($masterDetailRow.length) {\r\n                        (0, _deferred.when)(this._updateMasterDataGrid($masterDetailRow, $element)).done(function() {\r\n                            _this._updateParentDataGrids($masterDetailRow.parent())\r\n                        })\r\n                    }\r\n                },\r\n                _updateMasterDataGrid: function($masterDetailRow, $detailElement) {\r\n                    var masterRowOptions = (0, _renderer2.default)($masterDetailRow).data(\"options\");\r\n                    var masterDataGrid = (0, _renderer2.default)($masterDetailRow).closest(\".\" + this.getWidgetContainerClass()).parent().data(\"dxDataGrid\");\r\n                    if (masterRowOptions && masterDataGrid) {\r\n                        if (masterDataGrid.getView(\"rowsView\").isFixedColumns()) {\r\n                            this._updateFixedMasterDetailGrids(masterDataGrid, masterRowOptions.rowIndex, $detailElement)\r\n                        } else {\r\n                            var scrollable = masterDataGrid.getScrollable();\r\n                            return scrollable && scrollable.update()\r\n                        }\r\n                    }\r\n                },\r\n                _updateFixedMasterDetailGrids: function(masterDataGrid, masterRowIndex, $detailElement) {\r\n                    var _this2 = this;\r\n                    var $rows = (0, _renderer2.default)(masterDataGrid.getRowElement(masterRowIndex));\r\n                    if ($rows && 2 === $rows.length && $rows.eq(0).height() !== $rows.eq(1).height()) {\r\n                        var detailElementWidth = $detailElement.width();\r\n                        return masterDataGrid.updateDimensions().done(function() {\r\n                            var isDetailHorizontalScrollCanBeShown = _this2.option(\"columnAutoWidth\") && true === masterDataGrid.option(\"scrolling.useNative\");\r\n                            var isDetailGridWidthChanged = isDetailHorizontalScrollCanBeShown && detailElementWidth !== $detailElement.width();\r\n                            if (isDetailHorizontalScrollCanBeShown && isDetailGridWidthChanged) {\r\n                                _this2.updateDimensions()\r\n                            }\r\n                        })\r\n                    }\r\n                },\r\n                _toggleBestFitMode: function(isBestFit) {\r\n                    this.callBase.apply(this, arguments);\r\n                    if (this.option(\"masterDetail.template\")) {\r\n                        var $rowsTable = this._rowsView._getTableElement();\r\n                        if ($rowsTable) {\r\n                            $rowsTable.find(\".dx-master-detail-cell\").toggleClass(\"dx-hidden\", isBestFit)\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        views: {\r\n            rowsView: function() {\r\n                return {\r\n                    _getCellTemplate: function(options) {\r\n                        var that = this;\r\n                        var column = options.column;\r\n                        var editingController = that.getController(\"editing\");\r\n                        var isEditRow = editingController && editingController.isEditRow(options.rowIndex);\r\n                        var template;\r\n                        if (\"detail\" === column.command && !isEditRow) {\r\n                            template = that.option(\"masterDetail.template\") || {\r\n                                allowRenderToDetachedContainer: false,\r\n                                render: that._getDefaultTemplate(column)\r\n                            }\r\n                        } else {\r\n                            template = that.callBase.apply(that, arguments)\r\n                        }\r\n                        return template\r\n                    },\r\n                    _isDetailRow: function(row) {\r\n                        return row && row.rowType && 0 === row.rowType.indexOf(\"detail\")\r\n                    },\r\n                    _createRow: function(row) {\r\n                        var $row = this.callBase(row);\r\n                        if (row && this._isDetailRow(row)) {\r\n                            this.option(\"showRowLines\") && $row.addClass(ROW_LINES_CLASS);\r\n                            $row.addClass(MASTER_DETAIL_ROW_CLASS);\r\n                            if ((0, _type.isDefined)(row.visible)) {\r\n                                $row.toggle(row.visible)\r\n                            }\r\n                        }\r\n                        return $row\r\n                    },\r\n                    _renderCells: function($row, options) {\r\n                        var row = options.row;\r\n                        var $detailCell;\r\n                        var visibleColumns = this._columnsController.getVisibleColumns();\r\n                        if (row.rowType && this._isDetailRow(row)) {\r\n                            if (this._needRenderCell(0, options.columnIndices)) {\r\n                                $detailCell = this._renderCell($row, {\r\n                                    value: null,\r\n                                    row: row,\r\n                                    rowIndex: row.rowIndex,\r\n                                    column: {\r\n                                        command: \"detail\"\r\n                                    },\r\n                                    columnIndex: 0\r\n                                });\r\n                                $detailCell.addClass(CELL_FOCUS_DISABLED_CLASS).addClass(MASTER_DETAIL_CELL_CLASS).attr(\"colSpan\", visibleColumns.length)\r\n                            }\r\n                        } else {\r\n                            this.callBase.apply(this, arguments)\r\n                        }\r\n                    }\r\n                }\r\n            }()\r\n        }\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"script"}