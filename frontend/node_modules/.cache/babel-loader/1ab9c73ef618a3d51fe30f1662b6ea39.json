{"ast":null,"code":"/**\r\n * DevExtreme (core/template_manager.js)\r\n * Version: 20.1.7\r\n * Build date: Tue Aug 25 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _renderer = require(\"./renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _type = require(\"./utils/type\");\n\nvar _common = require(\"./utils/common\");\n\nvar _extend = require(\"./utils/extend\");\n\nvar _errors = require(\"./errors\");\n\nvar _dom = require(\"./utils/dom\");\n\nvar _function_template = require(\"./templates/function_template\");\n\nvar _empty_template = require(\"./templates/empty_template\");\n\nvar _inflector = require(\"./utils/inflector\");\n\nvar _template_manager = require(\"./utils/template_manager\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nvar TEXT_NODE = 3;\nvar ANONYMOUS_TEMPLATE_NAME = \"template\";\nvar TEMPLATE_SELECTOR = '[data-options*=\"dxTemplate\"]';\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\nvar DEPRECATED_WIDGET_NAMES = {\n  button: true,\n  tabs: true,\n  dropDownMenu: true\n};\nvar DX_POLYMORPH_WIDGET_TEMPLATE = new _function_template.FunctionTemplate(function (_ref) {\n  var model = _ref.model,\n      parent = _ref.parent;\n  var widgetName = model.widget;\n\n  if (!widgetName) {\n    return (0, _renderer2.default)();\n  }\n\n  var widgetElement = (0, _renderer2.default)(\"<div>\");\n  var widgetOptions = model.options || {};\n\n  if (DEPRECATED_WIDGET_NAMES[widgetName]) {\n    var deprecatedName = widgetName;\n    widgetName = (0, _inflector.camelize)(\"dx-\" + widgetName);\n    (0, _errors.log)(\"W0001\", 'dxToolbar - \"widget\" item field', deprecatedName, \"16.1\", \"Use: \" + widgetName + \"instead\");\n  }\n\n  if (parent) {\n    parent._createComponent(widgetElement, widgetName, widgetOptions);\n  } else {\n    widgetElement[widgetName](widgetOptions);\n  }\n\n  return widgetElement;\n});\n\nvar TemplateManager = function () {\n  function TemplateManager(createElement, anonymousTemplateName) {\n    _classCallCheck(this, TemplateManager);\n\n    this._tempTemplates = [];\n    this._defaultTemplates = {};\n    this._anonymousTemplateName = anonymousTemplateName || ANONYMOUS_TEMPLATE_NAME;\n    this._createElement = createElement || _template_manager.defaultCreateElement;\n    this._createTemplateIfNeeded = this._createTemplateIfNeeded.bind(this);\n  }\n\n  _createClass(TemplateManager, [{\n    key: \"addDefaultTemplates\",\n    value: function (templates) {\n      this._defaultTemplates = (0, _extend.extend)({}, this._defaultTemplates, templates);\n    }\n  }, {\n    key: \"dispose\",\n    value: function () {\n      this._tempTemplates.forEach(function (tempTemplate) {\n        tempTemplate.template.dispose && tempTemplate.template.dispose();\n      });\n\n      this._tempTemplates = [];\n    }\n  }, {\n    key: \"extractTemplates\",\n    value: function ($el) {\n      var templates = this._extractTemplates($el);\n\n      var anonymousTemplateMeta = this._extractAnonymousTemplate($el);\n\n      return {\n        templates: templates,\n        anonymousTemplateMeta: anonymousTemplateMeta\n      };\n    }\n  }, {\n    key: \"_extractTemplates\",\n    value: function ($el) {\n      var templateElements = $el.contents().filter(TEMPLATE_SELECTOR);\n      var templatesMap = {};\n      templateElements.each(function (_, template) {\n        var templateOptions = (0, _dom.getElementOptions)(template).dxTemplate;\n\n        if (!templateOptions) {\n          return;\n        }\n\n        if (!templateOptions.name) {\n          throw (0, _errors.Error)(\"E0023\");\n        }\n\n        (0, _renderer2.default)(template).addClass(TEMPLATE_WRAPPER_CLASS).detach();\n        templatesMap[templateOptions.name] = templatesMap[templateOptions.name] || [];\n        templatesMap[templateOptions.name].push(template);\n      });\n      var templates = [];\n\n      for (var templateName in templatesMap) {\n        var deviceTemplate = (0, _template_manager.findTemplateByDevice)(templatesMap[templateName]);\n\n        if (deviceTemplate) {\n          templates.push({\n            name: templateName,\n            template: this._createTemplate(deviceTemplate)\n          });\n        }\n      }\n\n      return templates;\n    }\n  }, {\n    key: \"_extractAnonymousTemplate\",\n    value: function ($el) {\n      var $anonymousTemplate = $el.contents().detach();\n      var $notJunkTemplateContent = $anonymousTemplate.filter(function (_, element) {\n        var isTextNode = element.nodeType === TEXT_NODE;\n        var isEmptyText = (0, _renderer2.default)(element).text().trim().length < 1;\n        return !(isTextNode && isEmptyText);\n      });\n      return $notJunkTemplateContent.length > 0 ? {\n        template: this._createTemplate($anonymousTemplate),\n        name: this._anonymousTemplateName\n      } : {};\n    }\n  }, {\n    key: \"_createTemplateIfNeeded\",\n    value: function (templateSource) {\n      var cachedTemplate = this._tempTemplates.filter(function (tempTemplate) {\n        return tempTemplate.source === (0, _template_manager.templateKey)(templateSource);\n      })[0];\n\n      if (cachedTemplate) {\n        return cachedTemplate.template;\n      }\n\n      var template = this._createTemplate(templateSource);\n\n      this._tempTemplates.push({\n        template: template,\n        source: (0, _template_manager.templateKey)(templateSource)\n      });\n\n      return template;\n    }\n  }, {\n    key: \"_createTemplate\",\n    value: function (templateSource) {\n      return this._createElement((0, _template_manager.validateTemplateSource)(templateSource));\n    }\n  }, {\n    key: \"getTemplate\",\n    value: function (templateSource, templates, _ref2, context) {\n      var _this = this;\n\n      var isAsyncTemplate = _ref2.isAsyncTemplate,\n          skipTemplates = _ref2.skipTemplates;\n\n      if (!(0, _type.isFunction)(templateSource)) {\n        return (0, _template_manager.acquireTemplate)(templateSource, this._createTemplateIfNeeded, templates, isAsyncTemplate, skipTemplates, this._defaultTemplates);\n      }\n\n      return new _function_template.FunctionTemplate(function (options) {\n        var templateSourceResult = templateSource.apply(context, (0, _template_manager.getNormalizedTemplateArgs)(options));\n\n        if (!(0, _type.isDefined)(templateSourceResult)) {\n          return new _empty_template.EmptyTemplate();\n        }\n\n        var dispose = false;\n        var template = (0, _template_manager.acquireTemplate)(templateSourceResult, function (templateSource) {\n          if (templateSource.nodeType || (0, _type.isRenderer)(templateSource) && !(0, _renderer2.default)(templateSource).is(\"script\")) {\n            return new _function_template.FunctionTemplate(function () {\n              return templateSource;\n            });\n          }\n\n          dispose = true;\n          return _this._createTemplate(templateSource);\n        }, templates, isAsyncTemplate, skipTemplates, _this._defaultTemplates);\n        var result = template.render(options);\n        dispose && template.dispose && template.dispose();\n        return result;\n      });\n    }\n  }, {\n    key: \"anonymousTemplateName\",\n    get: function () {\n      return this._anonymousTemplateName;\n    }\n  }], [{\n    key: \"createDefaultOptions\",\n    value: function () {\n      return {\n        integrationOptions: {\n          watchMethod: function (fn, callback) {\n            var options = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};\n\n            if (!options.skipImmediate) {\n              callback(fn());\n            }\n\n            return _common.noop;\n          },\n          templates: {\n            \"dx-polymorph-widget\": DX_POLYMORPH_WIDGET_TEMPLATE\n          }\n        }\n      };\n    }\n  }]);\n\n  return TemplateManager;\n}();\n\nexports.default = TemplateManager;","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/ticketSystem/frontend/node_modules/devextreme/core/template_manager.js"],"names":["Object","defineProperty","exports","value","default","_renderer","require","_renderer2","_interopRequireDefault","_type","_common","_extend","_errors","_dom","_function_template","_empty_template","_inflector","_template_manager","obj","__esModule","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","prototype","TEXT_NODE","ANONYMOUS_TEMPLATE_NAME","TEMPLATE_SELECTOR","TEMPLATE_WRAPPER_CLASS","DEPRECATED_WIDGET_NAMES","button","tabs","dropDownMenu","DX_POLYMORPH_WIDGET_TEMPLATE","FunctionTemplate","_ref","model","parent","widgetName","widget","widgetElement","widgetOptions","options","deprecatedName","camelize","log","_createComponent","TemplateManager","createElement","anonymousTemplateName","_tempTemplates","_defaultTemplates","_anonymousTemplateName","_createElement","defaultCreateElement","_createTemplateIfNeeded","bind","templates","extend","forEach","tempTemplate","template","dispose","$el","_extractTemplates","anonymousTemplateMeta","_extractAnonymousTemplate","templateElements","contents","filter","templatesMap","each","_","templateOptions","getElementOptions","dxTemplate","name","Error","addClass","detach","push","templateName","deviceTemplate","findTemplateByDevice","_createTemplate","$anonymousTemplate","$notJunkTemplateContent","element","isTextNode","nodeType","isEmptyText","text","trim","templateSource","cachedTemplate","source","templateKey","validateTemplateSource","_ref2","context","_this","isAsyncTemplate","skipTemplates","isFunction","acquireTemplate","templateSourceResult","apply","getNormalizedTemplateArgs","isDefined","EmptyTemplate","isRenderer","is","result","render","get","integrationOptions","watchMethod","fn","callback","arguments","skipImmediate","noop"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (core/template_manager.js)\r\n * Version: 20.1.7\r\n * Build date: Tue Aug 25 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n});\r\nexports.default = void 0;\r\nvar _renderer = require(\"./renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _type = require(\"./utils/type\");\r\nvar _common = require(\"./utils/common\");\r\nvar _extend = require(\"./utils/extend\");\r\nvar _errors = require(\"./errors\");\r\nvar _dom = require(\"./utils/dom\");\r\nvar _function_template = require(\"./templates/function_template\");\r\nvar _empty_template = require(\"./templates/empty_template\");\r\nvar _inflector = require(\"./utils/inflector\");\r\nvar _template_manager = require(\"./utils/template_manager\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\nvar TEXT_NODE = 3;\r\nvar ANONYMOUS_TEMPLATE_NAME = \"template\";\r\nvar TEMPLATE_SELECTOR = '[data-options*=\"dxTemplate\"]';\r\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\r\nvar DEPRECATED_WIDGET_NAMES = {\r\n    button: true,\r\n    tabs: true,\r\n    dropDownMenu: true\r\n};\r\nvar DX_POLYMORPH_WIDGET_TEMPLATE = new _function_template.FunctionTemplate(function(_ref) {\r\n    var model = _ref.model,\r\n        parent = _ref.parent;\r\n    var widgetName = model.widget;\r\n    if (!widgetName) {\r\n        return (0, _renderer2.default)()\r\n    }\r\n    var widgetElement = (0, _renderer2.default)(\"<div>\");\r\n    var widgetOptions = model.options || {};\r\n    if (DEPRECATED_WIDGET_NAMES[widgetName]) {\r\n        var deprecatedName = widgetName;\r\n        widgetName = (0, _inflector.camelize)(\"dx-\" + widgetName);\r\n        (0, _errors.log)(\"W0001\", 'dxToolbar - \"widget\" item field', deprecatedName, \"16.1\", \"Use: \" + widgetName + \"instead\")\r\n    }\r\n    if (parent) {\r\n        parent._createComponent(widgetElement, widgetName, widgetOptions)\r\n    } else {\r\n        widgetElement[widgetName](widgetOptions)\r\n    }\r\n    return widgetElement\r\n});\r\nvar TemplateManager = function() {\r\n    function TemplateManager(createElement, anonymousTemplateName) {\r\n        _classCallCheck(this, TemplateManager);\r\n        this._tempTemplates = [];\r\n        this._defaultTemplates = {};\r\n        this._anonymousTemplateName = anonymousTemplateName || ANONYMOUS_TEMPLATE_NAME;\r\n        this._createElement = createElement || _template_manager.defaultCreateElement;\r\n        this._createTemplateIfNeeded = this._createTemplateIfNeeded.bind(this)\r\n    }\r\n    _createClass(TemplateManager, [{\r\n        key: \"addDefaultTemplates\",\r\n        value: function(templates) {\r\n            this._defaultTemplates = (0, _extend.extend)({}, this._defaultTemplates, templates)\r\n        }\r\n    }, {\r\n        key: \"dispose\",\r\n        value: function() {\r\n            this._tempTemplates.forEach(function(tempTemplate) {\r\n                tempTemplate.template.dispose && tempTemplate.template.dispose()\r\n            });\r\n            this._tempTemplates = []\r\n        }\r\n    }, {\r\n        key: \"extractTemplates\",\r\n        value: function($el) {\r\n            var templates = this._extractTemplates($el);\r\n            var anonymousTemplateMeta = this._extractAnonymousTemplate($el);\r\n            return {\r\n                templates: templates,\r\n                anonymousTemplateMeta: anonymousTemplateMeta\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_extractTemplates\",\r\n        value: function($el) {\r\n            var templateElements = $el.contents().filter(TEMPLATE_SELECTOR);\r\n            var templatesMap = {};\r\n            templateElements.each(function(_, template) {\r\n                var templateOptions = (0, _dom.getElementOptions)(template).dxTemplate;\r\n                if (!templateOptions) {\r\n                    return\r\n                }\r\n                if (!templateOptions.name) {\r\n                    throw (0, _errors.Error)(\"E0023\")\r\n                }(0, _renderer2.default)(template).addClass(TEMPLATE_WRAPPER_CLASS).detach();\r\n                templatesMap[templateOptions.name] = templatesMap[templateOptions.name] || [];\r\n                templatesMap[templateOptions.name].push(template)\r\n            });\r\n            var templates = [];\r\n            for (var templateName in templatesMap) {\r\n                var deviceTemplate = (0, _template_manager.findTemplateByDevice)(templatesMap[templateName]);\r\n                if (deviceTemplate) {\r\n                    templates.push({\r\n                        name: templateName,\r\n                        template: this._createTemplate(deviceTemplate)\r\n                    })\r\n                }\r\n            }\r\n            return templates\r\n        }\r\n    }, {\r\n        key: \"_extractAnonymousTemplate\",\r\n        value: function($el) {\r\n            var $anonymousTemplate = $el.contents().detach();\r\n            var $notJunkTemplateContent = $anonymousTemplate.filter(function(_, element) {\r\n                var isTextNode = element.nodeType === TEXT_NODE;\r\n                var isEmptyText = (0, _renderer2.default)(element).text().trim().length < 1;\r\n                return !(isTextNode && isEmptyText)\r\n            });\r\n            return $notJunkTemplateContent.length > 0 ? {\r\n                template: this._createTemplate($anonymousTemplate),\r\n                name: this._anonymousTemplateName\r\n            } : {}\r\n        }\r\n    }, {\r\n        key: \"_createTemplateIfNeeded\",\r\n        value: function(templateSource) {\r\n            var cachedTemplate = this._tempTemplates.filter(function(tempTemplate) {\r\n                return tempTemplate.source === (0, _template_manager.templateKey)(templateSource)\r\n            })[0];\r\n            if (cachedTemplate) {\r\n                return cachedTemplate.template\r\n            }\r\n            var template = this._createTemplate(templateSource);\r\n            this._tempTemplates.push({\r\n                template: template,\r\n                source: (0, _template_manager.templateKey)(templateSource)\r\n            });\r\n            return template\r\n        }\r\n    }, {\r\n        key: \"_createTemplate\",\r\n        value: function(templateSource) {\r\n            return this._createElement((0, _template_manager.validateTemplateSource)(templateSource))\r\n        }\r\n    }, {\r\n        key: \"getTemplate\",\r\n        value: function(templateSource, templates, _ref2, context) {\r\n            var _this = this;\r\n            var isAsyncTemplate = _ref2.isAsyncTemplate,\r\n                skipTemplates = _ref2.skipTemplates;\r\n            if (!(0, _type.isFunction)(templateSource)) {\r\n                return (0, _template_manager.acquireTemplate)(templateSource, this._createTemplateIfNeeded, templates, isAsyncTemplate, skipTemplates, this._defaultTemplates)\r\n            }\r\n            return new _function_template.FunctionTemplate(function(options) {\r\n                var templateSourceResult = templateSource.apply(context, (0, _template_manager.getNormalizedTemplateArgs)(options));\r\n                if (!(0, _type.isDefined)(templateSourceResult)) {\r\n                    return new _empty_template.EmptyTemplate\r\n                }\r\n                var dispose = false;\r\n                var template = (0, _template_manager.acquireTemplate)(templateSourceResult, function(templateSource) {\r\n                    if (templateSource.nodeType || (0, _type.isRenderer)(templateSource) && !(0, _renderer2.default)(templateSource).is(\"script\")) {\r\n                        return new _function_template.FunctionTemplate(function() {\r\n                            return templateSource\r\n                        })\r\n                    }\r\n                    dispose = true;\r\n                    return _this._createTemplate(templateSource)\r\n                }, templates, isAsyncTemplate, skipTemplates, _this._defaultTemplates);\r\n                var result = template.render(options);\r\n                dispose && template.dispose && template.dispose();\r\n                return result\r\n            })\r\n        }\r\n    }, {\r\n        key: \"anonymousTemplateName\",\r\n        get: function() {\r\n            return this._anonymousTemplateName\r\n        }\r\n    }], [{\r\n        key: \"createDefaultOptions\",\r\n        value: function() {\r\n            return {\r\n                integrationOptions: {\r\n                    watchMethod: function(fn, callback) {\r\n                        var options = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};\r\n                        if (!options.skipImmediate) {\r\n                            callback(fn())\r\n                        }\r\n                        return _common.noop\r\n                    },\r\n                    templates: {\r\n                        \"dx-polymorph-widget\": DX_POLYMORPH_WIDGET_TEMPLATE\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }]);\r\n    return TemplateManager\r\n}();\r\nexports.default = TemplateManager;\r\n"]},"metadata":{},"sourceType":"script"}