{"ast":null,"code":"/**\r\n * DevExtreme (ui/form/ui.form.layout_manager.js)\r\n * Version: 20.1.7\r\n * Build date: Tue Aug 25 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _guid = require(\"../../core/guid\");\n\nvar _guid2 = _interopRequireDefault(_guid);\n\nvar _uiForm = require(\"./ui.form.items_runtime_info\");\n\nvar _uiForm2 = _interopRequireDefault(_uiForm);\n\nvar _component_registrator = require(\"../../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _dom = require(\"../../core/utils/dom\");\n\nvar _dom2 = _interopRequireDefault(_dom);\n\nvar _variable_wrapper = require(\"../../core/utils/variable_wrapper\");\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _window2 = _interopRequireDefault(_window);\n\nvar _string = require(\"../../core/utils/string\");\n\nvar _string2 = _interopRequireDefault(_string);\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _data = require(\"../../core/utils/data\");\n\nvar _data2 = _interopRequireDefault(_data);\n\nvar _remove_event = require(\"../../core/remove_event\");\n\nvar _remove_event2 = _interopRequireDefault(_remove_event);\n\nvar _click = require(\"../../events/click\");\n\nvar _click2 = _interopRequireDefault(_click);\n\nvar _ui = require(\"../widget/ui.errors\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _message = require(\"../../localization/message\");\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _style = require(\"../../core/utils/style\");\n\nvar _style2 = _interopRequireDefault(_style);\n\nvar _inflector = require(\"../../core/utils/inflector\");\n\nvar _inflector2 = _interopRequireDefault(_inflector);\n\nvar _ui3 = require(\"../widget/ui.widget\");\n\nvar _ui4 = _interopRequireDefault(_ui3);\n\nvar _validator = require(\"../validator\");\n\nvar _validator2 = _interopRequireDefault(_validator);\n\nvar _responsive_box = require(\"../responsive_box\");\n\nvar _responsive_box2 = _interopRequireDefault(_responsive_box);\n\nvar _themes = require(\"../themes\");\n\nvar _themes2 = _interopRequireDefault(_themes);\n\nrequire(\"../text_box\");\n\nrequire(\"../number_box\");\n\nrequire(\"../check_box\");\n\nrequire(\"../date_box\");\n\nrequire(\"../button\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) {\n    return;\n  }\n\n  if (\"string\" === typeof o) {\n    return _arrayLikeToArray(o, minLen);\n  }\n\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n\n  if (\"Object\" === n && o.constructor) {\n    n = o.constructor.name;\n  }\n\n  if (\"Map\" === n || \"Set\" === n) {\n    return Array.from(o);\n  }\n\n  if (\"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) {\n    return _arrayLikeToArray(o, minLen);\n  }\n}\n\nfunction _iterableToArray(iter) {\n  if (\"undefined\" !== typeof Symbol && Symbol.iterator in Object(iter)) {\n    return Array.from(iter);\n  }\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    return _arrayLikeToArray(arr);\n  }\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (null == len || len > arr.length) {\n    len = arr.length;\n  }\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nvar FORM_EDITOR_BY_DEFAULT = \"dxTextBox\";\nvar FIELD_ITEM_CLASS = \"dx-field-item\";\nvar FIELD_EMPTY_ITEM_CLASS = \"dx-field-empty-item\";\nvar FIELD_BUTTON_ITEM_CLASS = \"dx-field-button-item\";\nvar FIELD_ITEM_REQUIRED_CLASS = \"dx-field-item-required\";\nvar FIELD_ITEM_OPTIONAL_CLASS = \"dx-field-item-optional\";\nvar FIELD_ITEM_REQUIRED_MARK_CLASS = \"dx-field-item-required-mark\";\nvar FIELD_ITEM_OPTIONAL_MARK_CLASS = \"dx-field-item-optional-mark\";\nvar FIELD_ITEM_LABEL_CLASS = \"dx-field-item-label\";\nvar FIELD_ITEM_LABEL_ALIGN_CLASS = \"dx-field-item-label-align\";\nvar FIELD_ITEM_LABEL_CONTENT_CLASS = \"dx-field-item-label-content\";\nvar FIELD_ITEM_LABEL_TEXT_CLASS = \"dx-field-item-label-text\";\nvar FIELD_ITEM_LABEL_LOCATION_CLASS = \"dx-field-item-label-location-\";\nvar FIELD_ITEM_CONTENT_CLASS = \"dx-field-item-content\";\nvar FIELD_ITEM_CONTENT_LOCATION_CLASS = \"dx-field-item-content-location-\";\nvar FIELD_ITEM_CONTENT_WRAPPER_CLASS = \"dx-field-item-content-wrapper\";\nvar FIELD_ITEM_HELP_TEXT_CLASS = \"dx-field-item-help-text\";\nvar SINGLE_COLUMN_ITEM_CONTENT = \"dx-single-column-item-content\";\nvar LABEL_HORIZONTAL_ALIGNMENT_CLASS = \"dx-label-h-align\";\nvar LABEL_VERTICAL_ALIGNMENT_CLASS = \"dx-label-v-align\";\nvar FORM_LAYOUT_MANAGER_CLASS = \"dx-layout-manager\";\nvar LAYOUT_MANAGER_FIRST_ROW_CLASS = \"dx-first-row\";\nvar LAYOUT_MANAGER_LAST_ROW_CLASS = \"dx-last-row\";\nvar LAYOUT_MANAGER_FIRST_COL_CLASS = \"dx-first-col\";\nvar LAYOUT_MANAGER_LAST_COL_CLASS = \"dx-last-col\";\nvar LAYOUT_MANAGER_ONE_COLUMN = \"dx-layout-manager-one-col\";\nvar FLEX_LAYOUT_CLASS = \"dx-flex-layout\";\nvar INVALID_CLASS = \"dx-invalid\";\nvar LAYOUT_STRATEGY_FLEX = \"flex\";\nvar LAYOUT_STRATEGY_FALLBACK = \"fallback\";\nvar SIMPLE_ITEM_TYPE = \"simple\";\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\nvar DATA_OPTIONS = [\"dataSource\", \"items\"];\nvar EDITORS_WITH_ARRAY_VALUE = [\"dxTagBox\", \"dxRangeSlider\"];\n\nvar LayoutManager = _ui4.default.inherit({\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      layoutData: {},\n      readOnly: false,\n      colCount: 1,\n      colCountByScreen: void 0,\n      labelLocation: \"left\",\n      onFieldDataChanged: null,\n      onEditorEnterKey: null,\n      customizeItem: null,\n      alignItemLabels: true,\n      minColWidth: 200,\n      showRequiredMark: true,\n      screenByWidth: null,\n      showOptionalMark: false,\n      requiredMark: \"*\",\n      optionalMark: _message2.default.format(\"dxForm-optionalMark\"),\n      requiredMessage: _message2.default.getFormatter(\"dxForm-requiredMessage\")\n    });\n  },\n  _setOptionsByReference: function () {\n    this.callBase();\n    (0, _extend.extend)(this._optionsByReference, {\n      layoutData: true,\n      validationGroup: true\n    });\n  },\n  _init: function () {\n    var layoutData = this.option(\"layoutData\");\n    this.callBase();\n    this._itemWatchers = [];\n    this._itemsRunTimeInfo = new _uiForm2.default();\n\n    this._updateReferencedOptions(layoutData);\n\n    this._initDataAndItems(layoutData);\n  },\n  _dispose: function () {\n    this.callBase();\n\n    this._cleanItemWatchers();\n  },\n  _initDataAndItems: function (initialData) {\n    this._syncDataWithItems();\n\n    this._updateItems(initialData);\n  },\n  _syncDataWithItems: function () {\n    var _this = this;\n\n    var layoutData = this.option(\"layoutData\");\n    var userItems = this.option(\"items\");\n\n    if ((0, _type.isDefined)(userItems)) {\n      userItems.forEach(function (item) {\n        if (item.dataField && void 0 === _this._getDataByField(item.dataField)) {\n          var value;\n\n          if (item.editorOptions) {\n            value = item.editorOptions.value;\n          }\n\n          if ((0, _type.isDefined)(value) || item.dataField in layoutData) {\n            _this._updateFieldValue(item.dataField, value);\n          }\n        }\n      });\n    }\n  },\n  _getDataByField: function (dataField) {\n    return dataField ? this.option(\"layoutData.\" + dataField) : null;\n  },\n  _isCheckboxUndefinedStateEnabled: function (editorOption) {\n    if (true === editorOption.allowIndeterminateState && \"dxCheckBox\" === editorOption.editorType) {\n      var nameParts = [\"layoutData\"].concat(_toConsumableArray(editorOption.dataField.split(\".\")));\n      var propertyName = nameParts.pop();\n      var layoutData = this.option(nameParts.join(\".\"));\n      return layoutData && propertyName in layoutData;\n    }\n\n    return false;\n  },\n  _updateFieldValue: function (dataField, value) {\n    var layoutData = this.option(\"layoutData\");\n    var newValue = value;\n\n    if (!(0, _variable_wrapper.isWrapped)(layoutData[dataField]) && (0, _type.isDefined)(dataField)) {\n      this.option(\"layoutData.\" + dataField, newValue);\n    } else {\n      if ((0, _variable_wrapper.isWritableWrapped)(layoutData[dataField])) {\n        newValue = (0, _type.isFunction)(newValue) ? newValue() : newValue;\n        layoutData[dataField](newValue);\n      }\n    }\n\n    this._triggerOnFieldDataChanged({\n      dataField: dataField,\n      value: newValue\n    });\n  },\n  _triggerOnFieldDataChanged: function (args) {\n    this._createActionByOption(\"onFieldDataChanged\")(args);\n  },\n  _updateItems: function (layoutData) {\n    var that = this;\n    var userItems = this.option(\"items\");\n    var isUserItemsExist = (0, _type.isDefined)(userItems);\n    var customizeItem = that.option(\"customizeItem\");\n    var items = isUserItemsExist ? userItems : this._generateItemsByData(layoutData);\n\n    if ((0, _type.isDefined)(items)) {\n      var processedItems = [];\n      (0, _iterator.each)(items, function (index, item) {\n        if (that._isAcceptableItem(item)) {\n          item = that._processItem(item);\n          customizeItem && customizeItem(item);\n\n          if ((0, _type.isObject)(item) && false !== (0, _variable_wrapper.unwrap)(item.visible)) {\n            processedItems.push(item);\n          }\n        }\n      });\n\n      if (!that._itemWatchers.length || !isUserItemsExist) {\n        that._updateItemWatchers(items);\n      }\n\n      this._items = processedItems;\n\n      this._sortItems();\n    }\n  },\n  _cleanItemWatchers: function () {\n    this._itemWatchers.forEach(function (dispose) {\n      dispose();\n    });\n\n    this._itemWatchers = [];\n  },\n  _updateItemWatchers: function (items) {\n    var that = this;\n\n    var watch = that._getWatch();\n\n    items.forEach(function (item) {\n      if ((0, _type.isObject)(item) && (0, _type.isDefined)(item.visible) && (0, _type.isFunction)(watch)) {\n        that._itemWatchers.push(watch(function () {\n          return (0, _variable_wrapper.unwrap)(item.visible);\n        }, function () {\n          that._updateItems(that.option(\"layoutData\"));\n\n          that.repaint();\n        }, {\n          skipImmediate: true\n        }));\n      }\n    });\n  },\n  _generateItemsByData: function (layoutData) {\n    var result = [];\n\n    if ((0, _type.isDefined)(layoutData)) {\n      (0, _iterator.each)(layoutData, function (dataField) {\n        result.push({\n          dataField: dataField\n        });\n      });\n    }\n\n    return result;\n  },\n  _isAcceptableItem: function (item) {\n    var itemField = item.dataField || item;\n\n    var itemData = this._getDataByField(itemField);\n\n    return !((0, _type.isFunction)(itemData) && !(0, _variable_wrapper.isWrapped)(itemData));\n  },\n  _processItem: function (item) {\n    if (\"string\" === typeof item) {\n      item = {\n        dataField: item\n      };\n    }\n\n    if (\"object\" === _typeof(item) && !item.itemType) {\n      item.itemType = SIMPLE_ITEM_TYPE;\n    }\n\n    if (!(0, _type.isDefined)(item.editorType) && (0, _type.isDefined)(item.dataField)) {\n      var value = this._getDataByField(item.dataField);\n\n      item.editorType = (0, _type.isDefined)(value) ? this._getEditorTypeByDataType((0, _type.type)(value)) : FORM_EDITOR_BY_DEFAULT;\n    }\n\n    if (\"dxCheckBox\" === item.editorType) {\n      var _item$allowIndetermin;\n\n      item.allowIndeterminateState = null !== (_item$allowIndetermin = item.allowIndeterminateState) && void 0 !== _item$allowIndetermin ? _item$allowIndetermin : true;\n    }\n\n    return item;\n  },\n  _getEditorTypeByDataType: function (dataType) {\n    switch (dataType) {\n      case \"number\":\n        return \"dxNumberBox\";\n\n      case \"date\":\n        return \"dxDateBox\";\n\n      case \"boolean\":\n        return \"dxCheckBox\";\n\n      default:\n        return \"dxTextBox\";\n    }\n  },\n  _sortItems: function () {\n    (0, _array.normalizeIndexes)(this._items, \"visibleIndex\");\n\n    this._sortIndexes();\n  },\n  _sortIndexes: function () {\n    this._items.sort(function (itemA, itemB) {\n      var indexA = itemA.visibleIndex;\n      var indexB = itemB.visibleIndex;\n      var result;\n\n      if (indexA > indexB) {\n        result = 1;\n      } else {\n        if (indexA < indexB) {\n          result = -1;\n        } else {\n          result = 0;\n        }\n      }\n\n      return result;\n    });\n  },\n  _initMarkup: function () {\n    this._itemsRunTimeInfo.clear();\n\n    this.$element().addClass(FORM_LAYOUT_MANAGER_CLASS);\n    this.callBase();\n\n    this._renderResponsiveBox();\n  },\n  _hasBrowserFlex: function () {\n    return _style2.default.styleProp(LAYOUT_STRATEGY_FLEX) === LAYOUT_STRATEGY_FLEX;\n  },\n  _renderResponsiveBox: function () {\n    var that = this;\n    var templatesInfo = [];\n\n    if (that._items && that._items.length) {\n      var colCount = that._getColCount();\n\n      var $container = (0, _renderer2.default)(\"<div>\").appendTo(that.$element());\n\n      that._prepareItemsWithMerging(colCount);\n\n      var layoutItems = that._generateLayoutItems();\n\n      that._extendItemsWithDefaultTemplateOptions(layoutItems, that._items);\n\n      that._responsiveBox = that._createComponent($container, _responsive_box2.default, that._getResponsiveBoxConfig(layoutItems, colCount, templatesInfo));\n\n      if (!_window2.default.hasWindow()) {\n        that._renderTemplates(templatesInfo);\n      }\n    }\n  },\n  _extendItemsWithDefaultTemplateOptions: function (targetItems, sourceItems) {\n    sourceItems.forEach(function (item) {\n      if (!item.merged) {\n        if ((0, _type.isDefined)(item.disabled)) {\n          targetItems[item.visibleIndex].disabled = item.disabled;\n        }\n\n        if ((0, _type.isDefined)(item.visible)) {\n          targetItems[item.visibleIndex].visible = item.visible;\n        }\n      }\n    });\n  },\n  _itemStateChangedHandler: function (e) {\n    this._refresh();\n  },\n  _renderTemplate: function ($container, item) {\n    switch (item.itemType) {\n      case \"empty\":\n        this._renderEmptyItem($container);\n\n        break;\n\n      case \"button\":\n        this._renderButtonItem(item, $container);\n\n        break;\n\n      default:\n        this._renderFieldItem(item, $container);\n\n    }\n  },\n  _renderTemplates: function (templatesInfo) {\n    var that = this;\n    (0, _iterator.each)(templatesInfo, function (index, info) {\n      that._renderTemplate(info.container, info.formItem);\n    });\n  },\n  _getResponsiveBoxConfig: function (layoutItems, colCount, templatesInfo) {\n    var that = this;\n    var colCountByScreen = that.option(\"colCountByScreen\");\n    var xsColCount = colCountByScreen && colCountByScreen.xs;\n    return {\n      onItemStateChanged: this._itemStateChangedHandler.bind(this),\n      _layoutStrategy: that._hasBrowserFlex() ? LAYOUT_STRATEGY_FLEX : LAYOUT_STRATEGY_FALLBACK,\n      onLayoutChanged: function onLayoutChanged() {\n        var onLayoutChanged = that.option(\"onLayoutChanged\");\n        var isSingleColumnMode = that.isSingleColumnMode();\n\n        if (onLayoutChanged) {\n          that.$element().toggleClass(LAYOUT_MANAGER_ONE_COLUMN, isSingleColumnMode);\n          onLayoutChanged(isSingleColumnMode);\n        }\n      },\n      onContentReady: function (e) {\n        if (_window2.default.hasWindow()) {\n          that._renderTemplates(templatesInfo);\n        }\n\n        if (that.option(\"onLayoutChanged\")) {\n          that.$element().toggleClass(LAYOUT_MANAGER_ONE_COLUMN, that.isSingleColumnMode(e.component));\n        }\n      },\n      itemTemplate: function (e, itemData, itemElement) {\n        if (!e.location) {\n          return;\n        }\n\n        var $itemElement = (0, _renderer2.default)(itemElement);\n        var itemRenderedCountInPreviousRows = e.location.row * colCount;\n        var item = that._items[e.location.col + itemRenderedCountInPreviousRows];\n        var $fieldItem = (0, _renderer2.default)(\"<div>\").addClass(item.cssClass).appendTo($itemElement);\n        templatesInfo.push({\n          container: $fieldItem,\n          formItem: item\n        });\n        $itemElement.toggleClass(SINGLE_COLUMN_ITEM_CONTENT, that.isSingleColumnMode(this));\n\n        if (0 === e.location.row) {\n          $fieldItem.addClass(LAYOUT_MANAGER_FIRST_ROW_CLASS);\n        }\n\n        if (0 === e.location.col) {\n          $fieldItem.addClass(LAYOUT_MANAGER_FIRST_COL_CLASS);\n        }\n\n        var isLastColumn = e.location.col === colCount - 1 || e.location.col + e.location.colspan === colCount;\n\n        var rowsCount = that._getRowsCount();\n\n        var isLastRow = e.location.row === rowsCount - 1;\n\n        if (isLastColumn) {\n          $fieldItem.addClass(LAYOUT_MANAGER_LAST_COL_CLASS);\n        }\n\n        if (isLastRow) {\n          $fieldItem.addClass(LAYOUT_MANAGER_LAST_ROW_CLASS);\n        }\n      },\n      cols: that._generateRatio(colCount),\n      rows: that._generateRatio(that._getRowsCount(), true),\n      dataSource: layoutItems,\n      screenByWidth: that.option(\"screenByWidth\"),\n      singleColumnScreen: xsColCount ? false : \"xs\"\n    };\n  },\n  _getColCount: function () {\n    var colCount = this.option(\"colCount\");\n    var colCountByScreen = this.option(\"colCountByScreen\");\n\n    if (colCountByScreen) {\n      var screenFactor = this.option(\"form\").getTargetScreenFactor();\n\n      if (!screenFactor) {\n        screenFactor = _window2.default.hasWindow() ? _window2.default.getCurrentScreenFactor(this.option(\"screenByWidth\")) : \"lg\";\n      }\n\n      colCount = colCountByScreen[screenFactor] || colCount;\n    }\n\n    if (\"auto\" === colCount) {\n      if (this._cashedColCount) {\n        return this._cashedColCount;\n      }\n\n      this._cashedColCount = colCount = this._getMaxColCount();\n    }\n\n    return colCount < 1 ? 1 : colCount;\n  },\n  _getMaxColCount: function () {\n    if (!_window2.default.hasWindow()) {\n      return 1;\n    }\n\n    var minColWidth = this.option(\"minColWidth\");\n    var width = this.$element().width();\n    var itemsCount = this._items.length;\n    var maxColCount = Math.floor(width / minColWidth) || 1;\n    return itemsCount < maxColCount ? itemsCount : maxColCount;\n  },\n  isCachedColCountObsolete: function () {\n    return this._cashedColCount && this._getMaxColCount() !== this._cashedColCount;\n  },\n  _prepareItemsWithMerging: function (colCount) {\n    var items = this._items.slice(0);\n\n    var item;\n    var itemsMergedByCol;\n    var result = [];\n    var j;\n    var i;\n\n    for (i = 0; i < items.length; i++) {\n      item = items[i];\n      result.push(item);\n\n      if (this.option(\"alignItemLabels\") || item.alignItemLabels || item.colSpan) {\n        item.col = this._getColByIndex(result.length - 1, colCount);\n      }\n\n      if (item.colSpan > 1 && item.col + item.colSpan <= colCount) {\n        itemsMergedByCol = [];\n\n        for (j = 0; j < item.colSpan - 1; j++) {\n          itemsMergedByCol.push({\n            merged: true\n          });\n        }\n\n        result = result.concat(itemsMergedByCol);\n      } else {\n        delete item.colSpan;\n      }\n    }\n\n    this._items = result;\n  },\n  _getColByIndex: function (index, colCount) {\n    return index % colCount;\n  },\n  _generateLayoutItems: function () {\n    var items = this._items;\n\n    var colCount = this._getColCount();\n\n    var result = [];\n    var item;\n    var i;\n\n    for (i = 0; i < items.length; i++) {\n      item = items[i];\n\n      if (!item.merged) {\n        var generatedItem = {\n          location: {\n            row: parseInt(i / colCount),\n            col: this._getColByIndex(i, colCount)\n          }\n        };\n\n        if ((0, _type.isDefined)(item.colSpan)) {\n          generatedItem.location.colspan = item.colSpan;\n        }\n\n        if ((0, _type.isDefined)(item.rowSpan)) {\n          generatedItem.location.rowspan = item.rowSpan;\n        }\n\n        result.push(generatedItem);\n      }\n    }\n\n    return result;\n  },\n  _renderEmptyItem: function ($container) {\n    return $container.addClass(FIELD_EMPTY_ITEM_CLASS).html(\"&nbsp;\");\n  },\n  _getButtonHorizontalAlignment: function (item) {\n    if ((0, _type.isDefined)(item.horizontalAlignment)) {\n      return item.horizontalAlignment;\n    }\n\n    if ((0, _type.isDefined)(item.alignment)) {\n      _ui2.default.log(\"W0001\", \"dxForm\", \"alignment\", \"18.1\", \"Use the 'horizontalAlignment' option in button items instead.\");\n\n      return item.alignment;\n    }\n\n    return \"right\";\n  },\n  _getButtonVerticalAlignment: function (item) {\n    switch (item.verticalAlignment) {\n      case \"center\":\n        return \"center\";\n\n      case \"bottom\":\n        return \"flex-end\";\n\n      default:\n        return \"flex-start\";\n    }\n  },\n  _renderButtonItem: function (item, $container) {\n    var $button = (0, _renderer2.default)(\"<div>\").appendTo($container);\n    var defaultOptions = {\n      validationGroup: this.option(\"validationGroup\")\n    };\n    $container.addClass(FIELD_BUTTON_ITEM_CLASS).css(\"textAlign\", this._getButtonHorizontalAlignment(item));\n    $container.parent().css(\"justifyContent\", this._getButtonVerticalAlignment(item));\n\n    var instance = this._createComponent($button, \"dxButton\", (0, _extend.extend)(defaultOptions, item.buttonOptions));\n\n    this._itemsRunTimeInfo.add({\n      item: item,\n      widgetInstance: instance,\n      guid: item.guid,\n      $itemContainer: $container\n    });\n\n    this._addItemClasses($container, item.col);\n\n    return $button;\n  },\n  _addItemClasses: function ($item, column) {\n    $item.addClass(FIELD_ITEM_CLASS).addClass(this.option(\"cssItemClass\")).addClass((0, _type.isDefined)(column) ? \"dx-col-\" + column : \"\");\n  },\n  _renderFieldItem: function (item, $container) {\n    var that = this;\n\n    var name = that._getName(item);\n\n    var id = that.getItemID(name);\n    var isRequired = (0, _type.isDefined)(item.isRequired) ? item.isRequired : !!that._hasRequiredRuleInSet(item.validationRules);\n\n    var labelOptions = that._getLabelOptions(item, id, isRequired);\n\n    var $editor = (0, _renderer2.default)(\"<div>\");\n    var helpID = item.helpText ? \"dx-\" + new _guid2.default() : null;\n    var $label;\n\n    this._addItemClasses($container, item.col);\n\n    $container.addClass(isRequired ? FIELD_ITEM_REQUIRED_CLASS : FIELD_ITEM_OPTIONAL_CLASS);\n\n    if (labelOptions.visible && labelOptions.text) {\n      $label = that._renderLabel(labelOptions).appendTo($container);\n    }\n\n    if (item.itemType === SIMPLE_ITEM_TYPE) {\n      if (that._isLabelNeedBaselineAlign(item) && \"top\" !== labelOptions.location) {\n        $container.addClass(FIELD_ITEM_LABEL_ALIGN_CLASS);\n      }\n\n      that._hasBrowserFlex() && $container.addClass(FLEX_LAYOUT_CLASS);\n    }\n\n    $editor.data(\"dx-form-item\", item);\n\n    that._appendEditorToField({\n      $fieldItem: $container,\n      $label: $label,\n      $editor: $editor,\n      labelOptions: labelOptions\n    });\n\n    var instance = that._renderEditor({\n      $container: $editor,\n      dataField: item.dataField,\n      name: item.name,\n      editorType: item.editorType,\n      editorOptions: item.editorOptions,\n      template: that._getTemplateByFieldItem(item),\n      isRequired: isRequired,\n      helpID: helpID,\n      labelID: labelOptions.labelID,\n      id: id,\n      validationBoundary: that.option(\"validationBoundary\"),\n      allowIndeterminateState: item.allowIndeterminateState\n    });\n\n    this._itemsRunTimeInfo.add({\n      item: item,\n      widgetInstance: instance,\n      guid: item.guid,\n      $itemContainer: $container\n    });\n\n    var editorElem = $editor.children().first();\n    var $validationTarget = editorElem.hasClass(TEMPLATE_WRAPPER_CLASS) ? editorElem.children().first() : editorElem;\n\n    if ($validationTarget && $validationTarget.data(\"dx-validation-target\")) {\n      that._renderValidator($validationTarget, item);\n    }\n\n    that._renderHelpText(item, $editor, helpID);\n\n    that._attachClickHandler($label, $editor, item.editorType);\n  },\n  _hasRequiredRuleInSet: function (rules) {\n    var hasRequiredRule;\n\n    if (rules && rules.length) {\n      (0, _iterator.each)(rules, function (index, rule) {\n        if (\"required\" === rule.type) {\n          hasRequiredRule = true;\n          return false;\n        }\n      });\n    }\n\n    return hasRequiredRule;\n  },\n  _getName: function (item) {\n    return item.dataField || item.name;\n  },\n  _isLabelNeedBaselineAlign: function (item) {\n    var largeEditors = [\"dxTextArea\", \"dxRadioGroup\", \"dxCalendar\", \"dxHtmlEditor\"];\n    return !!item.helpText && !this._hasBrowserFlex() || (0, _array.inArray)(item.editorType, largeEditors) !== -1;\n  },\n  _isLabelNeedId: function (item) {\n    var editorsRequiringIdForLabel = [\"dxRadioGroup\", \"dxCheckBox\", \"dxLookup\", \"dxSlider\", \"dxRangeSlider\", \"dxSwitch\", \"dxHtmlEditor\"];\n    return (0, _array.inArray)(item.editorType, editorsRequiringIdForLabel) !== -1;\n  },\n  _getLabelOptions: function (item, id, isRequired) {\n    var labelOptions = (0, _extend.extend)({\n      showColon: this.option(\"showColonAfterLabel\"),\n      location: this.option(\"labelLocation\"),\n      id: id,\n      visible: true,\n      isRequired: isRequired\n    }, item ? item.label : {});\n\n    if (this._isLabelNeedId(item)) {\n      labelOptions.labelID = \"dx-label-\".concat(new _guid2.default());\n    }\n\n    if (!labelOptions.text && item.dataField) {\n      labelOptions.text = _inflector2.default.captionize(item.dataField);\n    }\n\n    if (labelOptions.text) {\n      labelOptions.text += labelOptions.showColon ? \":\" : \"\";\n    }\n\n    return labelOptions;\n  },\n  _renderLabel: function (options) {\n    var text = options.text,\n        id = options.id,\n        location = options.location,\n        alignment = options.alignment,\n        isRequired = options.isRequired,\n        _options$labelID = options.labelID,\n        labelID = void 0 === _options$labelID ? null : _options$labelID;\n\n    if ((0, _type.isDefined)(text) && text.length > 0) {\n      var labelClasses = FIELD_ITEM_LABEL_CLASS + \" \" + FIELD_ITEM_LABEL_LOCATION_CLASS + location;\n      var $label = (0, _renderer2.default)(\"<label>\").addClass(labelClasses).attr(\"for\", id).attr(\"id\", labelID);\n      var $labelContent = (0, _renderer2.default)(\"<span>\").addClass(FIELD_ITEM_LABEL_CONTENT_CLASS).appendTo($label);\n      (0, _renderer2.default)(\"<span>\").addClass(FIELD_ITEM_LABEL_TEXT_CLASS).text(text).appendTo($labelContent);\n\n      if (alignment) {\n        $label.css(\"textAlign\", alignment);\n      }\n\n      $labelContent.append(this._renderLabelMark(isRequired));\n      return $label;\n    }\n  },\n  _renderLabelMark: function (isRequired) {\n    var $mark;\n\n    var requiredMarksConfig = this._getRequiredMarksConfig();\n\n    var isRequiredMark = requiredMarksConfig.showRequiredMark && isRequired;\n    var isOptionalMark = requiredMarksConfig.showOptionalMark && !isRequired;\n\n    if (isRequiredMark || isOptionalMark) {\n      var markClass = isRequiredMark ? FIELD_ITEM_REQUIRED_MARK_CLASS : FIELD_ITEM_OPTIONAL_MARK_CLASS;\n      var markText = isRequiredMark ? requiredMarksConfig.requiredMark : requiredMarksConfig.optionalMark;\n      $mark = (0, _renderer2.default)(\"<span>\").addClass(markClass).html(\"&nbsp\" + markText);\n    }\n\n    return $mark;\n  },\n  _getRequiredMarksConfig: function () {\n    if (!this._cashedRequiredConfig) {\n      this._cashedRequiredConfig = {\n        showRequiredMark: this.option(\"showRequiredMark\"),\n        showOptionalMark: this.option(\"showOptionalMark\"),\n        requiredMark: this.option(\"requiredMark\"),\n        optionalMark: this.option(\"optionalMark\")\n      };\n    }\n\n    return this._cashedRequiredConfig;\n  },\n  _renderEditor: function (options) {\n    var dataValue = this._getDataByField(options.dataField);\n\n    var defaultEditorOptions = void 0 !== dataValue || this._isCheckboxUndefinedStateEnabled(options) ? {\n      value: dataValue\n    } : {};\n    var isDeepExtend = true;\n\n    if (EDITORS_WITH_ARRAY_VALUE.indexOf(options.editorType) !== -1) {\n      defaultEditorOptions.value = defaultEditorOptions.value || [];\n    }\n\n    var formInstance = this.option(\"form\");\n    var editorOptions = (0, _extend.extend)(isDeepExtend, defaultEditorOptions, options.editorOptions, {\n      inputAttr: {\n        id: options.id\n      },\n      validationBoundary: options.validationBoundary,\n      stylingMode: formInstance && formInstance.option(\"stylingMode\")\n    });\n\n    this._replaceDataOptions(options.editorOptions, editorOptions);\n\n    var renderOptions = {\n      editorType: options.editorType,\n      dataField: options.dataField,\n      template: options.template,\n      name: options.name,\n      helpID: options.helpID,\n      labelID: options.labelID,\n      isRequired: options.isRequired\n    };\n    return this._createEditor(options.$container, renderOptions, editorOptions);\n  },\n  _replaceDataOptions: function (originalOptions, resultOptions) {\n    if (originalOptions) {\n      DATA_OPTIONS.forEach(function (item) {\n        if (resultOptions[item]) {\n          resultOptions[item] = originalOptions[item];\n        }\n      });\n    }\n  },\n  _renderValidator: function ($editor, item) {\n    var fieldName = this._getFieldLabelName(item);\n\n    var validationRules = this._prepareValidationRules(item.validationRules, item.isRequired, item.itemType, fieldName);\n\n    if (Array.isArray(validationRules) && validationRules.length) {\n      this._createComponent($editor, _validator2.default, {\n        validationRules: validationRules,\n        validationGroup: this.option(\"validationGroup\"),\n        dataGetter: function () {\n          return {\n            formItem: item\n          };\n        }\n      });\n    }\n  },\n  _getFieldLabelName: function (item) {\n    var isItemHaveCustomLabel = item.label && item.label.text;\n    var itemName = isItemHaveCustomLabel ? null : this._getName(item);\n    return isItemHaveCustomLabel ? item.label.text : itemName && _inflector2.default.captionize(itemName);\n  },\n  _prepareValidationRules: function (userValidationRules, isItemRequired, itemType, itemName) {\n    var isSimpleItem = itemType === SIMPLE_ITEM_TYPE;\n    var validationRules;\n\n    if (isSimpleItem) {\n      if (userValidationRules) {\n        validationRules = userValidationRules;\n      } else {\n        var requiredMessage = _string2.default.format(this.option(\"requiredMessage\"), itemName || \"\");\n\n        validationRules = isItemRequired ? [{\n          type: \"required\",\n          message: requiredMessage\n        }] : null;\n      }\n    }\n\n    return validationRules;\n  },\n  _addWrapperInvalidClass: function (editorInstance) {\n    var wrapperClass = \".\" + FIELD_ITEM_CONTENT_WRAPPER_CLASS;\n\n    var toggleInvalidClass = function (e) {\n      (0, _renderer2.default)(e.element).parents(wrapperClass).toggleClass(INVALID_CLASS, e.component._isFocused() && false === e.component.option(\"isValid\"));\n    };\n\n    editorInstance.on(\"focusIn\", toggleInvalidClass).on(\"focusOut\", toggleInvalidClass).on(\"enterKey\", toggleInvalidClass);\n  },\n  _createEditor: function ($container, renderOptions, editorOptions) {\n    var that = this;\n    var template = renderOptions.template;\n    var editorInstance;\n\n    if (renderOptions.dataField && !editorOptions.name) {\n      editorOptions.name = renderOptions.dataField;\n    }\n\n    that._addItemContentClasses($container);\n\n    if (template) {\n      var data = {\n        dataField: renderOptions.dataField,\n        editorType: renderOptions.editorType,\n        editorOptions: editorOptions,\n        component: that._getComponentOwner(),\n        name: renderOptions.name\n      };\n      template.render({\n        model: data,\n        container: _dom2.default.getPublicElement($container)\n      });\n    } else {\n      var $editor = (0, _renderer2.default)(\"<div>\").appendTo($container);\n\n      try {\n        editorInstance = that._createComponent($editor, renderOptions.editorType, editorOptions);\n        editorInstance.setAria(\"describedby\", renderOptions.helpID);\n        editorInstance.setAria(\"labelledby\", renderOptions.labelID);\n        editorInstance.setAria(\"required\", renderOptions.isRequired);\n\n        if (_themes2.default.isMaterial()) {\n          that._addWrapperInvalidClass(editorInstance);\n        }\n\n        if (renderOptions.dataField) {\n          that._bindDataField(editorInstance, renderOptions, $container);\n        }\n      } catch (e) {\n        _ui2.default.log(\"E1035\", e.message);\n      }\n    }\n\n    return editorInstance;\n  },\n  _getComponentOwner: function () {\n    return this.option(\"form\") || this;\n  },\n  _bindDataField: function (editorInstance, renderOptions, $container) {\n    var componentOwner = this._getComponentOwner();\n\n    editorInstance.on(\"enterKey\", function (args) {\n      componentOwner._createActionByOption(\"onEditorEnterKey\")((0, _extend.extend)(args, {\n        dataField: renderOptions.dataField\n      }));\n    });\n\n    this._createWatcher(editorInstance, $container, renderOptions);\n\n    this.linkEditorToDataField(editorInstance, renderOptions.dataField, renderOptions.editorType);\n  },\n  _createWatcher: function (editorInstance, $container, renderOptions) {\n    var that = this;\n\n    var watch = that._getWatch();\n\n    if (!(0, _type.isFunction)(watch)) {\n      return;\n    }\n\n    var dispose = watch(function () {\n      return that._getDataByField(renderOptions.dataField);\n    }, function () {\n      editorInstance.option(\"value\", that._getDataByField(renderOptions.dataField));\n    }, {\n      deep: true,\n      skipImmediate: true\n    });\n\n    _events_engine2.default.on($container, _remove_event2.default, dispose);\n  },\n  _getWatch: function () {\n    if (!(0, _type.isDefined)(this._watch)) {\n      var formInstance = this.option(\"form\");\n      this._watch = formInstance && formInstance.option(\"integrationOptions.watchMethod\");\n    }\n\n    return this._watch;\n  },\n  _addItemContentClasses: function ($itemContent) {\n    var locationSpecificClass = this._getItemContentLocationSpecificClass();\n\n    $itemContent.addClass([FIELD_ITEM_CONTENT_CLASS, locationSpecificClass].join(\" \"));\n  },\n  _getItemContentLocationSpecificClass: function () {\n    var labelLocation = this.option(\"labelLocation\");\n    var oppositeClasses = {\n      right: \"left\",\n      left: \"right\",\n      top: \"bottom\"\n    };\n    return FIELD_ITEM_CONTENT_LOCATION_CLASS + oppositeClasses[labelLocation];\n  },\n  _createComponent: function ($editor, type, editorOptions) {\n    var that = this;\n    var readOnlyState = this.option(\"readOnly\");\n    var instance = that.callBase($editor, type, editorOptions);\n    readOnlyState && instance.option(\"readOnly\", readOnlyState);\n    that.on(\"optionChanged\", function (args) {\n      if (\"readOnly\" === args.name && !(0, _type.isDefined)(editorOptions.readOnly)) {\n        instance.option(args.name, args.value);\n      }\n    });\n    return instance;\n  },\n  _getTemplateByFieldItem: function (fieldItem) {\n    return fieldItem.template ? this._getTemplate(fieldItem.template) : null;\n  },\n  _appendEditorToField: function (params) {\n    if (params.$label) {\n      var location = params.labelOptions.location;\n\n      if (\"top\" === location || \"left\" === location) {\n        params.$fieldItem.append(params.$editor);\n      }\n\n      if (\"right\" === location) {\n        params.$fieldItem.prepend(params.$editor);\n      }\n\n      this._addInnerItemAlignmentClass(params.$fieldItem, location);\n    } else {\n      params.$fieldItem.append(params.$editor);\n    }\n  },\n  _addInnerItemAlignmentClass: function ($fieldItem, location) {\n    if (\"top\" === location) {\n      $fieldItem.addClass(LABEL_VERTICAL_ALIGNMENT_CLASS);\n    } else {\n      $fieldItem.addClass(LABEL_HORIZONTAL_ALIGNMENT_CLASS);\n    }\n  },\n  _renderHelpText: function (fieldItem, $editor, helpID) {\n    var helpText = fieldItem.helpText;\n    var isSimpleItem = fieldItem.itemType === SIMPLE_ITEM_TYPE;\n\n    if (helpText && isSimpleItem) {\n      var $editorWrapper = (0, _renderer2.default)(\"<div>\").addClass(FIELD_ITEM_CONTENT_WRAPPER_CLASS);\n      $editor.wrap($editorWrapper);\n      (0, _renderer2.default)(\"<div>\").addClass(FIELD_ITEM_HELP_TEXT_CLASS).attr(\"id\", helpID).text(helpText).appendTo($editor.parent());\n    }\n  },\n  _attachClickHandler: function ($label, $editor, editorType) {\n    var isBooleanEditors = \"dxCheckBox\" === editorType || \"dxSwitch\" === editorType;\n\n    if ($label && isBooleanEditors) {\n      _events_engine2.default.on($label, _click2.default.name, function () {\n        _events_engine2.default.trigger($editor.children(), _click2.default.name);\n      });\n    }\n  },\n  _generateRatio: function (count, isAutoSize) {\n    var result = [];\n    var ratio;\n    var i;\n\n    for (i = 0; i < count; i++) {\n      ratio = {\n        ratio: 1\n      };\n\n      if (isAutoSize) {\n        ratio.baseSize = \"auto\";\n      }\n\n      result.push(ratio);\n    }\n\n    return result;\n  },\n  _getRowsCount: function () {\n    return Math.ceil(this._items.length / this._getColCount());\n  },\n  _updateReferencedOptions: function (newLayoutData) {\n    var _this2 = this;\n\n    var layoutData = this.option(\"layoutData\");\n\n    if ((0, _type.isObject)(layoutData)) {\n      Object.getOwnPropertyNames(layoutData).forEach(function (property) {\n        return delete _this2._optionsByReference[\"layoutData.\" + property];\n      });\n    }\n\n    if ((0, _type.isObject)(newLayoutData)) {\n      Object.getOwnPropertyNames(newLayoutData).forEach(function (property) {\n        return _this2._optionsByReference[\"layoutData.\" + property] = true;\n      });\n    }\n  },\n  _resetWidget: function (instance) {\n    this._disableEditorValueChangedHandler = true;\n    instance.reset();\n    this._disableEditorValueChangedHandler = false;\n    instance.option(\"isValid\", true);\n  },\n  _optionChanged: function (args) {\n    var _this3 = this;\n\n    if (0 === args.fullName.search(\"layoutData.\")) {\n      return;\n    }\n\n    switch (args.name) {\n      case \"showRequiredMark\":\n      case \"showOptionalMark\":\n      case \"requiredMark\":\n      case \"optionalMark\":\n        this._cashedRequiredConfig = null;\n\n        this._invalidate();\n\n        break;\n\n      case \"layoutData\":\n        this._updateReferencedOptions(args.value);\n\n        if (this.option(\"items\")) {\n          if (!(0, _type.isEmptyObject)(args.value)) {\n            this._itemsRunTimeInfo.each(function (_, itemRunTimeInfo) {\n              if ((0, _type.isDefined)(itemRunTimeInfo.item)) {\n                var dataField = itemRunTimeInfo.item.dataField;\n\n                if (dataField && (0, _type.isDefined)(itemRunTimeInfo.widgetInstance)) {\n                  var valueGetter = _data2.default.compileGetter(dataField);\n\n                  var dataValue = valueGetter(args.value);\n\n                  if (void 0 !== dataValue || _this3._isCheckboxUndefinedStateEnabled(itemRunTimeInfo.item)) {\n                    itemRunTimeInfo.widgetInstance.option(\"value\", dataValue);\n                  } else {\n                    _this3._resetWidget(itemRunTimeInfo.widgetInstance);\n                  }\n                }\n              }\n            });\n          }\n        } else {\n          this._initDataAndItems(args.value);\n\n          this._invalidate();\n        }\n\n        break;\n\n      case \"items\":\n        this._cleanItemWatchers();\n\n        this._initDataAndItems(args.value);\n\n        this._invalidate();\n\n        break;\n\n      case \"alignItemLabels\":\n      case \"labelLocation\":\n      case \"requiredMessage\":\n        this._invalidate();\n\n        break;\n\n      case \"customizeItem\":\n        this._updateItems(this.option(\"layoutData\"));\n\n        this._invalidate();\n\n        break;\n\n      case \"colCount\":\n        this._resetColCount();\n\n        break;\n\n      case \"minColWidth\":\n        if (\"auto\" === this.option(\"colCount\")) {\n          this._resetColCount();\n        }\n\n        break;\n\n      case \"readOnly\":\n        break;\n\n      case \"width\":\n        this.callBase(args);\n\n        if (\"auto\" === this.option(\"colCount\")) {\n          this._resetColCount();\n        }\n\n        break;\n\n      case \"onFieldDataChanged\":\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _resetColCount: function () {\n    this._cashedColCount = null;\n\n    this._invalidate();\n  },\n  linkEditorToDataField: function (editorInstance, dataField) {\n    var _this4 = this;\n\n    this.on(\"optionChanged\", function (args) {\n      if (args.fullName === \"layoutData.\".concat(dataField)) {\n        editorInstance._setOptionWithoutOptionChange(\"value\", args.value);\n      }\n    });\n    editorInstance.on(\"valueChanged\", function (args) {\n      var isValueReferenceType = (0, _type.isObject)(args.value) || Array.isArray(args.value);\n\n      if (!_this4._disableEditorValueChangedHandler && !(isValueReferenceType && args.value === args.previousValue)) {\n        _this4._updateFieldValue(dataField, args.value);\n      }\n    });\n  },\n  _dimensionChanged: function () {\n    if (\"auto\" === this.option(\"colCount\") && this.isCachedColCountObsolete()) {\n      this._eventsStrategy.fireEvent(\"autoColCountChanged\");\n    }\n  },\n  getItemID: function (name) {\n    var formInstance = this.option(\"form\");\n    return formInstance && formInstance.getItemID(name);\n  },\n  updateData: function (data, value) {\n    var that = this;\n\n    if ((0, _type.isObject)(data)) {\n      (0, _iterator.each)(data, function (dataField, fieldValue) {\n        that._updateFieldValue(dataField, fieldValue);\n      });\n    } else {\n      if (\"string\" === typeof data) {\n        that._updateFieldValue(data, value);\n      }\n    }\n  },\n  getEditor: function (field) {\n    return this._itemsRunTimeInfo.findWidgetInstanceByDataField(field) || this._itemsRunTimeInfo.findWidgetInstanceByName(field);\n  },\n  isSingleColumnMode: function (component) {\n    var responsiveBox = this._responsiveBox || component;\n\n    if (responsiveBox) {\n      return responsiveBox.option(\"currentScreenFactor\") === responsiveBox.option(\"singleColumnScreen\");\n    }\n  },\n  getItemsRunTimeInfo: function () {\n    return this._itemsRunTimeInfo;\n  }\n});\n\n(0, _component_registrator2.default)(\"dxLayoutManager\", LayoutManager);\nmodule.exports = LayoutManager;","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/ticketSystem/frontend/node_modules/devextreme/ui/form/ui.form.layout_manager.js"],"names":["_renderer","require","_renderer2","_interopRequireDefault","_events_engine","_events_engine2","_guid","_guid2","_uiForm","_uiForm2","_component_registrator","_component_registrator2","_type","_dom","_dom2","_variable_wrapper","_window","_window2","_string","_string2","_iterator","_extend","_array","_data","_data2","_remove_event","_remove_event2","_click","_click2","_ui","_ui2","_message","_message2","_style","_style2","_inflector","_inflector2","_ui3","_ui4","_validator","_validator2","_responsive_box","_responsive_box2","_themes","_themes2","obj","__esModule","_typeof","Symbol","iterator","constructor","prototype","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","Object","toString","call","slice","name","Array","from","test","iter","isArray","len","length","i","arr2","FORM_EDITOR_BY_DEFAULT","FIELD_ITEM_CLASS","FIELD_EMPTY_ITEM_CLASS","FIELD_BUTTON_ITEM_CLASS","FIELD_ITEM_REQUIRED_CLASS","FIELD_ITEM_OPTIONAL_CLASS","FIELD_ITEM_REQUIRED_MARK_CLASS","FIELD_ITEM_OPTIONAL_MARK_CLASS","FIELD_ITEM_LABEL_CLASS","FIELD_ITEM_LABEL_ALIGN_CLASS","FIELD_ITEM_LABEL_CONTENT_CLASS","FIELD_ITEM_LABEL_TEXT_CLASS","FIELD_ITEM_LABEL_LOCATION_CLASS","FIELD_ITEM_CONTENT_CLASS","FIELD_ITEM_CONTENT_LOCATION_CLASS","FIELD_ITEM_CONTENT_WRAPPER_CLASS","FIELD_ITEM_HELP_TEXT_CLASS","SINGLE_COLUMN_ITEM_CONTENT","LABEL_HORIZONTAL_ALIGNMENT_CLASS","LABEL_VERTICAL_ALIGNMENT_CLASS","FORM_LAYOUT_MANAGER_CLASS","LAYOUT_MANAGER_FIRST_ROW_CLASS","LAYOUT_MANAGER_LAST_ROW_CLASS","LAYOUT_MANAGER_FIRST_COL_CLASS","LAYOUT_MANAGER_LAST_COL_CLASS","LAYOUT_MANAGER_ONE_COLUMN","FLEX_LAYOUT_CLASS","INVALID_CLASS","LAYOUT_STRATEGY_FLEX","LAYOUT_STRATEGY_FALLBACK","SIMPLE_ITEM_TYPE","TEMPLATE_WRAPPER_CLASS","DATA_OPTIONS","EDITORS_WITH_ARRAY_VALUE","LayoutManager","default","inherit","_getDefaultOptions","extend","callBase","layoutData","readOnly","colCount","colCountByScreen","labelLocation","onFieldDataChanged","onEditorEnterKey","customizeItem","alignItemLabels","minColWidth","showRequiredMark","screenByWidth","showOptionalMark","requiredMark","optionalMark","format","requiredMessage","getFormatter","_setOptionsByReference","_optionsByReference","validationGroup","_init","option","_itemWatchers","_itemsRunTimeInfo","_updateReferencedOptions","_initDataAndItems","_dispose","_cleanItemWatchers","initialData","_syncDataWithItems","_updateItems","_this","userItems","isDefined","forEach","item","dataField","_getDataByField","value","editorOptions","_updateFieldValue","_isCheckboxUndefinedStateEnabled","editorOption","allowIndeterminateState","editorType","nameParts","concat","split","propertyName","pop","join","newValue","isWrapped","isWritableWrapped","isFunction","_triggerOnFieldDataChanged","args","_createActionByOption","that","isUserItemsExist","items","_generateItemsByData","processedItems","each","index","_isAcceptableItem","_processItem","isObject","unwrap","visible","push","_updateItemWatchers","_items","_sortItems","dispose","watch","_getWatch","repaint","skipImmediate","result","itemField","itemData","itemType","_getEditorTypeByDataType","type","_item$allowIndetermin","dataType","normalizeIndexes","_sortIndexes","sort","itemA","itemB","indexA","visibleIndex","indexB","_initMarkup","clear","$element","addClass","_renderResponsiveBox","_hasBrowserFlex","styleProp","templatesInfo","_getColCount","$container","appendTo","_prepareItemsWithMerging","layoutItems","_generateLayoutItems","_extendItemsWithDefaultTemplateOptions","_responsiveBox","_createComponent","_getResponsiveBoxConfig","hasWindow","_renderTemplates","targetItems","sourceItems","merged","disabled","_itemStateChangedHandler","e","_refresh","_renderTemplate","_renderEmptyItem","_renderButtonItem","_renderFieldItem","info","container","formItem","xsColCount","xs","onItemStateChanged","bind","_layoutStrategy","onLayoutChanged","isSingleColumnMode","toggleClass","onContentReady","component","itemTemplate","itemElement","location","$itemElement","itemRenderedCountInPreviousRows","row","col","$fieldItem","cssClass","isLastColumn","colspan","rowsCount","_getRowsCount","isLastRow","cols","_generateRatio","rows","dataSource","singleColumnScreen","screenFactor","getTargetScreenFactor","getCurrentScreenFactor","_cashedColCount","_getMaxColCount","width","itemsCount","maxColCount","Math","floor","isCachedColCountObsolete","itemsMergedByCol","j","colSpan","_getColByIndex","generatedItem","parseInt","rowSpan","rowspan","html","_getButtonHorizontalAlignment","horizontalAlignment","alignment","log","_getButtonVerticalAlignment","verticalAlignment","$button","defaultOptions","css","parent","instance","buttonOptions","add","widgetInstance","guid","$itemContainer","_addItemClasses","$item","column","_getName","id","getItemID","isRequired","_hasRequiredRuleInSet","validationRules","labelOptions","_getLabelOptions","$editor","helpID","helpText","$label","text","_renderLabel","_isLabelNeedBaselineAlign","data","_appendEditorToField","_renderEditor","template","_getTemplateByFieldItem","labelID","validationBoundary","editorElem","children","first","$validationTarget","hasClass","_renderValidator","_renderHelpText","_attachClickHandler","rules","hasRequiredRule","rule","largeEditors","inArray","_isLabelNeedId","editorsRequiringIdForLabel","showColon","label","captionize","options","_options$labelID","labelClasses","attr","$labelContent","append","_renderLabelMark","$mark","requiredMarksConfig","_getRequiredMarksConfig","isRequiredMark","isOptionalMark","markClass","markText","_cashedRequiredConfig","dataValue","defaultEditorOptions","isDeepExtend","indexOf","formInstance","inputAttr","stylingMode","_replaceDataOptions","renderOptions","_createEditor","originalOptions","resultOptions","fieldName","_getFieldLabelName","_prepareValidationRules","dataGetter","isItemHaveCustomLabel","itemName","userValidationRules","isItemRequired","isSimpleItem","message","_addWrapperInvalidClass","editorInstance","wrapperClass","toggleInvalidClass","element","parents","_isFocused","on","_addItemContentClasses","_getComponentOwner","render","model","getPublicElement","setAria","isMaterial","_bindDataField","componentOwner","_createWatcher","linkEditorToDataField","deep","_watch","$itemContent","locationSpecificClass","_getItemContentLocationSpecificClass","oppositeClasses","right","left","top","readOnlyState","fieldItem","_getTemplate","params","prepend","_addInnerItemAlignmentClass","$editorWrapper","wrap","isBooleanEditors","trigger","count","isAutoSize","ratio","baseSize","ceil","newLayoutData","_this2","getOwnPropertyNames","property","_resetWidget","_disableEditorValueChangedHandler","reset","_optionChanged","_this3","fullName","search","_invalidate","isEmptyObject","_","itemRunTimeInfo","valueGetter","compileGetter","_resetColCount","_this4","_setOptionWithoutOptionChange","isValueReferenceType","previousValue","_dimensionChanged","_eventsStrategy","fireEvent","updateData","fieldValue","getEditor","field","findWidgetInstanceByDataField","findWidgetInstanceByName","responsiveBox","getItemsRunTimeInfo","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/form/ui.form.layout_manager.js)\r\n * Version: 20.1.7\r\n * Build date: Tue Aug 25 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nvar _renderer = require(\"../../core/renderer\");\r\nvar _renderer2 = _interopRequireDefault(_renderer);\r\nvar _events_engine = require(\"../../events/core/events_engine\");\r\nvar _events_engine2 = _interopRequireDefault(_events_engine);\r\nvar _guid = require(\"../../core/guid\");\r\nvar _guid2 = _interopRequireDefault(_guid);\r\nvar _uiForm = require(\"./ui.form.items_runtime_info\");\r\nvar _uiForm2 = _interopRequireDefault(_uiForm);\r\nvar _component_registrator = require(\"../../core/component_registrator\");\r\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _dom = require(\"../../core/utils/dom\");\r\nvar _dom2 = _interopRequireDefault(_dom);\r\nvar _variable_wrapper = require(\"../../core/utils/variable_wrapper\");\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _window2 = _interopRequireDefault(_window);\r\nvar _string = require(\"../../core/utils/string\");\r\nvar _string2 = _interopRequireDefault(_string);\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _data = require(\"../../core/utils/data\");\r\nvar _data2 = _interopRequireDefault(_data);\r\nvar _remove_event = require(\"../../core/remove_event\");\r\nvar _remove_event2 = _interopRequireDefault(_remove_event);\r\nvar _click = require(\"../../events/click\");\r\nvar _click2 = _interopRequireDefault(_click);\r\nvar _ui = require(\"../widget/ui.errors\");\r\nvar _ui2 = _interopRequireDefault(_ui);\r\nvar _message = require(\"../../localization/message\");\r\nvar _message2 = _interopRequireDefault(_message);\r\nvar _style = require(\"../../core/utils/style\");\r\nvar _style2 = _interopRequireDefault(_style);\r\nvar _inflector = require(\"../../core/utils/inflector\");\r\nvar _inflector2 = _interopRequireDefault(_inflector);\r\nvar _ui3 = require(\"../widget/ui.widget\");\r\nvar _ui4 = _interopRequireDefault(_ui3);\r\nvar _validator = require(\"../validator\");\r\nvar _validator2 = _interopRequireDefault(_validator);\r\nvar _responsive_box = require(\"../responsive_box\");\r\nvar _responsive_box2 = _interopRequireDefault(_responsive_box);\r\nvar _themes = require(\"../themes\");\r\nvar _themes2 = _interopRequireDefault(_themes);\r\nrequire(\"../text_box\");\r\nrequire(\"../number_box\");\r\nrequire(\"../check_box\");\r\nrequire(\"../date_box\");\r\nrequire(\"../button\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _typeof(obj) {\r\n    \"@babel/helpers - typeof\";\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\n\r\nfunction _toConsumableArray(arr) {\r\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread()\r\n}\r\n\r\nfunction _nonIterableSpread() {\r\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")\r\n}\r\n\r\nfunction _unsupportedIterableToArray(o, minLen) {\r\n    if (!o) {\r\n        return\r\n    }\r\n    if (\"string\" === typeof o) {\r\n        return _arrayLikeToArray(o, minLen)\r\n    }\r\n    var n = Object.prototype.toString.call(o).slice(8, -1);\r\n    if (\"Object\" === n && o.constructor) {\r\n        n = o.constructor.name\r\n    }\r\n    if (\"Map\" === n || \"Set\" === n) {\r\n        return Array.from(o)\r\n    }\r\n    if (\"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) {\r\n        return _arrayLikeToArray(o, minLen)\r\n    }\r\n}\r\n\r\nfunction _iterableToArray(iter) {\r\n    if (\"undefined\" !== typeof Symbol && Symbol.iterator in Object(iter)) {\r\n        return Array.from(iter)\r\n    }\r\n}\r\n\r\nfunction _arrayWithoutHoles(arr) {\r\n    if (Array.isArray(arr)) {\r\n        return _arrayLikeToArray(arr)\r\n    }\r\n}\r\n\r\nfunction _arrayLikeToArray(arr, len) {\r\n    if (null == len || len > arr.length) {\r\n        len = arr.length\r\n    }\r\n    for (var i = 0, arr2 = new Array(len); i < len; i++) {\r\n        arr2[i] = arr[i]\r\n    }\r\n    return arr2\r\n}\r\nvar FORM_EDITOR_BY_DEFAULT = \"dxTextBox\";\r\nvar FIELD_ITEM_CLASS = \"dx-field-item\";\r\nvar FIELD_EMPTY_ITEM_CLASS = \"dx-field-empty-item\";\r\nvar FIELD_BUTTON_ITEM_CLASS = \"dx-field-button-item\";\r\nvar FIELD_ITEM_REQUIRED_CLASS = \"dx-field-item-required\";\r\nvar FIELD_ITEM_OPTIONAL_CLASS = \"dx-field-item-optional\";\r\nvar FIELD_ITEM_REQUIRED_MARK_CLASS = \"dx-field-item-required-mark\";\r\nvar FIELD_ITEM_OPTIONAL_MARK_CLASS = \"dx-field-item-optional-mark\";\r\nvar FIELD_ITEM_LABEL_CLASS = \"dx-field-item-label\";\r\nvar FIELD_ITEM_LABEL_ALIGN_CLASS = \"dx-field-item-label-align\";\r\nvar FIELD_ITEM_LABEL_CONTENT_CLASS = \"dx-field-item-label-content\";\r\nvar FIELD_ITEM_LABEL_TEXT_CLASS = \"dx-field-item-label-text\";\r\nvar FIELD_ITEM_LABEL_LOCATION_CLASS = \"dx-field-item-label-location-\";\r\nvar FIELD_ITEM_CONTENT_CLASS = \"dx-field-item-content\";\r\nvar FIELD_ITEM_CONTENT_LOCATION_CLASS = \"dx-field-item-content-location-\";\r\nvar FIELD_ITEM_CONTENT_WRAPPER_CLASS = \"dx-field-item-content-wrapper\";\r\nvar FIELD_ITEM_HELP_TEXT_CLASS = \"dx-field-item-help-text\";\r\nvar SINGLE_COLUMN_ITEM_CONTENT = \"dx-single-column-item-content\";\r\nvar LABEL_HORIZONTAL_ALIGNMENT_CLASS = \"dx-label-h-align\";\r\nvar LABEL_VERTICAL_ALIGNMENT_CLASS = \"dx-label-v-align\";\r\nvar FORM_LAYOUT_MANAGER_CLASS = \"dx-layout-manager\";\r\nvar LAYOUT_MANAGER_FIRST_ROW_CLASS = \"dx-first-row\";\r\nvar LAYOUT_MANAGER_LAST_ROW_CLASS = \"dx-last-row\";\r\nvar LAYOUT_MANAGER_FIRST_COL_CLASS = \"dx-first-col\";\r\nvar LAYOUT_MANAGER_LAST_COL_CLASS = \"dx-last-col\";\r\nvar LAYOUT_MANAGER_ONE_COLUMN = \"dx-layout-manager-one-col\";\r\nvar FLEX_LAYOUT_CLASS = \"dx-flex-layout\";\r\nvar INVALID_CLASS = \"dx-invalid\";\r\nvar LAYOUT_STRATEGY_FLEX = \"flex\";\r\nvar LAYOUT_STRATEGY_FALLBACK = \"fallback\";\r\nvar SIMPLE_ITEM_TYPE = \"simple\";\r\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\r\nvar DATA_OPTIONS = [\"dataSource\", \"items\"];\r\nvar EDITORS_WITH_ARRAY_VALUE = [\"dxTagBox\", \"dxRangeSlider\"];\r\nvar LayoutManager = _ui4.default.inherit({\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            layoutData: {},\r\n            readOnly: false,\r\n            colCount: 1,\r\n            colCountByScreen: void 0,\r\n            labelLocation: \"left\",\r\n            onFieldDataChanged: null,\r\n            onEditorEnterKey: null,\r\n            customizeItem: null,\r\n            alignItemLabels: true,\r\n            minColWidth: 200,\r\n            showRequiredMark: true,\r\n            screenByWidth: null,\r\n            showOptionalMark: false,\r\n            requiredMark: \"*\",\r\n            optionalMark: _message2.default.format(\"dxForm-optionalMark\"),\r\n            requiredMessage: _message2.default.getFormatter(\"dxForm-requiredMessage\")\r\n        })\r\n    },\r\n    _setOptionsByReference: function() {\r\n        this.callBase();\r\n        (0, _extend.extend)(this._optionsByReference, {\r\n            layoutData: true,\r\n            validationGroup: true\r\n        })\r\n    },\r\n    _init: function() {\r\n        var layoutData = this.option(\"layoutData\");\r\n        this.callBase();\r\n        this._itemWatchers = [];\r\n        this._itemsRunTimeInfo = new _uiForm2.default;\r\n        this._updateReferencedOptions(layoutData);\r\n        this._initDataAndItems(layoutData)\r\n    },\r\n    _dispose: function() {\r\n        this.callBase();\r\n        this._cleanItemWatchers()\r\n    },\r\n    _initDataAndItems: function(initialData) {\r\n        this._syncDataWithItems();\r\n        this._updateItems(initialData)\r\n    },\r\n    _syncDataWithItems: function() {\r\n        var _this = this;\r\n        var layoutData = this.option(\"layoutData\");\r\n        var userItems = this.option(\"items\");\r\n        if ((0, _type.isDefined)(userItems)) {\r\n            userItems.forEach(function(item) {\r\n                if (item.dataField && void 0 === _this._getDataByField(item.dataField)) {\r\n                    var value;\r\n                    if (item.editorOptions) {\r\n                        value = item.editorOptions.value\r\n                    }\r\n                    if ((0, _type.isDefined)(value) || item.dataField in layoutData) {\r\n                        _this._updateFieldValue(item.dataField, value)\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    },\r\n    _getDataByField: function(dataField) {\r\n        return dataField ? this.option(\"layoutData.\" + dataField) : null\r\n    },\r\n    _isCheckboxUndefinedStateEnabled: function(editorOption) {\r\n        if (true === editorOption.allowIndeterminateState && \"dxCheckBox\" === editorOption.editorType) {\r\n            var nameParts = [\"layoutData\"].concat(_toConsumableArray(editorOption.dataField.split(\".\")));\r\n            var propertyName = nameParts.pop();\r\n            var layoutData = this.option(nameParts.join(\".\"));\r\n            return layoutData && propertyName in layoutData\r\n        }\r\n        return false\r\n    },\r\n    _updateFieldValue: function(dataField, value) {\r\n        var layoutData = this.option(\"layoutData\");\r\n        var newValue = value;\r\n        if (!(0, _variable_wrapper.isWrapped)(layoutData[dataField]) && (0, _type.isDefined)(dataField)) {\r\n            this.option(\"layoutData.\" + dataField, newValue)\r\n        } else {\r\n            if ((0, _variable_wrapper.isWritableWrapped)(layoutData[dataField])) {\r\n                newValue = (0, _type.isFunction)(newValue) ? newValue() : newValue;\r\n                layoutData[dataField](newValue)\r\n            }\r\n        }\r\n        this._triggerOnFieldDataChanged({\r\n            dataField: dataField,\r\n            value: newValue\r\n        })\r\n    },\r\n    _triggerOnFieldDataChanged: function(args) {\r\n        this._createActionByOption(\"onFieldDataChanged\")(args)\r\n    },\r\n    _updateItems: function(layoutData) {\r\n        var that = this;\r\n        var userItems = this.option(\"items\");\r\n        var isUserItemsExist = (0, _type.isDefined)(userItems);\r\n        var customizeItem = that.option(\"customizeItem\");\r\n        var items = isUserItemsExist ? userItems : this._generateItemsByData(layoutData);\r\n        if ((0, _type.isDefined)(items)) {\r\n            var processedItems = [];\r\n            (0, _iterator.each)(items, function(index, item) {\r\n                if (that._isAcceptableItem(item)) {\r\n                    item = that._processItem(item);\r\n                    customizeItem && customizeItem(item);\r\n                    if ((0, _type.isObject)(item) && false !== (0, _variable_wrapper.unwrap)(item.visible)) {\r\n                        processedItems.push(item)\r\n                    }\r\n                }\r\n            });\r\n            if (!that._itemWatchers.length || !isUserItemsExist) {\r\n                that._updateItemWatchers(items)\r\n            }\r\n            this._items = processedItems;\r\n            this._sortItems()\r\n        }\r\n    },\r\n    _cleanItemWatchers: function() {\r\n        this._itemWatchers.forEach(function(dispose) {\r\n            dispose()\r\n        });\r\n        this._itemWatchers = []\r\n    },\r\n    _updateItemWatchers: function(items) {\r\n        var that = this;\r\n        var watch = that._getWatch();\r\n        items.forEach(function(item) {\r\n            if ((0, _type.isObject)(item) && (0, _type.isDefined)(item.visible) && (0, _type.isFunction)(watch)) {\r\n                that._itemWatchers.push(watch(function() {\r\n                    return (0, _variable_wrapper.unwrap)(item.visible)\r\n                }, function() {\r\n                    that._updateItems(that.option(\"layoutData\"));\r\n                    that.repaint()\r\n                }, {\r\n                    skipImmediate: true\r\n                }))\r\n            }\r\n        })\r\n    },\r\n    _generateItemsByData: function(layoutData) {\r\n        var result = [];\r\n        if ((0, _type.isDefined)(layoutData)) {\r\n            (0, _iterator.each)(layoutData, function(dataField) {\r\n                result.push({\r\n                    dataField: dataField\r\n                })\r\n            })\r\n        }\r\n        return result\r\n    },\r\n    _isAcceptableItem: function(item) {\r\n        var itemField = item.dataField || item;\r\n        var itemData = this._getDataByField(itemField);\r\n        return !((0, _type.isFunction)(itemData) && !(0, _variable_wrapper.isWrapped)(itemData))\r\n    },\r\n    _processItem: function(item) {\r\n        if (\"string\" === typeof item) {\r\n            item = {\r\n                dataField: item\r\n            }\r\n        }\r\n        if (\"object\" === _typeof(item) && !item.itemType) {\r\n            item.itemType = SIMPLE_ITEM_TYPE\r\n        }\r\n        if (!(0, _type.isDefined)(item.editorType) && (0, _type.isDefined)(item.dataField)) {\r\n            var value = this._getDataByField(item.dataField);\r\n            item.editorType = (0, _type.isDefined)(value) ? this._getEditorTypeByDataType((0, _type.type)(value)) : FORM_EDITOR_BY_DEFAULT\r\n        }\r\n        if (\"dxCheckBox\" === item.editorType) {\r\n            var _item$allowIndetermin;\r\n            item.allowIndeterminateState = null !== (_item$allowIndetermin = item.allowIndeterminateState) && void 0 !== _item$allowIndetermin ? _item$allowIndetermin : true\r\n        }\r\n        return item\r\n    },\r\n    _getEditorTypeByDataType: function(dataType) {\r\n        switch (dataType) {\r\n            case \"number\":\r\n                return \"dxNumberBox\";\r\n            case \"date\":\r\n                return \"dxDateBox\";\r\n            case \"boolean\":\r\n                return \"dxCheckBox\";\r\n            default:\r\n                return \"dxTextBox\"\r\n        }\r\n    },\r\n    _sortItems: function() {\r\n        (0, _array.normalizeIndexes)(this._items, \"visibleIndex\");\r\n        this._sortIndexes()\r\n    },\r\n    _sortIndexes: function() {\r\n        this._items.sort(function(itemA, itemB) {\r\n            var indexA = itemA.visibleIndex;\r\n            var indexB = itemB.visibleIndex;\r\n            var result;\r\n            if (indexA > indexB) {\r\n                result = 1\r\n            } else {\r\n                if (indexA < indexB) {\r\n                    result = -1\r\n                } else {\r\n                    result = 0\r\n                }\r\n            }\r\n            return result\r\n        })\r\n    },\r\n    _initMarkup: function() {\r\n        this._itemsRunTimeInfo.clear();\r\n        this.$element().addClass(FORM_LAYOUT_MANAGER_CLASS);\r\n        this.callBase();\r\n        this._renderResponsiveBox()\r\n    },\r\n    _hasBrowserFlex: function() {\r\n        return _style2.default.styleProp(LAYOUT_STRATEGY_FLEX) === LAYOUT_STRATEGY_FLEX\r\n    },\r\n    _renderResponsiveBox: function() {\r\n        var that = this;\r\n        var templatesInfo = [];\r\n        if (that._items && that._items.length) {\r\n            var colCount = that._getColCount();\r\n            var $container = (0, _renderer2.default)(\"<div>\").appendTo(that.$element());\r\n            that._prepareItemsWithMerging(colCount);\r\n            var layoutItems = that._generateLayoutItems();\r\n            that._extendItemsWithDefaultTemplateOptions(layoutItems, that._items);\r\n            that._responsiveBox = that._createComponent($container, _responsive_box2.default, that._getResponsiveBoxConfig(layoutItems, colCount, templatesInfo));\r\n            if (!_window2.default.hasWindow()) {\r\n                that._renderTemplates(templatesInfo)\r\n            }\r\n        }\r\n    },\r\n    _extendItemsWithDefaultTemplateOptions: function(targetItems, sourceItems) {\r\n        sourceItems.forEach(function(item) {\r\n            if (!item.merged) {\r\n                if ((0, _type.isDefined)(item.disabled)) {\r\n                    targetItems[item.visibleIndex].disabled = item.disabled\r\n                }\r\n                if ((0, _type.isDefined)(item.visible)) {\r\n                    targetItems[item.visibleIndex].visible = item.visible\r\n                }\r\n            }\r\n        })\r\n    },\r\n    _itemStateChangedHandler: function(e) {\r\n        this._refresh()\r\n    },\r\n    _renderTemplate: function($container, item) {\r\n        switch (item.itemType) {\r\n            case \"empty\":\r\n                this._renderEmptyItem($container);\r\n                break;\r\n            case \"button\":\r\n                this._renderButtonItem(item, $container);\r\n                break;\r\n            default:\r\n                this._renderFieldItem(item, $container)\r\n        }\r\n    },\r\n    _renderTemplates: function(templatesInfo) {\r\n        var that = this;\r\n        (0, _iterator.each)(templatesInfo, function(index, info) {\r\n            that._renderTemplate(info.container, info.formItem)\r\n        })\r\n    },\r\n    _getResponsiveBoxConfig: function(layoutItems, colCount, templatesInfo) {\r\n        var that = this;\r\n        var colCountByScreen = that.option(\"colCountByScreen\");\r\n        var xsColCount = colCountByScreen && colCountByScreen.xs;\r\n        return {\r\n            onItemStateChanged: this._itemStateChangedHandler.bind(this),\r\n            _layoutStrategy: that._hasBrowserFlex() ? LAYOUT_STRATEGY_FLEX : LAYOUT_STRATEGY_FALLBACK,\r\n            onLayoutChanged: function onLayoutChanged() {\r\n                var onLayoutChanged = that.option(\"onLayoutChanged\");\r\n                var isSingleColumnMode = that.isSingleColumnMode();\r\n                if (onLayoutChanged) {\r\n                    that.$element().toggleClass(LAYOUT_MANAGER_ONE_COLUMN, isSingleColumnMode);\r\n                    onLayoutChanged(isSingleColumnMode)\r\n                }\r\n            },\r\n            onContentReady: function(e) {\r\n                if (_window2.default.hasWindow()) {\r\n                    that._renderTemplates(templatesInfo)\r\n                }\r\n                if (that.option(\"onLayoutChanged\")) {\r\n                    that.$element().toggleClass(LAYOUT_MANAGER_ONE_COLUMN, that.isSingleColumnMode(e.component))\r\n                }\r\n            },\r\n            itemTemplate: function(e, itemData, itemElement) {\r\n                if (!e.location) {\r\n                    return\r\n                }\r\n                var $itemElement = (0, _renderer2.default)(itemElement);\r\n                var itemRenderedCountInPreviousRows = e.location.row * colCount;\r\n                var item = that._items[e.location.col + itemRenderedCountInPreviousRows];\r\n                var $fieldItem = (0, _renderer2.default)(\"<div>\").addClass(item.cssClass).appendTo($itemElement);\r\n                templatesInfo.push({\r\n                    container: $fieldItem,\r\n                    formItem: item\r\n                });\r\n                $itemElement.toggleClass(SINGLE_COLUMN_ITEM_CONTENT, that.isSingleColumnMode(this));\r\n                if (0 === e.location.row) {\r\n                    $fieldItem.addClass(LAYOUT_MANAGER_FIRST_ROW_CLASS)\r\n                }\r\n                if (0 === e.location.col) {\r\n                    $fieldItem.addClass(LAYOUT_MANAGER_FIRST_COL_CLASS)\r\n                }\r\n                var isLastColumn = e.location.col === colCount - 1 || e.location.col + e.location.colspan === colCount;\r\n                var rowsCount = that._getRowsCount();\r\n                var isLastRow = e.location.row === rowsCount - 1;\r\n                if (isLastColumn) {\r\n                    $fieldItem.addClass(LAYOUT_MANAGER_LAST_COL_CLASS)\r\n                }\r\n                if (isLastRow) {\r\n                    $fieldItem.addClass(LAYOUT_MANAGER_LAST_ROW_CLASS)\r\n                }\r\n            },\r\n            cols: that._generateRatio(colCount),\r\n            rows: that._generateRatio(that._getRowsCount(), true),\r\n            dataSource: layoutItems,\r\n            screenByWidth: that.option(\"screenByWidth\"),\r\n            singleColumnScreen: xsColCount ? false : \"xs\"\r\n        }\r\n    },\r\n    _getColCount: function() {\r\n        var colCount = this.option(\"colCount\");\r\n        var colCountByScreen = this.option(\"colCountByScreen\");\r\n        if (colCountByScreen) {\r\n            var screenFactor = this.option(\"form\").getTargetScreenFactor();\r\n            if (!screenFactor) {\r\n                screenFactor = _window2.default.hasWindow() ? _window2.default.getCurrentScreenFactor(this.option(\"screenByWidth\")) : \"lg\"\r\n            }\r\n            colCount = colCountByScreen[screenFactor] || colCount\r\n        }\r\n        if (\"auto\" === colCount) {\r\n            if (this._cashedColCount) {\r\n                return this._cashedColCount\r\n            }\r\n            this._cashedColCount = colCount = this._getMaxColCount()\r\n        }\r\n        return colCount < 1 ? 1 : colCount\r\n    },\r\n    _getMaxColCount: function() {\r\n        if (!_window2.default.hasWindow()) {\r\n            return 1\r\n        }\r\n        var minColWidth = this.option(\"minColWidth\");\r\n        var width = this.$element().width();\r\n        var itemsCount = this._items.length;\r\n        var maxColCount = Math.floor(width / minColWidth) || 1;\r\n        return itemsCount < maxColCount ? itemsCount : maxColCount\r\n    },\r\n    isCachedColCountObsolete: function() {\r\n        return this._cashedColCount && this._getMaxColCount() !== this._cashedColCount\r\n    },\r\n    _prepareItemsWithMerging: function(colCount) {\r\n        var items = this._items.slice(0);\r\n        var item;\r\n        var itemsMergedByCol;\r\n        var result = [];\r\n        var j;\r\n        var i;\r\n        for (i = 0; i < items.length; i++) {\r\n            item = items[i];\r\n            result.push(item);\r\n            if (this.option(\"alignItemLabels\") || item.alignItemLabels || item.colSpan) {\r\n                item.col = this._getColByIndex(result.length - 1, colCount)\r\n            }\r\n            if (item.colSpan > 1 && item.col + item.colSpan <= colCount) {\r\n                itemsMergedByCol = [];\r\n                for (j = 0; j < item.colSpan - 1; j++) {\r\n                    itemsMergedByCol.push({\r\n                        merged: true\r\n                    })\r\n                }\r\n                result = result.concat(itemsMergedByCol)\r\n            } else {\r\n                delete item.colSpan\r\n            }\r\n        }\r\n        this._items = result\r\n    },\r\n    _getColByIndex: function(index, colCount) {\r\n        return index % colCount\r\n    },\r\n    _generateLayoutItems: function() {\r\n        var items = this._items;\r\n        var colCount = this._getColCount();\r\n        var result = [];\r\n        var item;\r\n        var i;\r\n        for (i = 0; i < items.length; i++) {\r\n            item = items[i];\r\n            if (!item.merged) {\r\n                var generatedItem = {\r\n                    location: {\r\n                        row: parseInt(i / colCount),\r\n                        col: this._getColByIndex(i, colCount)\r\n                    }\r\n                };\r\n                if ((0, _type.isDefined)(item.colSpan)) {\r\n                    generatedItem.location.colspan = item.colSpan\r\n                }\r\n                if ((0, _type.isDefined)(item.rowSpan)) {\r\n                    generatedItem.location.rowspan = item.rowSpan\r\n                }\r\n                result.push(generatedItem)\r\n            }\r\n        }\r\n        return result\r\n    },\r\n    _renderEmptyItem: function($container) {\r\n        return $container.addClass(FIELD_EMPTY_ITEM_CLASS).html(\"&nbsp;\")\r\n    },\r\n    _getButtonHorizontalAlignment: function(item) {\r\n        if ((0, _type.isDefined)(item.horizontalAlignment)) {\r\n            return item.horizontalAlignment\r\n        }\r\n        if ((0, _type.isDefined)(item.alignment)) {\r\n            _ui2.default.log(\"W0001\", \"dxForm\", \"alignment\", \"18.1\", \"Use the 'horizontalAlignment' option in button items instead.\");\r\n            return item.alignment\r\n        }\r\n        return \"right\"\r\n    },\r\n    _getButtonVerticalAlignment: function(item) {\r\n        switch (item.verticalAlignment) {\r\n            case \"center\":\r\n                return \"center\";\r\n            case \"bottom\":\r\n                return \"flex-end\";\r\n            default:\r\n                return \"flex-start\"\r\n        }\r\n    },\r\n    _renderButtonItem: function(item, $container) {\r\n        var $button = (0, _renderer2.default)(\"<div>\").appendTo($container);\r\n        var defaultOptions = {\r\n            validationGroup: this.option(\"validationGroup\")\r\n        };\r\n        $container.addClass(FIELD_BUTTON_ITEM_CLASS).css(\"textAlign\", this._getButtonHorizontalAlignment(item));\r\n        $container.parent().css(\"justifyContent\", this._getButtonVerticalAlignment(item));\r\n        var instance = this._createComponent($button, \"dxButton\", (0, _extend.extend)(defaultOptions, item.buttonOptions));\r\n        this._itemsRunTimeInfo.add({\r\n            item: item,\r\n            widgetInstance: instance,\r\n            guid: item.guid,\r\n            $itemContainer: $container\r\n        });\r\n        this._addItemClasses($container, item.col);\r\n        return $button\r\n    },\r\n    _addItemClasses: function($item, column) {\r\n        $item.addClass(FIELD_ITEM_CLASS).addClass(this.option(\"cssItemClass\")).addClass((0, _type.isDefined)(column) ? \"dx-col-\" + column : \"\")\r\n    },\r\n    _renderFieldItem: function(item, $container) {\r\n        var that = this;\r\n        var name = that._getName(item);\r\n        var id = that.getItemID(name);\r\n        var isRequired = (0, _type.isDefined)(item.isRequired) ? item.isRequired : !!that._hasRequiredRuleInSet(item.validationRules);\r\n        var labelOptions = that._getLabelOptions(item, id, isRequired);\r\n        var $editor = (0, _renderer2.default)(\"<div>\");\r\n        var helpID = item.helpText ? \"dx-\" + new _guid2.default : null;\r\n        var $label;\r\n        this._addItemClasses($container, item.col);\r\n        $container.addClass(isRequired ? FIELD_ITEM_REQUIRED_CLASS : FIELD_ITEM_OPTIONAL_CLASS);\r\n        if (labelOptions.visible && labelOptions.text) {\r\n            $label = that._renderLabel(labelOptions).appendTo($container)\r\n        }\r\n        if (item.itemType === SIMPLE_ITEM_TYPE) {\r\n            if (that._isLabelNeedBaselineAlign(item) && \"top\" !== labelOptions.location) {\r\n                $container.addClass(FIELD_ITEM_LABEL_ALIGN_CLASS)\r\n            }\r\n            that._hasBrowserFlex() && $container.addClass(FLEX_LAYOUT_CLASS)\r\n        }\r\n        $editor.data(\"dx-form-item\", item);\r\n        that._appendEditorToField({\r\n            $fieldItem: $container,\r\n            $label: $label,\r\n            $editor: $editor,\r\n            labelOptions: labelOptions\r\n        });\r\n        var instance = that._renderEditor({\r\n            $container: $editor,\r\n            dataField: item.dataField,\r\n            name: item.name,\r\n            editorType: item.editorType,\r\n            editorOptions: item.editorOptions,\r\n            template: that._getTemplateByFieldItem(item),\r\n            isRequired: isRequired,\r\n            helpID: helpID,\r\n            labelID: labelOptions.labelID,\r\n            id: id,\r\n            validationBoundary: that.option(\"validationBoundary\"),\r\n            allowIndeterminateState: item.allowIndeterminateState\r\n        });\r\n        this._itemsRunTimeInfo.add({\r\n            item: item,\r\n            widgetInstance: instance,\r\n            guid: item.guid,\r\n            $itemContainer: $container\r\n        });\r\n        var editorElem = $editor.children().first();\r\n        var $validationTarget = editorElem.hasClass(TEMPLATE_WRAPPER_CLASS) ? editorElem.children().first() : editorElem;\r\n        if ($validationTarget && $validationTarget.data(\"dx-validation-target\")) {\r\n            that._renderValidator($validationTarget, item)\r\n        }\r\n        that._renderHelpText(item, $editor, helpID);\r\n        that._attachClickHandler($label, $editor, item.editorType)\r\n    },\r\n    _hasRequiredRuleInSet: function(rules) {\r\n        var hasRequiredRule;\r\n        if (rules && rules.length) {\r\n            (0, _iterator.each)(rules, function(index, rule) {\r\n                if (\"required\" === rule.type) {\r\n                    hasRequiredRule = true;\r\n                    return false\r\n                }\r\n            })\r\n        }\r\n        return hasRequiredRule\r\n    },\r\n    _getName: function(item) {\r\n        return item.dataField || item.name\r\n    },\r\n    _isLabelNeedBaselineAlign: function(item) {\r\n        var largeEditors = [\"dxTextArea\", \"dxRadioGroup\", \"dxCalendar\", \"dxHtmlEditor\"];\r\n        return !!item.helpText && !this._hasBrowserFlex() || (0, _array.inArray)(item.editorType, largeEditors) !== -1\r\n    },\r\n    _isLabelNeedId: function(item) {\r\n        var editorsRequiringIdForLabel = [\"dxRadioGroup\", \"dxCheckBox\", \"dxLookup\", \"dxSlider\", \"dxRangeSlider\", \"dxSwitch\", \"dxHtmlEditor\"];\r\n        return (0, _array.inArray)(item.editorType, editorsRequiringIdForLabel) !== -1\r\n    },\r\n    _getLabelOptions: function(item, id, isRequired) {\r\n        var labelOptions = (0, _extend.extend)({\r\n            showColon: this.option(\"showColonAfterLabel\"),\r\n            location: this.option(\"labelLocation\"),\r\n            id: id,\r\n            visible: true,\r\n            isRequired: isRequired\r\n        }, item ? item.label : {});\r\n        if (this._isLabelNeedId(item)) {\r\n            labelOptions.labelID = \"dx-label-\".concat(new _guid2.default)\r\n        }\r\n        if (!labelOptions.text && item.dataField) {\r\n            labelOptions.text = _inflector2.default.captionize(item.dataField)\r\n        }\r\n        if (labelOptions.text) {\r\n            labelOptions.text += labelOptions.showColon ? \":\" : \"\"\r\n        }\r\n        return labelOptions\r\n    },\r\n    _renderLabel: function(options) {\r\n        var text = options.text,\r\n            id = options.id,\r\n            location = options.location,\r\n            alignment = options.alignment,\r\n            isRequired = options.isRequired,\r\n            _options$labelID = options.labelID,\r\n            labelID = void 0 === _options$labelID ? null : _options$labelID;\r\n        if ((0, _type.isDefined)(text) && text.length > 0) {\r\n            var labelClasses = FIELD_ITEM_LABEL_CLASS + \" \" + FIELD_ITEM_LABEL_LOCATION_CLASS + location;\r\n            var $label = (0, _renderer2.default)(\"<label>\").addClass(labelClasses).attr(\"for\", id).attr(\"id\", labelID);\r\n            var $labelContent = (0, _renderer2.default)(\"<span>\").addClass(FIELD_ITEM_LABEL_CONTENT_CLASS).appendTo($label);\r\n            (0, _renderer2.default)(\"<span>\").addClass(FIELD_ITEM_LABEL_TEXT_CLASS).text(text).appendTo($labelContent);\r\n            if (alignment) {\r\n                $label.css(\"textAlign\", alignment)\r\n            }\r\n            $labelContent.append(this._renderLabelMark(isRequired));\r\n            return $label\r\n        }\r\n    },\r\n    _renderLabelMark: function(isRequired) {\r\n        var $mark;\r\n        var requiredMarksConfig = this._getRequiredMarksConfig();\r\n        var isRequiredMark = requiredMarksConfig.showRequiredMark && isRequired;\r\n        var isOptionalMark = requiredMarksConfig.showOptionalMark && !isRequired;\r\n        if (isRequiredMark || isOptionalMark) {\r\n            var markClass = isRequiredMark ? FIELD_ITEM_REQUIRED_MARK_CLASS : FIELD_ITEM_OPTIONAL_MARK_CLASS;\r\n            var markText = isRequiredMark ? requiredMarksConfig.requiredMark : requiredMarksConfig.optionalMark;\r\n            $mark = (0, _renderer2.default)(\"<span>\").addClass(markClass).html(\"&nbsp\" + markText)\r\n        }\r\n        return $mark\r\n    },\r\n    _getRequiredMarksConfig: function() {\r\n        if (!this._cashedRequiredConfig) {\r\n            this._cashedRequiredConfig = {\r\n                showRequiredMark: this.option(\"showRequiredMark\"),\r\n                showOptionalMark: this.option(\"showOptionalMark\"),\r\n                requiredMark: this.option(\"requiredMark\"),\r\n                optionalMark: this.option(\"optionalMark\")\r\n            }\r\n        }\r\n        return this._cashedRequiredConfig\r\n    },\r\n    _renderEditor: function(options) {\r\n        var dataValue = this._getDataByField(options.dataField);\r\n        var defaultEditorOptions = void 0 !== dataValue || this._isCheckboxUndefinedStateEnabled(options) ? {\r\n            value: dataValue\r\n        } : {};\r\n        var isDeepExtend = true;\r\n        if (EDITORS_WITH_ARRAY_VALUE.indexOf(options.editorType) !== -1) {\r\n            defaultEditorOptions.value = defaultEditorOptions.value || []\r\n        }\r\n        var formInstance = this.option(\"form\");\r\n        var editorOptions = (0, _extend.extend)(isDeepExtend, defaultEditorOptions, options.editorOptions, {\r\n            inputAttr: {\r\n                id: options.id\r\n            },\r\n            validationBoundary: options.validationBoundary,\r\n            stylingMode: formInstance && formInstance.option(\"stylingMode\")\r\n        });\r\n        this._replaceDataOptions(options.editorOptions, editorOptions);\r\n        var renderOptions = {\r\n            editorType: options.editorType,\r\n            dataField: options.dataField,\r\n            template: options.template,\r\n            name: options.name,\r\n            helpID: options.helpID,\r\n            labelID: options.labelID,\r\n            isRequired: options.isRequired\r\n        };\r\n        return this._createEditor(options.$container, renderOptions, editorOptions)\r\n    },\r\n    _replaceDataOptions: function(originalOptions, resultOptions) {\r\n        if (originalOptions) {\r\n            DATA_OPTIONS.forEach(function(item) {\r\n                if (resultOptions[item]) {\r\n                    resultOptions[item] = originalOptions[item]\r\n                }\r\n            })\r\n        }\r\n    },\r\n    _renderValidator: function($editor, item) {\r\n        var fieldName = this._getFieldLabelName(item);\r\n        var validationRules = this._prepareValidationRules(item.validationRules, item.isRequired, item.itemType, fieldName);\r\n        if (Array.isArray(validationRules) && validationRules.length) {\r\n            this._createComponent($editor, _validator2.default, {\r\n                validationRules: validationRules,\r\n                validationGroup: this.option(\"validationGroup\"),\r\n                dataGetter: function() {\r\n                    return {\r\n                        formItem: item\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    },\r\n    _getFieldLabelName: function(item) {\r\n        var isItemHaveCustomLabel = item.label && item.label.text;\r\n        var itemName = isItemHaveCustomLabel ? null : this._getName(item);\r\n        return isItemHaveCustomLabel ? item.label.text : itemName && _inflector2.default.captionize(itemName)\r\n    },\r\n    _prepareValidationRules: function(userValidationRules, isItemRequired, itemType, itemName) {\r\n        var isSimpleItem = itemType === SIMPLE_ITEM_TYPE;\r\n        var validationRules;\r\n        if (isSimpleItem) {\r\n            if (userValidationRules) {\r\n                validationRules = userValidationRules\r\n            } else {\r\n                var requiredMessage = _string2.default.format(this.option(\"requiredMessage\"), itemName || \"\");\r\n                validationRules = isItemRequired ? [{\r\n                    type: \"required\",\r\n                    message: requiredMessage\r\n                }] : null\r\n            }\r\n        }\r\n        return validationRules\r\n    },\r\n    _addWrapperInvalidClass: function(editorInstance) {\r\n        var wrapperClass = \".\" + FIELD_ITEM_CONTENT_WRAPPER_CLASS;\r\n        var toggleInvalidClass = function(e) {\r\n            (0, _renderer2.default)(e.element).parents(wrapperClass).toggleClass(INVALID_CLASS, e.component._isFocused() && false === e.component.option(\"isValid\"))\r\n        };\r\n        editorInstance.on(\"focusIn\", toggleInvalidClass).on(\"focusOut\", toggleInvalidClass).on(\"enterKey\", toggleInvalidClass)\r\n    },\r\n    _createEditor: function($container, renderOptions, editorOptions) {\r\n        var that = this;\r\n        var template = renderOptions.template;\r\n        var editorInstance;\r\n        if (renderOptions.dataField && !editorOptions.name) {\r\n            editorOptions.name = renderOptions.dataField\r\n        }\r\n        that._addItemContentClasses($container);\r\n        if (template) {\r\n            var data = {\r\n                dataField: renderOptions.dataField,\r\n                editorType: renderOptions.editorType,\r\n                editorOptions: editorOptions,\r\n                component: that._getComponentOwner(),\r\n                name: renderOptions.name\r\n            };\r\n            template.render({\r\n                model: data,\r\n                container: _dom2.default.getPublicElement($container)\r\n            })\r\n        } else {\r\n            var $editor = (0, _renderer2.default)(\"<div>\").appendTo($container);\r\n            try {\r\n                editorInstance = that._createComponent($editor, renderOptions.editorType, editorOptions);\r\n                editorInstance.setAria(\"describedby\", renderOptions.helpID);\r\n                editorInstance.setAria(\"labelledby\", renderOptions.labelID);\r\n                editorInstance.setAria(\"required\", renderOptions.isRequired);\r\n                if (_themes2.default.isMaterial()) {\r\n                    that._addWrapperInvalidClass(editorInstance)\r\n                }\r\n                if (renderOptions.dataField) {\r\n                    that._bindDataField(editorInstance, renderOptions, $container)\r\n                }\r\n            } catch (e) {\r\n                _ui2.default.log(\"E1035\", e.message)\r\n            }\r\n        }\r\n        return editorInstance\r\n    },\r\n    _getComponentOwner: function() {\r\n        return this.option(\"form\") || this\r\n    },\r\n    _bindDataField: function(editorInstance, renderOptions, $container) {\r\n        var componentOwner = this._getComponentOwner();\r\n        editorInstance.on(\"enterKey\", function(args) {\r\n            componentOwner._createActionByOption(\"onEditorEnterKey\")((0, _extend.extend)(args, {\r\n                dataField: renderOptions.dataField\r\n            }))\r\n        });\r\n        this._createWatcher(editorInstance, $container, renderOptions);\r\n        this.linkEditorToDataField(editorInstance, renderOptions.dataField, renderOptions.editorType)\r\n    },\r\n    _createWatcher: function(editorInstance, $container, renderOptions) {\r\n        var that = this;\r\n        var watch = that._getWatch();\r\n        if (!(0, _type.isFunction)(watch)) {\r\n            return\r\n        }\r\n        var dispose = watch(function() {\r\n            return that._getDataByField(renderOptions.dataField)\r\n        }, function() {\r\n            editorInstance.option(\"value\", that._getDataByField(renderOptions.dataField))\r\n        }, {\r\n            deep: true,\r\n            skipImmediate: true\r\n        });\r\n        _events_engine2.default.on($container, _remove_event2.default, dispose)\r\n    },\r\n    _getWatch: function() {\r\n        if (!(0, _type.isDefined)(this._watch)) {\r\n            var formInstance = this.option(\"form\");\r\n            this._watch = formInstance && formInstance.option(\"integrationOptions.watchMethod\")\r\n        }\r\n        return this._watch\r\n    },\r\n    _addItemContentClasses: function($itemContent) {\r\n        var locationSpecificClass = this._getItemContentLocationSpecificClass();\r\n        $itemContent.addClass([FIELD_ITEM_CONTENT_CLASS, locationSpecificClass].join(\" \"))\r\n    },\r\n    _getItemContentLocationSpecificClass: function() {\r\n        var labelLocation = this.option(\"labelLocation\");\r\n        var oppositeClasses = {\r\n            right: \"left\",\r\n            left: \"right\",\r\n            top: \"bottom\"\r\n        };\r\n        return FIELD_ITEM_CONTENT_LOCATION_CLASS + oppositeClasses[labelLocation]\r\n    },\r\n    _createComponent: function($editor, type, editorOptions) {\r\n        var that = this;\r\n        var readOnlyState = this.option(\"readOnly\");\r\n        var instance = that.callBase($editor, type, editorOptions);\r\n        readOnlyState && instance.option(\"readOnly\", readOnlyState);\r\n        that.on(\"optionChanged\", function(args) {\r\n            if (\"readOnly\" === args.name && !(0, _type.isDefined)(editorOptions.readOnly)) {\r\n                instance.option(args.name, args.value)\r\n            }\r\n        });\r\n        return instance\r\n    },\r\n    _getTemplateByFieldItem: function(fieldItem) {\r\n        return fieldItem.template ? this._getTemplate(fieldItem.template) : null\r\n    },\r\n    _appendEditorToField: function(params) {\r\n        if (params.$label) {\r\n            var location = params.labelOptions.location;\r\n            if (\"top\" === location || \"left\" === location) {\r\n                params.$fieldItem.append(params.$editor)\r\n            }\r\n            if (\"right\" === location) {\r\n                params.$fieldItem.prepend(params.$editor)\r\n            }\r\n            this._addInnerItemAlignmentClass(params.$fieldItem, location)\r\n        } else {\r\n            params.$fieldItem.append(params.$editor)\r\n        }\r\n    },\r\n    _addInnerItemAlignmentClass: function($fieldItem, location) {\r\n        if (\"top\" === location) {\r\n            $fieldItem.addClass(LABEL_VERTICAL_ALIGNMENT_CLASS)\r\n        } else {\r\n            $fieldItem.addClass(LABEL_HORIZONTAL_ALIGNMENT_CLASS)\r\n        }\r\n    },\r\n    _renderHelpText: function(fieldItem, $editor, helpID) {\r\n        var helpText = fieldItem.helpText;\r\n        var isSimpleItem = fieldItem.itemType === SIMPLE_ITEM_TYPE;\r\n        if (helpText && isSimpleItem) {\r\n            var $editorWrapper = (0, _renderer2.default)(\"<div>\").addClass(FIELD_ITEM_CONTENT_WRAPPER_CLASS);\r\n            $editor.wrap($editorWrapper);\r\n            (0, _renderer2.default)(\"<div>\").addClass(FIELD_ITEM_HELP_TEXT_CLASS).attr(\"id\", helpID).text(helpText).appendTo($editor.parent())\r\n        }\r\n    },\r\n    _attachClickHandler: function($label, $editor, editorType) {\r\n        var isBooleanEditors = \"dxCheckBox\" === editorType || \"dxSwitch\" === editorType;\r\n        if ($label && isBooleanEditors) {\r\n            _events_engine2.default.on($label, _click2.default.name, function() {\r\n                _events_engine2.default.trigger($editor.children(), _click2.default.name)\r\n            })\r\n        }\r\n    },\r\n    _generateRatio: function(count, isAutoSize) {\r\n        var result = [];\r\n        var ratio;\r\n        var i;\r\n        for (i = 0; i < count; i++) {\r\n            ratio = {\r\n                ratio: 1\r\n            };\r\n            if (isAutoSize) {\r\n                ratio.baseSize = \"auto\"\r\n            }\r\n            result.push(ratio)\r\n        }\r\n        return result\r\n    },\r\n    _getRowsCount: function() {\r\n        return Math.ceil(this._items.length / this._getColCount())\r\n    },\r\n    _updateReferencedOptions: function(newLayoutData) {\r\n        var _this2 = this;\r\n        var layoutData = this.option(\"layoutData\");\r\n        if ((0, _type.isObject)(layoutData)) {\r\n            Object.getOwnPropertyNames(layoutData).forEach(function(property) {\r\n                return delete _this2._optionsByReference[\"layoutData.\" + property]\r\n            })\r\n        }\r\n        if ((0, _type.isObject)(newLayoutData)) {\r\n            Object.getOwnPropertyNames(newLayoutData).forEach(function(property) {\r\n                return _this2._optionsByReference[\"layoutData.\" + property] = true\r\n            })\r\n        }\r\n    },\r\n    _resetWidget: function(instance) {\r\n        this._disableEditorValueChangedHandler = true;\r\n        instance.reset();\r\n        this._disableEditorValueChangedHandler = false;\r\n        instance.option(\"isValid\", true)\r\n    },\r\n    _optionChanged: function(args) {\r\n        var _this3 = this;\r\n        if (0 === args.fullName.search(\"layoutData.\")) {\r\n            return\r\n        }\r\n        switch (args.name) {\r\n            case \"showRequiredMark\":\r\n            case \"showOptionalMark\":\r\n            case \"requiredMark\":\r\n            case \"optionalMark\":\r\n                this._cashedRequiredConfig = null;\r\n                this._invalidate();\r\n                break;\r\n            case \"layoutData\":\r\n                this._updateReferencedOptions(args.value);\r\n                if (this.option(\"items\")) {\r\n                    if (!(0, _type.isEmptyObject)(args.value)) {\r\n                        this._itemsRunTimeInfo.each(function(_, itemRunTimeInfo) {\r\n                            if ((0, _type.isDefined)(itemRunTimeInfo.item)) {\r\n                                var dataField = itemRunTimeInfo.item.dataField;\r\n                                if (dataField && (0, _type.isDefined)(itemRunTimeInfo.widgetInstance)) {\r\n                                    var valueGetter = _data2.default.compileGetter(dataField);\r\n                                    var dataValue = valueGetter(args.value);\r\n                                    if (void 0 !== dataValue || _this3._isCheckboxUndefinedStateEnabled(itemRunTimeInfo.item)) {\r\n                                        itemRunTimeInfo.widgetInstance.option(\"value\", dataValue)\r\n                                    } else {\r\n                                        _this3._resetWidget(itemRunTimeInfo.widgetInstance)\r\n                                    }\r\n                                }\r\n                            }\r\n                        })\r\n                    }\r\n                } else {\r\n                    this._initDataAndItems(args.value);\r\n                    this._invalidate()\r\n                }\r\n                break;\r\n            case \"items\":\r\n                this._cleanItemWatchers();\r\n                this._initDataAndItems(args.value);\r\n                this._invalidate();\r\n                break;\r\n            case \"alignItemLabels\":\r\n            case \"labelLocation\":\r\n            case \"requiredMessage\":\r\n                this._invalidate();\r\n                break;\r\n            case \"customizeItem\":\r\n                this._updateItems(this.option(\"layoutData\"));\r\n                this._invalidate();\r\n                break;\r\n            case \"colCount\":\r\n                this._resetColCount();\r\n                break;\r\n            case \"minColWidth\":\r\n                if (\"auto\" === this.option(\"colCount\")) {\r\n                    this._resetColCount()\r\n                }\r\n                break;\r\n            case \"readOnly\":\r\n                break;\r\n            case \"width\":\r\n                this.callBase(args);\r\n                if (\"auto\" === this.option(\"colCount\")) {\r\n                    this._resetColCount()\r\n                }\r\n                break;\r\n            case \"onFieldDataChanged\":\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _resetColCount: function() {\r\n        this._cashedColCount = null;\r\n        this._invalidate()\r\n    },\r\n    linkEditorToDataField: function(editorInstance, dataField) {\r\n        var _this4 = this;\r\n        this.on(\"optionChanged\", function(args) {\r\n            if (args.fullName === \"layoutData.\".concat(dataField)) {\r\n                editorInstance._setOptionWithoutOptionChange(\"value\", args.value)\r\n            }\r\n        });\r\n        editorInstance.on(\"valueChanged\", function(args) {\r\n            var isValueReferenceType = (0, _type.isObject)(args.value) || Array.isArray(args.value);\r\n            if (!_this4._disableEditorValueChangedHandler && !(isValueReferenceType && args.value === args.previousValue)) {\r\n                _this4._updateFieldValue(dataField, args.value)\r\n            }\r\n        })\r\n    },\r\n    _dimensionChanged: function() {\r\n        if (\"auto\" === this.option(\"colCount\") && this.isCachedColCountObsolete()) {\r\n            this._eventsStrategy.fireEvent(\"autoColCountChanged\")\r\n        }\r\n    },\r\n    getItemID: function(name) {\r\n        var formInstance = this.option(\"form\");\r\n        return formInstance && formInstance.getItemID(name)\r\n    },\r\n    updateData: function(data, value) {\r\n        var that = this;\r\n        if ((0, _type.isObject)(data)) {\r\n            (0, _iterator.each)(data, function(dataField, fieldValue) {\r\n                that._updateFieldValue(dataField, fieldValue)\r\n            })\r\n        } else {\r\n            if (\"string\" === typeof data) {\r\n                that._updateFieldValue(data, value)\r\n            }\r\n        }\r\n    },\r\n    getEditor: function(field) {\r\n        return this._itemsRunTimeInfo.findWidgetInstanceByDataField(field) || this._itemsRunTimeInfo.findWidgetInstanceByName(field)\r\n    },\r\n    isSingleColumnMode: function(component) {\r\n        var responsiveBox = this._responsiveBox || component;\r\n        if (responsiveBox) {\r\n            return responsiveBox.option(\"currentScreenFactor\") === responsiveBox.option(\"singleColumnScreen\")\r\n        }\r\n    },\r\n    getItemsRunTimeInfo: function() {\r\n        return this._itemsRunTimeInfo\r\n    }\r\n});\r\n(0, _component_registrator2.default)(\"dxLayoutManager\", LayoutManager);\r\nmodule.exports = LayoutManager;\r\n"]},"metadata":{},"sourceType":"script"}